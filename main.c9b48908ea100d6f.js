(self.webpackChunkaliabbas101_ngportfolio=self.webpackChunkaliabbas101_ngportfolio||[]).push([[179],{4524:(le,$,A)=>{"use strict";function F(n){return"function"==typeof n}function J(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=J(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function H(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class V{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(F(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_teardowns:i}=this;if(i){this._teardowns=null;for(const s of i)try{T(s)}catch(o){e=null!=e?e:[],o instanceof O?e=[...e,...o.errors]:e.push(o)}}if(e)throw new O(e)}}add(e){var t;if(e&&e!==this)if(this.closed)T(e);else{if(e instanceof V){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&H(t,e)}remove(e){const{_teardowns:t}=this;t&&H(t,e),e instanceof V&&e._removeParent(this)}}V.EMPTY=(()=>{const n=new V;return n.closed=!0,n})();const N=V.EMPTY;function L(n){return n instanceof V||n&&"closed"in n&&F(n.remove)&&F(n.add)&&F(n.unsubscribe)}function T(n){F(n)?n():n.unsubscribe()}const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout(...n){const{delegate:e}=B;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=B;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Q(n){B.setTimeout(()=>{const{onUnhandledError:e}=E;if(!e)throw n;e(n)})}function X(){}const _e=Te("C",void 0,void 0);function Te(n,e,t){return{kind:n,value:e,error:t}}let Oe=null;function ae(n){if(E.useDeprecatedSynchronousErrorHandling){const e=!Oe;if(e&&(Oe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Oe;if(Oe=null,t)throw r}}else n()}class b extends V{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,L(e)&&e.add(this)):this.destination=de}static create(e,t,r){return new z(e,t,r)}next(e){this.isStopped?te(function ie(n){return Te("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?te(function be(n){return Te("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?te(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class z extends b{constructor(e,t,r){let i;if(super(),F(e))i=e;else if(e){let s;({next:i,error:t,complete:r}=e),this&&E.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,i=null==i?void 0:i.bind(s),t=null==t?void 0:t.bind(s),r=null==r?void 0:r.bind(s)}this.destination={next:i?G(i):X,error:G(null!=t?t:me),complete:r?G(r):X}}}function G(n,e){return(...t)=>{try{n(...t)}catch(r){E.useDeprecatedSynchronousErrorHandling?function D(n){E.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=n)}(r):Q(r)}}}function me(n){throw n}function te(n,e){const{onStoppedNotification:t}=E;t&&B.setTimeout(()=>t(n,e))}const de={closed:!0,next:X,error:me,complete:X},ye="function"==typeof Symbol&&Symbol.observable||"@@observable";function Me(n){return n}let re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function wn(n){return n&&n instanceof b||function K(n){return n&&F(n.next)&&F(n.error)&&F(n.complete)}(n)&&L(n)}(t)?t:new z(t,r,i);return ae(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=zt(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),null==o||o.unsubscribe()}},s,i)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ye](){return this}pipe(...t){return function Ze(n){return 0===n.length?Me:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=zt(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function zt(n){var e;return null!==(e=null!=n?n:E.Promise)&&void 0!==e?e:Promise}const ke=J(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let nt=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ot(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ke}next(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){const r=this.observers.slice();for(const i of r)i.next(t)}})}error(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?N:(s.push(t),new V(()=>H(s,t)))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new re;return t.source=this,t}}return n.create=(e,t)=>new ot(e,t),n})();class ot extends nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:N}}function mt(n){return F(null==n?void 0:n.lift)}function et(n){return e=>{if(mt(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}class It extends b{constructor(e,t,r,i,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=i?function(o){try{i(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function Wt(n,e){return et((t,r)=>{let i=0;t.subscribe(new It(r,s=>{r.next(n.call(e,s,i++))}))})}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function at(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(m,p){s.push([h,f,m,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof ct?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(m){d(s[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function dn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function $o(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const io=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Dr(n){return F(null==n?void 0:n.then)}function gr(n){return F(n[ye])}function Zr(n){return Symbol.asyncIterator&&F(null==n?void 0:n[Symbol.asyncIterator])}function Rs(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vi=function Ua(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qo(n){return F(null==n?void 0:n[vi])}function yr(n){return at(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ct(t.read());if(i)return yield ct(void 0);yield yield ct(r)}}finally{t.releaseLock()}})}function Ha(n){return F(null==n?void 0:n.getReader)}function Mr(n){if(n instanceof re)return n;if(null!=n){if(gr(n))return function Bp(n){return new re(e=>{const t=n[ye]();if(F(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(io(n))return function Up(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Dr(n))return function Md(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Q)})}(n);if(Zr(n))return so(n);if(qo(n))return function Bc(n){return new re(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ha(n))return function Jn(n){return so(yr(n))}(n)}throw Rs(n)}function so(n){return new re(e=>{(function $n(n,e){var t,r,i,s;return function _n(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=dn(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Nn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nn(n,e,t=1/0){return F(e)?nn((r,i)=>Wt((s,o)=>e(r,s,i,o))(Mr(n(r,i))),t):("number"==typeof e&&(t=e),et((r,i)=>function Br(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=p=>c<r?m(p):l.push(p),m=p=>{s&&e.next(p),c++;let g=!1;Mr(t(p,u++)).subscribe(new It(e,v=>{null==i||i(v),s?f(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){const v=l.shift();o?Nn(e,o,()=>m(v)):m(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(new It(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,n,t)))}function kn(n=1/0){return nn(Me,n)}const lr=new re(n=>n.complete());function Hp(n){return n[n.length-1]}function Uc(n){return function bD(n){return n&&F(n.schedule)}(Hp(n))?n.pop():void 0}function k0(n,e=0){return et((t,r)=>{t.subscribe(new It(r,i=>Nn(r,n,()=>r.next(i),e),()=>Nn(r,n,()=>r.complete(),e),i=>Nn(r,n,()=>r.error(i),e)))})}function B0(n,e=0){return et((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function U0(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{Nn(t,e,()=>{const r=n[Symbol.asyncIterator]();Nn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Er(n,e){return e?function RD(n,e){if(null!=n){if(gr(n))return function SD(n,e){return Mr(n).pipe(B0(e),k0(e))}(n,e);if(io(n))return function TD(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Dr(n))return function CD(n,e){return Mr(n).pipe(B0(e),k0(e))}(n,e);if(Zr(n))return U0(n,e);if(qo(n))return function DD(n,e){return new re(t=>{let r;return Nn(t,e,()=>{r=n[vi](),Nn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>F(null==r?void 0:r.return)&&r.return()})}(n,e);if(Ha(n))return function AD(n,e){return U0(yr(n),e)}(n,e)}throw Rs(n)}(n,e):Mr(n)}function Ed(n){return n<=0?()=>lr:et((e,t)=>{let r=0;e.subscribe(new It(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vp(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Ed(1)).subscribe(()=>n())}function Mn(n){for(let e in n)if(n[e]===Mn)return e;throw Error("Could not find renamed property on target object.")}function mn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(mn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Gp(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const LD=Mn({__forward_ref__:Mn});function Wp(n){return n.__forward_ref__=Wp,n.toString=function(){return mn(this())},n}function Pt(n){return function H0(n){return"function"==typeof n&&n.hasOwnProperty(LD)&&n.__forward_ref__===Wp}(n)?n():n}class un extends Error{constructor(e,t){super(function jp(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Et(n){return"string"==typeof n?n:null==n?"":String(n)}function Ur(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Et(n)}function Sd(n,e){const t=e?` in ${e}`:"";throw new un(-201,`No provider for ${Ur(n)} found${t}`)}function si(n,e){null==n&&function An(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function tn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ao(n){return{providers:n.providers||[],imports:n.imports||[]}}function $p(n){return V0(n,Cd)||V0(n,G0)}function V0(n,e){return n.hasOwnProperty(e)?n[e]:null}function z0(n){return n&&(n.hasOwnProperty(qp)||n.hasOwnProperty(HD))?n[qp]:null}const Cd=Mn({\u0275prov:Mn}),qp=Mn({\u0275inj:Mn}),G0=Mn({ngInjectableDef:Mn}),HD=Mn({ngInjectorDef:Mn});var Tt=(()=>((Tt=Tt||{})[Tt.Default=0]="Default",Tt[Tt.Host=1]="Host",Tt[Tt.Self=2]="Self",Tt[Tt.SkipSelf=4]="SkipSelf",Tt[Tt.Optional=8]="Optional",Tt))();let Xp;function lo(n){const e=Xp;return Xp=n,e}function W0(n,e,t){const r=$p(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Tt.Optional?null:void 0!==e?e:void Sd(mn(n),"Injector")}function co(n){return{toString:n}.toString()}var Ni=(()=>((Ni=Ni||{})[Ni.OnPush=0]="OnPush",Ni[Ni.Default=1]="Default",Ni))(),ls=(()=>{return(n=ls||(ls={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ls;var n})();const zD="undefined"!=typeof globalThis&&globalThis,GD="undefined"!=typeof window&&window,WD="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xn=zD||"undefined"!=typeof global&&global||GD||WD,Va={},En=[],Td=Mn({\u0275cmp:Mn}),Yp=Mn({\u0275dir:Mn}),Zp=Mn({\u0275pipe:Mn}),j0=Mn({\u0275mod:Mn}),Ps=Mn({\u0275fac:Mn}),Hc=Mn({__NG_ELEMENT_ID__:Mn});let jD=0;function ki(n){return co(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ni.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ls.Emulated,id:"c",styles:n.styles||En,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=jD++,r.inputs=Y0(n.inputs,t),r.outputs=Y0(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map($0):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(q0):null,r})}function $0(n){return Rr(n)||function uo(n){return n[Yp]||null}(n)}function q0(n){return function Yo(n){return n[Zp]||null}(n)}const X0={};function Xo(n){return co(()=>{const e={type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(X0[n.id]=n.type),e})}function Y0(n,e){if(null==n)return Va;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Ar=ki;function Rr(n){return n[Td]||null}function _i(n,e){const t=n[j0]||null;if(!t&&!0===e)throw new Error(`Type ${mn(n)} does not have '\u0275mod' property.`);return t}function cs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ui(n){return Array.isArray(n)&&!0===n[1]}function Kp(n){return 0!=(8&n.flags)}function Id(n){return 2==(2&n.flags)}function Pd(n){return 1==(1&n.flags)}function Hi(n){return null!==n.template}function JD(n){return 0!=(512&n[2])}function Ko(n,e){return n.hasOwnProperty(Ps)?n[Ps]:null}class eA{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ea(){return J0}function J0(n){return n.type.prototype.ngOnChanges&&(n.setInput=nA),tA}function tA(){const n=K0(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Va)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nA(n,e,t,r){const i=K0(n)||function rA(n,e){return n[Q0]=e}(n,{previous:Va,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new eA(l&&l.currentValue,e,o===Va),n[r]=e}ea.ngInherit=!0;const Q0="__ngSimpleChanges__";function K0(n){return n[Q0]||null}let nm;function Vn(n){return!!n.listen}const n_={createRenderer:(n,e)=>function rm(){return void 0!==nm?nm:"undefined"!=typeof document?document:void 0}()};function Qn(n){for(;Array.isArray(n);)n=n[0];return n}function bi(n,e){return Qn(e[n.index])}function im(n,e){return n.data[e]}function ai(n,e){const t=e[n];return cs(t)?t:t[0]}function r_(n){return 4==(4&n[2])}function sm(n){return 128==(128&n[2])}function ho(n,e){return null==e?null:n[e]}function i_(n){n[18]=0}function om(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const _t={lFrame:h_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function s_(){return _t.bindingsEnabled}function De(){return _t.lFrame.lView}function rn(){return _t.lFrame.tView}function cr(){let n=o_();for(;null!==n&&64===n.type;)n=n.parent;return n}function o_(){return _t.lFrame.currentTNode}function us(n,e){const t=_t.lFrame;t.currentTNode=n,t.isParent=e}function am(){return _t.lFrame.isParent}function lm(){_t.lFrame.isParent=!1}function Od(){return _t.isInCheckNoChangesMode}function Fd(n){_t.isInCheckNoChangesMode=n}function qa(){return _t.lFrame.bindingIndex++}function vA(n,e){const t=_t.lFrame;t.bindingIndex=t.bindingRootIndex=n,cm(e)}function cm(n){_t.lFrame.currentDirectiveIndex=n}function c_(){return _t.lFrame.currentQueryIndex}function dm(n){_t.lFrame.currentQueryIndex=n}function xA(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function u_(n,e,t){if(t&Tt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Tt.Host||(i=xA(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=_t.lFrame=d_();return r.currentTNode=e,r.lView=n,!0}function Nd(n){const e=d_(),t=n[1];_t.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function d_(){const n=_t.lFrame,e=null===n?null:n.child;return null===e?h_(n):e}function h_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function f_(){const n=_t.lFrame;return _t.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const p_=f_;function kd(){const n=f_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vr(){return _t.lFrame.selectedIndex}function fo(n){_t.lFrame.selectedIndex=n}function zn(){const n=_t.lFrame;return im(n.tView,n.selectedIndex)}function Bd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Ud(n,e,t){m_(n,e,3,t)}function Hd(n,e,t,r){(3&n[2])===t&&m_(n,e,t,r)}function hm(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function m_(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(AA(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function AA(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class jc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Vd(n,e,t){const r=Vn(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];pm(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function g_(n){return 3===n||4===n||6===n}function pm(n){return 64===n.charCodeAt(0)}function zd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||y_(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function y_(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function v_(n){return-1!==n}function Xa(n){return 32767&n}function Ya(n,e){let t=function OA(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let mm=!0;function Gd(n){const e=mm;return mm=n,e}let FA=0;function qc(n,e){const t=ym(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,gm(r.data,n),gm(e,null),gm(r.blueprint,null));const i=Wd(n,e),s=n.injectorIndex;if(v_(i)){const o=Xa(i),a=Ya(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function gm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ym(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Wd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function jd(n,e,t){!function NA(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hc)&&(r=t[Hc]),null==r&&(r=t[Hc]=FA++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function w_(n,e,t){if(t&Tt.Optional)return n;Sd(e,"NodeInjector")}function b_(n,e,t,r){if(t&Tt.Optional&&void 0===r&&(r=null),0==(t&(Tt.Self|Tt.Host))){const i=n[9],s=lo(void 0);try{return i?i.get(e,r,t&Tt.Optional):W0(e,r,t&Tt.Optional)}finally{lo(s)}}return w_(r,e,t)}function M_(n,e,t,r=Tt.Default,i){if(null!==n){const s=function HA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Hc)?n[Hc]:void 0;return"number"==typeof e?e>=0?255&e:BA:e}(t);if("function"==typeof s){if(!u_(e,n,r))return r&Tt.Host?w_(i,t,r):b_(e,t,r,i);try{const o=s(r);if(null!=o||r&Tt.Optional)return o;Sd(t)}finally{p_()}}else if("number"==typeof s){let o=null,a=ym(n,e),l=-1,c=r&Tt.Host?e[16][6]:null;for((-1===a||r&Tt.SkipSelf)&&(l=-1===a?Wd(n,e):e[a+8],-1!==l&&C_(r,!1)?(o=e[1],a=Xa(l),e=Ya(l,e)):a=-1);-1!==a;){const u=e[1];if(S_(s,a,u.data)){const d=UA(a,e,t,o,r,c);if(d!==E_)return d}l=e[a+8],-1!==l&&C_(r,e[1].data[a+8]===c)&&S_(s,a,e)?(o=u,a=Xa(l),e=Ya(l,e)):a=-1}}}return b_(e,t,r,i)}const E_={};function BA(){return new Za(cr(),De())}function UA(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=$d(a,o,t,null==r?Id(a)&&mm:r!=o&&0!=(3&a.type),i&Tt.Host&&s===a);return null!==u?Xc(e,o,u,a):E_}function $d(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const m=o[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(i){const f=o[l];if(f&&Hi(f)&&f.type===t)return l}return null}function Xc(n,e,t,r){let i=n[t];const s=e.data;if(function RA(n){return n instanceof jc}(i)){const o=i;o.resolving&&function OD(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new un(-200,`Circular dependency in DI detected for ${n}${t}`)}(Ur(s[t]));const a=Gd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?lo(o.injectImpl):null;u_(n,r,Tt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function DA(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=J0(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&lo(l),Gd(a),o.resolving=!1,p_()}}return i}function S_(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function C_(n,e){return!(n&Tt.Self||n&Tt.Host&&e)}class Za{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return M_(this._tNode,this._lView,e,r,t)}}function Yc(n){return function kA(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(g_(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(cr(),n)}const Qa="__parameters__";function el(n,e,t){return co(()=>{const r=function _m(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Qa)?l[Qa]:Object.defineProperty(l,Qa,{value:[]})[Qa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class on{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=tn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const GA=new on("AnalyzeForEntryComponents");function Mi(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Mi(r,e)):e!==n&&e.push(r)}return e}function ds(n,e){n.forEach(t=>Array.isArray(t)?ds(t,e):e(t))}function D_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Kc={},Mm="__NG_DI_FLAG__",Yd="ngTempTokenPath",KA=/\n/gm,L_="__source",tR=Mn({provide:String,useValue:Mn});let eu;function O_(n){const e=eu;return eu=n,e}function nR(n,e=Tt.Default){if(void 0===eu)throw new un(203,"");return null===eu?W0(n,void 0,e):eu.get(n,e&Tt.Optional?null:void 0,e)}function ft(n,e=Tt.Default){return(function VD(){return Xp}()||nR)(Pt(n),e)}function Em(n){const e=[];for(let t=0;t<n.length;t++){const r=Pt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new un(900,"");let i,s=Tt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=rR(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ft(i,s))}else e.push(ft(r))}return e}function tu(n,e){return n[Mm]=e,n.prototype[Mm]=e,n}function rR(n){return n[Mm]}const nu=tu(el("Inject",n=>({token:n})),-1),hs=tu(el("Optional"),8),nl=tu(el("SkipSelf"),4);class G_{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const SR=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,CR=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function ta(n){const e=function ou(){const n=De();return n&&n[12]}();return e?e.sanitize(Kn.URL,n)||"":function iu(n,e){const t=function wR(n){return n instanceof G_&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?function mo(n){return n instanceof G_?n.changingThisBreaksApplicationSecurity:n}(n):function Kd(n){return(n=String(n)).match(SR)||n.match(CR)?n:"unsafe:"+n}(Et(n))}const K_="__ngContext__";function Pr(n,e){n[K_]=e}function Lm(n){const e=function au(n){return n[K_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Fm(n){return n.ngOriginalError}function YR(n,...e){n.error(...e)}class sl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function XR(n){return n&&n.ngErrorLogger||YR}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Fm(e);for(;t&&Fm(t);)t=Fm(t);return t||null}}const ix=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xn))();function sx(n){return n.ownerDocument}function ps(n){return n instanceof Function?n():n}var ci=(()=>((ci=ci||{})[ci.Important=1]="Important",ci[ci.DashCase=2]="DashCase",ci))();function km(n,e){return undefined(n,e)}function lu(n){const e=n[3];return Ui(e)?e[3]:e}function Bm(n){return ux(n[13])}function Um(n){return ux(n[4])}function ux(n){for(;null!==n&&!Ui(n);)n=n[4];return n}function al(n,e,t,r,i){if(null!=r){let s,o=!1;Ui(r)?s=r:cs(r)&&(o=!0,r=r[0]);const a=Qn(r);0===n&&null!==t?null==i?gx(e,t,a):na(e,t,a,i||null,!0):1===n&&null!==t?na(e,t,a,i||null,!0):2===n?function Mx(n,e,t){const r=th(n,e);r&&function yI(n,e,t,r){Vn(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function xI(n,e,t,r,i){const s=t[7];s!==Qn(t)&&al(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];cu(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function Vm(n,e,t){return Vn(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function hx(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,om(i,-1)),t.splice(r,1)}function zm(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&hx(i,r),e>0&&(n[t-1][4]=r[4]);const s=qd(n,10+e);!function cI(n,e){cu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function fx(n,e){if(!(256&e[2])){const t=e[11];Vn(t)&&t.destroyNode&&cu(n,e,t,3,null,null),function hI(n){let e=n[13];if(!e)return Gm(n[1],n);for(;e;){let t=null;if(cs(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)cs(e)&&Gm(e[1],e),e=e[3];null===e&&(e=n),cs(e)&&Gm(e[1],e),t=e&&e[4]}e=t}}(e)}}function Gm(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function gI(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof jc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function mI(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Qn(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&Vn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Ui(e[3])){t!==e[3]&&hx(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function px(n,e,t){return function mx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===ls.None||i===ls.Emulated)return null}return bi(r,t)}(n,e.parent,t)}function na(n,e,t,r,i){Vn(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function gx(n,e,t){Vn(n)?n.appendChild(e,t):e.appendChild(t)}function yx(n,e,t,r,i){null!==r?na(n,e,t,r,i):gx(n,e,t)}function th(n,e){return Vn(n)?n.parentNode(e):e.parentNode}let xx=function _x(n,e,t){return 40&n.type?bi(n,t):null};function nh(n,e,t,r){const i=px(n,r,e),s=e[11],a=function vx(n,e,t){return xx(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)yx(s,i,t[l],a,!1);else yx(s,i,t,a,!1)}function rh(n,e){if(null!==e){const t=e.type;if(3&t)return bi(e,n);if(4&t)return jm(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return rh(n,r);{const i=n[e.index];return Ui(i)?jm(-1,i):Qn(i)}}if(32&t)return km(e,n)()||Qn(n[e.index]);{const r=bx(n,e);return null!==r?Array.isArray(r)?r[0]:rh(lu(n[16]),r):rh(n,e.next)}}return null}function bx(n,e){return null!==e?n[16][6].projection[e.projection]:null}function jm(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return rh(r,i)}return e[7]}function $m(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Pr(Qn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)$m(n,e,t.child,r,i,s,!1),al(e,n,i,a,s);else if(32&l){const c=km(t,r);let u;for(;u=c();)al(e,n,i,u,s);al(e,n,i,a,s)}else 16&l?Ex(n,e,r,t,i,s):al(e,n,i,a,s);t=o?t.projectionNext:t.next}}function cu(n,e,t,r,i,s){$m(t,r,n.firstChild,e,i,s,!1)}function Ex(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)al(e,n,i,l[c],s);else $m(n,e,l,o[3],i,s,!0)}function Sx(n,e,t){Vn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function qm(n,e,t){Vn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Cx(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Tx="ng-template";function bI(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Cx(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Dx(n){return 4===n.type&&n.value!==Tx}function MI(n,e,t){return e===(4!==n.type||t?n.value:Tx)}function EI(n,e,t){let r=4;const i=n.attrs||[],s=function TI(n){for(let e=0;e<n.length;e++)if(g_(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!MI(n,l,t)||""===l&&1===e.length){if(Vi(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!bI(n.attrs,c,t)){if(Vi(r))return!1;o=!0}continue}const d=SI(8&r?"class":l,i,Dx(n),t);if(-1===d){if(Vi(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Cx(f,c,0)||2&r&&c!==h){if(Vi(r))return!1;o=!0}}}}else{if(!o&&!Vi(r)&&!Vi(l))return!1;if(o&&Vi(l))continue;o=!1,r=l|1&r}}return Vi(r)||o}function Vi(n){return 0==(1&n)}function SI(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function DI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Ax(n,e,t=!1){for(let r=0;r<e.length;r++)if(EI(n,e[r],t))return!0;return!1}function Rx(n,e){return n?":not("+e.trim()+")":e}function RI(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Vi(o)&&(e+=Rx(s,i),i=""),r=o,s=s||!Vi(r);t++}return""!==i&&(e+=Rx(s,i)),e}const St={};function Kr(n){Ix(rn(),De(),Vr()+n,Od())}function Ix(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ud(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Hd(e,s,0,t)}fo(t)}function zx(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];dm(i),o.contentQueries(2,e[s],s)}}}function uu(n,e,t,r,i,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,i_(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function ll(n,e,t,r,i){let s=n.data[e];if(null===s)s=function sg(n,e,t,r,i){const s=o_(),o=am(),l=n.data[e]=function XI(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function yA(){return _t.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Wc(){const n=_t.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return us(s,!0),s}function cl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function du(n,e,t){Nd(e);try{const r=n.viewQuery;null!==r&&pg(1,r,t);const i=n.template;null!==i&&Gx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zx(n,e),n.staticViewQueries&&pg(2,n.viewQuery,t);const s=n.components;null!==s&&function jI(n,e){for(let t=0;t<e.length;t++)hP(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,kd()}}function ul(n,e,t,r){const i=e[2];if(256==(256&i))return;Nd(e);const s=Od();try{i_(e),function a_(n){return _t.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Gx(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Ud(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Hd(e,c,0,null),hm(e,0)}if(function uP(n){for(let e=Bm(n);null!==e;e=Um(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&om(s,1),i[2]|=1024}}}(e),function cP(n){for(let e=Bm(n);null!==e;e=Um(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];sm(r)&&ul(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&zx(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Ud(e,c)}else{const c=n.contentHooks;null!==c&&Hd(e,c,1),hm(e,1)}!function GI(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)fo(~i);else{const s=i,o=t[++r],a=t[++r];vA(o,s),a(2,e[s])}}}finally{fo(-1)}}(n,e);const a=n.components;null!==a&&function WI(n,e){for(let t=0;t<e.length;t++)dP(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&pg(2,l,r),!s)if(o){const c=n.viewCheckHooks;null!==c&&Ud(e,c)}else{const c=n.viewHooks;null!==c&&Hd(e,c,2),hm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,om(e[3],-1))}finally{kd()}}function $I(n,e,t,r){const i=e[10],s=!Od(),o=r_(e);try{s&&!o&&i.begin&&i.begin(),o&&du(n,e,r),ul(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function Gx(n,e,t,r,i){const s=Vr(),o=2&r;try{fo(-1),o&&e.length>20&&Ix(n,e,20,Od()),t(r,i)}finally{fo(s)}}function Wx(n,e,t){if(Kp(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function og(n,e,t){!s_()||(function tP(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||qc(t,e),Pr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Hi(l);c&&oP(e,t,l);const u=Xc(e,n,a,t);Pr(u,e),null!==o&&aP(0,a-i,u,l,0,o),c&&(ai(t.index,e)[8]=u)}}(n,e,t,bi(t,e)),128==(128&t.flags)&&function nP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function _A(){return _t.lFrame.currentDirectiveIndex}();try{fo(o);for(let l=r;l<i;l++){const c=n.data[l],u=e[l];cm(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Qx(c,u)}}finally{fo(-1),cm(a)}}(n,e,t))}function ag(n,e,t=bi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function jx(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ah(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function ah(n,e,t,r,i,s,o,a,l,c){const u=20+r,d=u+i,h=function qI(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:St);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Xx(n,e,t,r){const i=iw(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&sw(n).push(r,i.length-1))}function Yx(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function ui(n,e,t,r,i,s,o,a){const l=bi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(lw(n,t,u,r,i),Id(e)&&function JI(n,e){const t=ai(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function ZI(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,Vn(s)?s.setProperty(l,r,i):pm(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function lg(n,e,t,r){let i=!1;if(s_()){const s=function rP(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Ax(t,o.selectors,!1)&&(i||(i=[]),jd(qc(t,e),n,o.type),Hi(o)?(Kx(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,ew(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=cl(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=zd(t.mergedAttrs,d.hostAttrs),tw(n,t,e,c,d),sP(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function YI(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===s||Dx(e)?null:lP(d,s);o.push(h),a=Yx(d,c,a),l=Yx(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function iP(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new un(-301,`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=zd(t.mergedAttrs,t.attrs),i}function Jx(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function eP(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Qx(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Kx(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function sP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Hi(e)&&(t[""]=n)}}function ew(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tw(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ko(i.type)),o=new jc(s,Hi(i),null);n.blueprint[r]=o,t[r]=o,Jx(n,e,0,r,cl(n,t,i.hostVars,St),i)}function oP(n,e,t){const r=bi(e,n),i=jx(t),s=n[10],o=lh(n,uu(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function ms(n,e,t,r,i,s){const o=bi(n,e);!function cg(n,e,t,r,i,s,o){if(null==s)Vn(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?Et(s):o(s,r||"",i);Vn(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function aP(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function lP(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function nw(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function dP(n,e){const t=ai(e,n);if(sm(t)){const r=t[1];80&t[2]?ul(r,t,r.template,t[8]):t[5]>0&&ug(t)}}function ug(n){for(let r=Bm(n);null!==r;r=Um(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];ul(o,s,o.template,s[8])}else s[5]>0&&ug(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=ai(t[r],n);sm(i)&&i[5]>0&&ug(i)}}function hP(n,e){const t=ai(e,n),r=t[1];(function fP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),du(r,t,t[8])}function lh(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function dg(n){for(;n;){n[2]|=64;const e=lu(n);if(JD(n)&&!e)return n;n=e}return null}function fg(n,e,t){const r=e[10];r.begin&&r.begin();try{ul(n,e,n.template,t)}catch(i){throw aw(e,i),i}finally{r.end&&r.end()}}function rw(n){!function hg(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Lm(t),i=r[1];$I(i,r,i.template,t)}}(n[8])}function pg(n,e,t){dm(0),e(n,t)}const yP=(()=>Promise.resolve(null))();function iw(n){return n[7]||(n[7]=[])}function sw(n){return n.cleanup||(n.cleanup=[])}function aw(n,e){const t=n[9],r=t?t.get(sl,null):null;r&&r.handleError(e)}function lw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Ns(n,e,t){const r=function Ld(n,e){return Qn(e[n])}(e,n);!function dx(n,e,t){Vn(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function ch(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Gp(i,a):2==s&&(r=Gp(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const mg=new on("INJECTOR",-1);class cw{get(e,t=Kc){if(t===Kc){const r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return t}}const gg=new on("Set Injector scope."),hu={},xP={};let yg;function uw(){return void 0===yg&&(yg=new cw),yg}function dw(n,e=null,t=null,r){const i=hw(n,e,t,r);return i._resolveInjectorDefTypes(),i}function hw(n,e=null,t=null,r){return new wP(n,t,e||uw(),r)}class wP{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ds(t,a=>this.processProvider(a,e,t)),ds([e],a=>this.processInjectorType(a,[],s)),this.records.set(mg,dl(void 0,this));const o=this.records.get(gg);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:mn(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Kc,r=Tt.Default){this.assertNotDestroyed();const i=O_(this),s=lo(void 0);try{if(!(r&Tt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function AP(n){return"function"==typeof n||"object"==typeof n&&n instanceof on}(e)&&$p(e);a=l&&this.injectableDefInScope(l)?dl(vg(e),hu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Tt.Self?uw():this.parent).get(e,t=r&Tt.Optional&&t===Kc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Yd]=o[Yd]||[]).unshift(mn(e)),i)throw o;return function iR(n,e,t,r){const i=n[Yd];throw e[L_]&&i.unshift(e[L_]),n.message=function sR(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):mn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(KA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Yd]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{lo(s),O_(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(mn(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,"")}processInjectorType(e,t,r){if(!(e=Pt(e)))return!1;let i=z0(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=z0(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{ds(i.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];ds(f,m=>this.processProvider(m,h,f||En))}}this.injectorDefTypes.add(o);const l=Ko(o)||(()=>new o);this.records.set(o,dl(l,hu));const c=i.providers;if(null!=c&&!a){const u=e;ds(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=hl(e=Pt(e))?e:Pt(e&&e.provide);const s=function MP(n,e,t){return pw(n)?dl(void 0,n.useValue):dl(function fw(n,e,t){let r;if(hl(n)){const i=Pt(n);return Ko(i)||vg(i)}if(pw(n))r=()=>Pt(n.useValue);else if(function SP(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Em(n.deps||[]));else if(function EP(n){return!(!n||!n.useExisting)}(n))r=()=>ft(Pt(n.useExisting));else{const i=Pt(n&&(n.useClass||n.provide));if(!function TP(n){return!!n.deps}(n))return Ko(i)||vg(i);r=()=>new i(...Em(n.deps))}return r}(n),hu)}(e);if(hl(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=dl(void 0,hu,!0),o.factory=()=>Em(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===hu&&(t.value=xP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function DP(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Pt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function vg(n){const e=$p(n),t=null!==e?e.factory:Ko(n);if(null!==t)return t;if(n instanceof on)throw new un(204,"");if(n instanceof Function)return function bP(n){const e=n.length;if(e>0)throw function Qc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new un(204,"");const t=function BD(n){const e=n&&(n[Cd]||n[G0]);if(e){const t=function UD(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new un(204,"")}function dl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pw(n){return null!==n&&"object"==typeof n&&tR in n}function hl(n){return"function"==typeof n}let Gr=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return dw({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return dw({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Kc,n.NULL=new cw,n.\u0275prov=tn({token:n,providedIn:"any",factory:()=>ft(mg)}),n.__NG_ELEMENT_ID__=-1,n})();function kP(n,e){Bd(Lm(n)[1],cr())}let uh=null;function fl(){if(!uh){const n=xn.Symbol;if(n&&n.iterator)uh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(uh=r)}}}return uh}function fu(n){return!!bg(n)&&(Array.isArray(n)||!(n instanceof Map)&&fl()in n)}function bg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Lr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Mg(n,e,t,r){const i=De();return Lr(i,qa(),e)&&(rn(),ms(zn(),i,n,e,t,r)),Mg}function ml(n,e,t,r){return Lr(n,qa(),t)?e+Et(t)+r:St}function vo(n,e,t,r,i,s,o,a){const l=De(),c=rn(),u=n+20,d=c.firstCreatePass?function XP(n,e,t,r,i,s,o,a,l){const c=e.consts,u=ll(e,n,4,o||null,ho(c,a));lg(e,t,u,ho(c,l)),Bd(e,u);const d=u.tViews=ah(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];us(d,!1);const h=l[11].createComment("");nh(c,l,h,d),Pr(h,l),lh(l,l[u]=nw(h,l,h,d)),Pd(d)&&og(c,l,d),null!=o&&ag(l,d,a)}function lt(n,e=Tt.Default){const t=De();return null===t?ft(n,e):M_(cr(),t,Pt(n),e)}function Dg(){throw new Error("invalid")}function ks(n,e,t){const r=De();return Lr(r,qa(),e)&&ui(rn(),zn(),r,n,e,r[11],t,!1),ks}function Ag(n,e,t,r,i){const o=i?"class":"style";lw(n,t,e.inputs[o],o,r)}function Dt(n,e,t,r){const i=De(),s=rn(),o=20+n,a=i[11],l=i[o]=Vm(a,e,function TA(){return _t.lFrame.currentNamespace}()),c=s.firstCreatePass?function mL(n,e,t,r,i,s,o){const a=e.consts,c=ll(e,n,2,i,ho(a,s));return lg(e,t,c,ho(a,o)),null!==c.attrs&&ch(c,c.attrs,!1),null!==c.mergedAttrs&&ch(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];us(c,!0);const u=c.mergedAttrs;null!==u&&Vd(a,l,u);const d=c.classes;null!==d&&qm(a,l,d);const h=c.styles;null!==h&&Sx(a,l,h),64!=(64&c.flags)&&nh(s,i,l,c),0===function uA(){return _t.lFrame.elementDepthCount}()&&Pr(l,i),function dA(){_t.lFrame.elementDepthCount++}(),Pd(c)&&(og(s,i,c),Wx(s,c,i)),null!==r&&ag(i,c)}function At(){let n=cr();am()?lm():(n=n.parent,us(n,!1));const e=n;!function hA(){_t.lFrame.elementDepthCount--}();const t=rn();t.firstCreatePass&&(Bd(t,n),Kp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function PA(n){return 0!=(16&n.flags)}(e)&&Ag(t,e,De(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function LA(n){return 0!=(32&n.flags)}(e)&&Ag(t,e,De(),e.stylesWithoutHost,!1)}function Wr(n,e,t,r){Dt(n,e,t,r),At()}function _o(n,e,t){const r=De(),i=rn(),s=n+20,o=i.firstCreatePass?function gL(n,e,t,r,i){const s=e.consts,o=ho(s,r),a=ll(e,n,8,"ng-container",o);return null!==o&&ch(a,o,!0),lg(e,t,a,ho(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];us(o,!0);const a=r[s]=r[11].createComment("");nh(i,r,a,o),Pr(a,r),Pd(o)&&(og(i,r,o),Wx(i,o,r)),null!=t&&ag(r,o)}function xo(){let n=cr();const e=rn();am()?lm():(n=n.parent,us(n,!1)),e.firstCreatePass&&(Bd(e,n),Kp(n)&&e.queries.elementEnd(n))}function fh(n){return!!n&&"function"==typeof n.then}const Yw=function Xw(n){return!!n&&"function"==typeof n.subscribe};function mu(n,e,t,r){const i=De(),s=rn(),o=cr();return function Jw(n,e,t,r,i,s,o,a){const l=Pd(r),u=n.firstCreatePass&&sw(n),d=e[8],h=iw(e);let f=!0;if(3&r.type||a){const g=bi(r,e),v=a?a(g):g,y=h.length,x=a?_=>a(Qn(_[r.index])):r.index;if(Vn(t)){let _=null;if(!a&&l&&(_=function _L(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,f=!1;else{s=Rg(r,e,d,s,!1);const w=t.listen(v,i,s);h.push(s,w),u&&u.push(i,x,y,y+1)}}else s=Rg(r,e,d,s,!0),v.addEventListener(i,s,o),h.push(s),u&&u.push(i,x,y,o)}else s=Rg(r,e,d,s,!1);const m=r.outputs;let p;if(f&&null!==m&&(p=m[i])){const g=p.length;if(g)for(let v=0;v<g;v+=2){const P=e[p[v]][p[v+1]].subscribe(s),U=h.length;h.push(s,P),u&&u.push(i,r.index,U,-(U+1))}}}(s,i,i[11],o,n,e,!!t,r),mu}function Qw(n,e,t,r){try{return!1!==t(r)}catch(i){return aw(n,i),!1}}function Rg(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?ai(n.index,e):e;0==(32&e[2])&&dg(a);let l=Qw(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=Qw(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function El(n=1){return function wA(n){return(_t.lFrame.contextLView=function bA(n,e){for(;n>0;)e=e[15],n--;return e}(n,_t.lFrame.contextLView))[8]}(n)}function Sl(n,e,t){return Ig(n,"",e,"",t),Sl}function Ig(n,e,t,r,i){const s=De(),o=ml(s,e,t,r);return o!==St&&ui(rn(),zn(),s,n,o,s[11],i,!1),Ig}function er(n,e=""){const t=De(),r=rn(),i=n+20,s=r.firstCreatePass?ll(r,i,1,e,null):r.data[i],o=t[i]=function Hm(n,e){return Vn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);nh(r,t,o,s),us(s,!1)}function mh(n){return gh("",n,""),mh}function gh(n,e,t){const r=De(),i=ml(r,n,e,t);return i!==St&&Ns(r,Vr(),i),gh}const ia=void 0;var o2=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function s2(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Tl={};function zb(n){return n in Tl||(Tl[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),Tl[n]}var $e=(()=>(($e=$e||{})[$e.LocaleId=0]="LocaleId",$e[$e.DayPeriodsFormat=1]="DayPeriodsFormat",$e[$e.DayPeriodsStandalone=2]="DayPeriodsStandalone",$e[$e.DaysFormat=3]="DaysFormat",$e[$e.DaysStandalone=4]="DaysStandalone",$e[$e.MonthsFormat=5]="MonthsFormat",$e[$e.MonthsStandalone=6]="MonthsStandalone",$e[$e.Eras=7]="Eras",$e[$e.FirstDayOfWeek=8]="FirstDayOfWeek",$e[$e.WeekendRange=9]="WeekendRange",$e[$e.DateFormat=10]="DateFormat",$e[$e.TimeFormat=11]="TimeFormat",$e[$e.DateTimeFormat=12]="DateTimeFormat",$e[$e.NumberSymbols=13]="NumberSymbols",$e[$e.NumberFormats=14]="NumberFormats",$e[$e.CurrencyCode=15]="CurrencyCode",$e[$e.CurrencySymbol=16]="CurrencySymbol",$e[$e.CurrencyName=17]="CurrencyName",$e[$e.Currencies=18]="Currencies",$e[$e.Directionality=19]="Directionality",$e[$e.PluralCase=20]="PluralCase",$e[$e.ExtraData=21]="ExtraData",$e))();const yh="en-US";let Gb=yh;class pM{}class cO{resolveComponentFactory(e){throw function lO(n){const e=Error(`No component factory found for ${mn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Al=(()=>{class n{}return n.NULL=new cO,n})();function uO(){return Rl(cr(),De())}function Rl(n,e){return new wo(bi(n,e))}let wo=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=uO,n})();function dO(n){return n instanceof wo?n.nativeElement:n}class gM{}let bh=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fO(){const n=De(),t=ai(cr().index,n);return function hO(n){return n[11]}(cs(t)?t:n)}(),n})(),pO=(()=>{class n{}return n.\u0275prov=tn({token:n,providedIn:"root",factory:()=>null}),n})();class Mh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const mO=new Mh("13.1.3"),Ug={};function Eh(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Qn(s)),Ui(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Eh(l[1],l,c,r)}const o=t.type;if(8&o)Eh(n,e,t.child,r);else if(32&o){const a=km(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=bx(e,t);if(Array.isArray(a))r.push(...a);else{const l=lu(e[16]);Eh(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class wu{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Eh(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ui(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(zm(e,r),qd(t,r))}this._attachedToViewContainer=!1}fx(this._lView[1],this._lView)}onDestroy(e){Xx(this._lView[1],this._lView,null,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mP(n,e,t){Fd(!0);try{fg(n,e,t)}finally{Fd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new un(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dI(n,e){cu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new un(902,"");this._appRef=e}}class gO extends wu{constructor(e){super(e),this._view=e}detectChanges(){rw(this._view)}checkNoChanges(){!function gP(n){Fd(!0);try{rw(n)}finally{Fd(!1)}}(this._view)}get context(){return null}}class yM extends Al{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Rr(e);return new Hg(t,this.ngModule)}}function vM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const vO=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ix});class Hg extends pM{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function II(n){return n.map(RI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return vM(this.componentDef.inputs)}get outputs(){return vM(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function _O(n,e){return{get:(t,r,i)=>{const s=n.get(t,Ug,i);return s!==Ug||r===Ug?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(gM,n_),a=s.get(pO,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=r?function qx(n,e,t){if(Vn(n))return n.selectRootElement(e,t===ls.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Vm(o.createRenderer(null,this.componentDef),c,function yO(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function Sw(n,e){return{components:[],scheduler:n||ix,clean:yP,playerHandler:e||null,flags:0}}(),f=ah(0,null,null,1,0,null,null,null,null,null),m=uu(null,f,h,d,null,null,o,l,a,s);let p,g;Nd(m);try{const v=function Mw(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=ll(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(ch(l,c,!0),null!==n&&(Vd(i,n,c),null!==l.classes&&qm(i,n,l.classes),null!==l.styles&&Sx(i,n,l.styles)));const u=r.createRenderer(n,e),d=uu(t,jx(e),null,e.onPush?64:16,t[20],l,r,u,s||null,null);return o.firstCreatePass&&(jd(qc(l,t),o,e.type),Kx(o,l),ew(l,t.length,1)),lh(t,d),t[20]=d}(u,this.componentDef,m,o,l);if(u)if(r)Vd(l,u,["ng-version",mO.full]);else{const{attrs:y,classes:x}=function PI(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Vi(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Vd(l,u,y),x&&x.length>0&&qm(l,u,x.join(" "))}if(g=im(f,20),void 0!==t){const y=g.projection=[];for(let x=0;x<this.ngContentSelectors.length;x++){const _=t[x];y.push(null!=_?Array.from(_):null)}}p=function Ew(n,e,t,r,i){const s=t[1],o=function KI(n,e,t){const r=cr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),tw(n,r,e,cl(n,e,1,null),t));const i=Xc(e,n,r.directiveStart,r);Pr(i,e);const s=bi(r,e);return s&&Pr(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=cr();e.contentQueries(1,o,l.directiveStart)}const a=cr();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fo(a.index),Jx(t[1],a,0,a.directiveStart,a.directiveEnd,e),Qx(e,o)),o}(v,this.componentDef,m,h,[kP]),du(f,m,null)}finally{kd()}return new wO(this.componentType,p,Rl(g,m),m,g)}}class wO extends class aO{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new gO(i),this.componentType=e}get injector(){return new Za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Bs{}class _M{}const Il=new Map;class bM extends Bs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yM(this);const r=_i(e);this._bootstrapComponents=ps(r.bootstrap),this._r3Injector=hw(e,t,[{provide:Bs,useValue:this},{provide:Al,useValue:this.componentFactoryResolver}],mn(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Gr.THROW_IF_NOT_FOUND,r=Tt.Default){return e===Gr||e===Bs||e===mg?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Vg extends _M{constructor(e){super(),this.moduleType=e,null!==_i(e)&&function MO(n){const e=new Set;!function t(r){const i=_i(r,!0),s=i.id;null!==s&&(function xM(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${mn(e)} vs ${mn(e.name)}`)}(s,Il.get(s),r),Il.set(s,r));const o=ps(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new bM(this.moduleType,e)}}function zg(n){return e=>{setTimeout(n,void 0,e)}}const $r=class VO extends nt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=zg(l),a&&(a=zg(a)),c&&(c=zg(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof V&&e.add(u),u}};function zO(){return this._results[fl()]()}class Gg{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=fl(),r=Gg.prototype;r[t]||(r[t]=zO)}get changes(){return this._changes||(this._changes=new $r)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Mi(e);(this._changesDetected=!function WA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Us=(()=>{class n{}return n.__NG_ELEMENT_ID__=jO,n})();const GO=Us,WO=class extends GO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=uu(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),du(t,r,e),new wu(r)}};function jO(){return Sh(cr(),De())}function Sh(n,e){return 4&n.type?new WO(e,n,Rl(n,e)):null}let $i=(()=>{class n{}return n.__NG_ELEMENT_ID__=$O,n})();function $O(){return RM(cr(),De())}const qO=$i,DM=class extends qO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Rl(this._hostTNode,this._hostLView)}get injector(){return new Za(this._hostTNode,this._hostLView)}get parentInjector(){const e=Wd(this._hostTNode,this._hostLView);if(v_(e)){const t=Ya(e,this._hostLView),r=Xa(e);return new Za(t[1].data[r+8],t)}return new Za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=AM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function Jc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Hg(Rr(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule&&c){const d=c.get(Bs,null);d&&(s=d)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function cA(n){return Ui(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new DM(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function fI(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],D_(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function pI(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=jm(s,o),l=r[11],c=th(l,o[7]);return null!==c&&function uI(n,e,t,r,i,s){r[0]=i,r[6]=e,cu(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),D_(Wg(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=AM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=zm(this._lContainer,t);r&&(qd(Wg(this._lContainer),t),fx(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=zm(this._lContainer,t);return r&&null!=qd(Wg(this._lContainer),t)?new wu(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function AM(n){return n[8]}function Wg(n){return n[8]||(n[8]=[])}function RM(n,e){let t;const r=e[n.index];if(Ui(r))t=r;else{let i;if(8&n.type)i=Qn(r);else{const s=e[11];i=s.createComment("");const o=bi(n,e);na(s,th(s,o),i,function vI(n,e){return Vn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=nw(r,e,i,n),lh(e,t)}return new DM(t,n,e)}class jg{constructor(e){this.queryList=e,this.matches=null}clone(){return new jg(this.queryList)}setDirty(){this.queryList.setDirty()}}class $g{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new $g(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==FM(e,t).matches&&this.queries[t].setDirty()}}class IM{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class qg{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new qg(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Xg{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Xg(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,ZO(t,s)),this.matchTNodeWithReadOption(e,t,$d(t,e,s,!1,!1))}else r===Us?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,$d(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===wo||i===$i||i===Us&&4&t.type)this.addMatch(t.index,-2);else{const s=$d(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ZO(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function QO(n,e,t,r){return-1===t?function JO(n,e){return 11&n.type?Rl(n,e):4&n.type?Sh(n,e):null}(e,n):-2===t?function KO(n,e,t){return t===wo?Rl(e,n):t===Us?Sh(e,n):t===$i?RM(e,n):void 0}(n,e,r):Xc(n,n[1],t,e)}function PM(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:QO(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function Yg(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=PM(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Yg(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Yg(f[1],f,c,r)}}}}}return r}function Pl(n){const e=De(),t=rn(),r=c_();dm(r+1);const i=FM(t,r);if(n.dirty&&r_(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Yg(t,e,r,[]):PM(t,e,i,r);n.reset(s,dO),n.notifyOnChanges()}return!0}return!1}function Ch(n,e,t){const r=rn();r.firstCreatePass&&(OM(r,new IM(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),LM(r,De(),e)}function Zg(n,e,t,r){const i=rn();if(i.firstCreatePass){const s=cr();OM(i,new IM(e,t,r),s.index),function tF(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}LM(i,De(),t)}function Ll(){return function eF(n,e){return n[19].queries[e].queryList}(De(),c_())}function LM(n,e,t){const r=new Gg(4==(4&t));Xx(n,e,r,r.destroy),null===e[19]&&(e[19]=new $g),e[19].queries.push(new jg(r))}function OM(n,e,t){null===n.queries&&(n.queries=new qg),n.queries.track(new Xg(e,t))}function FM(n,e){return n.queries.getByIndex(e)}function NM(n,e){return Sh(n,e)}function Ah(...n){}const Rh=new on("Application Initializer");let Fl=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ah,this.reject=Ah,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(fh(s))t.push(s);else if(Yw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ft(Rh,8))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const Su=new on("AppId"),_F={provide:Su,useFactory:function vF(){return`${ny()}${ny()}${ny()}`},deps:[]};function ny(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const KM=new on("Platform Initializer"),ry=new on("Platform ID"),eE=new on("appBootstrapListener");let tE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const bo=new on("LocaleId"),nE=new on("DefaultCurrencyCode");class xF{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Ih=(()=>{class n{compileModuleSync(t){return new Vg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=ps(_i(t).declarations).reduce((o,a)=>{const l=Rr(a);return l&&o.push(new Hg(l)),o},[]);return new xF(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const bF=(()=>Promise.resolve(0))();function iy(n){"undefined"==typeof Zone?bF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class hr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $r(!1),this.onMicrotaskEmpty=new $r(!1),this.onStable=new $r(!1),this.onError=new $r(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function MF(){let n=xn.requestAnimationFrame,e=xn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function CF(n){const e=()=>{!function SF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,oy(n),n.isCheckStableRunning=!0,sy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),oy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return rE(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),iE(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return rE(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iE(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,oy(n),sy(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,EF,Ah,Ah);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const EF={};function sy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function rE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iE(n){n._nesting--,sy(n)}class TF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $r,this.onMicrotaskEmpty=new $r,this.onStable=new $r,this.onError=new $r}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let ay=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hr.assertNotInAngularZone(),iy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iy(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(ft(hr))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),sE=(()=>{class n{constructor(){this._applications=new Map,ly.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ly.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();class DF{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let qi,ly=new DF;const oE=new on("AllowMultipleToken");class aE{constructor(e,t){this.name=e,this.token=t}}function lE(n,e,t=[]){const r=`Platform: ${e}`,i=new on(r);return(s=[])=>{let o=cE();if(!o||o.injector.get(oE,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:gg,useValue:"platform"});!function PF(n){if(qi&&!qi.destroyed&&!qi.injector.get(oE,!1))throw new un(400,"");qi=n.get(uE);const e=n.get(KM,null);e&&e.forEach(t=>t())}(Gr.create({providers:a,name:r}))}return function LF(n){const e=cE();if(!e)throw new un(401,"");return e}()}}function cE(){return qi&&!qi.destroyed?qi:null}let uE=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function OF(n,e){let t;return t="noop"===n?new TF:("zone.js"===n?void 0:n)||new hr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:hr,useValue:a}];return a.run(()=>{const c=Gr.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(sl,null);if(!d)throw new un(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{cy(this._modules,u),h.unsubscribe()})}),function FF(n,e,t){try{const r=t();return fh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(Fl);return h.runInitializers(),h.donePromise.then(()=>(function d2(n){si(n,"Expected localeId to be defined"),"string"==typeof n&&(Gb=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(bo,yh)||yh),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=dE({},r);return function RF(n,e,t){const r=new Vg(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Cu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new un(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ft(Gr))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();function dE(n,e){return Array.isArray(e)?e.reduce(dE,n):Object.assign(Object.assign({},n),e)}let Cu=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new re(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new re(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{hr.assertNotInAngularZone(),iy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{hr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=function ID(...n){const e=Uc(n),t=function ED(n,e){return"number"==typeof Hp(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Mr(r[0]):kn(t)(Er(r,e)):lr}(a,l.pipe(function PD(n={}){const{connector:e=(()=>new nt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,u=d=!1},m=()=>{const p=o;f(),null==p||p.unsubscribe()};return et((p,g)=>{c++,!d&&!u&&h();const v=l=null!=l?l:e();g.add(()=>{c--,0===c&&!d&&!u&&(a=Vp(m,i))}),v.subscribe(g),o||(o=new z({next:y=>v.next(y),error:y=>{d=!0,h(),a=Vp(f,t,y),v.error(y)},complete:()=>{u=!0,h(),a=Vp(f,r),v.complete()}}),Er(p).subscribe(o))})(s)}}()))}bootstrap(t,r){if(!this._initStatus.done)throw new un(405,"");let i;i=t instanceof pM?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function IF(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Bs),a=i.create(Gr.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(ay,null),u=c&&a.injector.get(sE);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),cy(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new un(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;cy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eE,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ft(hr),ft(Gr),ft(sl),ft(Al),ft(Fl))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();function cy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let fE=!0,uy=(()=>{class n{}return n.__NG_ELEMENT_ID__=BF,n})();function BF(n){return function UF(n,e,t){if(Id(n)&&!t){const r=ai(n.index,e);return new wu(r,r)}return 47&n.type?new wu(e[16],e):null}(cr(),De(),16==(16&n))}class xE{constructor(){}supports(e){return fu(e)}create(e){return new jF(e)}}const WF=(n,e)=>e;class jF{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||WF}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<bE(r,i,s)?t:r,a=bE(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!fu(e))throw new un(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function qP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[fl()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new $F(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new wE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class $F{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qF{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class wE{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new qF,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bE(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class ME{constructor(){}supports(e){return e instanceof Map||bg(e)}create(){return new XF}}class XF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||bg(e)))throw new un(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new YF(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class YF{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function EE(){return new Tu([new xE])}let Tu=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||EE()),deps:[[n,new nl,new hs]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new un(901,"")}}return n.\u0275prov=tn({token:n,providedIn:"root",factory:EE}),n})();function SE(){return new Nl([new ME])}let Nl=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||SE()),deps:[[n,new nl,new hs]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new un(901,"")}}return n.\u0275prov=tn({token:n,providedIn:"root",factory:SE}),n})();const ZF=[new ME],QF=new Tu([new xE]),KF=new Nl(ZF),e3=lE(null,"core",[{provide:ry,useValue:"unknown"},{provide:uE,deps:[Gr]},{provide:sE,deps:[]},{provide:tE,deps:[]}]),s3=[{provide:Cu,useClass:Cu,deps:[hr,Gr,sl,Al,Fl]},{provide:vO,deps:[hr],useFactory:function o3(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Fl,useClass:Fl,deps:[[new hs,Rh]]},{provide:Ih,useClass:Ih,deps:[]},_F,{provide:Tu,useFactory:function t3(){return QF},deps:[]},{provide:Nl,useFactory:function n3(){return KF},deps:[]},{provide:bo,useFactory:function r3(n){return n||function i3(){return"undefined"!=typeof $localize&&$localize.locale||yh}()},deps:[[new nu(bo),new hs,new nl]]},{provide:nE,useValue:"USD"}];let a3=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ft(Cu))},n.\u0275mod=Xo({type:n}),n.\u0275inj=ao({providers:s3}),n})(),Lh=null;function Mo(){return Lh}const ei=new on("DocumentToken");let oa=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:function(){return function d3(){return ft(CE)}()},providedIn:"platform"}),n})();const h3=new on("Location Initialized");let CE=(()=>{class n extends oa{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mo().getBaseHref(this._doc)}onPopState(t){const r=Mo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Mo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){TE()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){TE()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ft(ei))},n.\u0275prov=tn({token:n,factory:function(){return function f3(){return new CE(ft(ei))}()},providedIn:"platform"}),n})();function TE(){return!!window.history.pushState}function my(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function DE(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Hs(n){return n&&"?"!==n[0]?"?"+n:n}let kl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:function(){return function p3(n){const e=ft(ei).location;return new AE(ft(oa),e&&e.origin||"")}()},providedIn:"root"}),n})();const gy=new on("appBaseHref");let AE=(()=>{class n extends kl{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return my(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Hs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Hs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Hs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(ft(oa),ft(gy,8))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),m3=(()=>{class n extends kl{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=my(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Hs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Hs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(ft(oa),ft(gy,8))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),yy=(()=>{class n{constructor(t,r){this._subject=new $r,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=DE(RE(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Hs(r))}normalize(t){return n.stripTrailingSlash(function y3(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,RE(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hs(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hs(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Hs,n.joinWithSlash=my,n.stripTrailingSlash=DE,n.\u0275fac=function(t){return new(t||n)(ft(kl),ft(oa))},n.\u0275prov=tn({token:n,factory:function(){return function g3(){return new yy(ft(kl),ft(oa))}()},providedIn:"root"}),n})();function RE(n){return n.replace(/\/index.html$/,"")}var tr=(()=>((tr=tr||{})[tr.Zero=0]="Zero",tr[tr.One=1]="One",tr[tr.Two=2]="Two",tr[tr.Few=3]="Few",tr[tr.Many=4]="Many",tr[tr.Other=5]="Other",tr))();const E3=function Vb(n){return function jr(n){const e=function a2(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=zb(e);if(t)return t;const r=e.split("-")[0];if(t=zb(r),t)return t;if("en"===r)return o2;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[$e.PluralCase]};class Gh{}let K3=(()=>{class n extends Gh{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(E3(r||this.locale)(t)){case tr.Zero:return"zero";case tr.One:return"one";case tr.Two:return"two";case tr.Few:return"few";case tr.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(ft(bo))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();class rN{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let UE=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rN(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),HE(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{HE(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(lt($i),lt(Us),lt(Tu))},n.\u0275dir=Ar({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function HE(n,e){n.context.$implicit=e.item}let Cy=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new iN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(lt($i),lt(Us))},n.\u0275dir=Ar({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class iN{constructor(){this.$implicit=null,this.ngIf=null}}function VE(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${mn(e)}'.`)}let IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xo({type:n}),n.\u0275inj=ao({providers:[{provide:Gh,useClass:K3}]}),n})();let FN=(()=>{class n{}return n.\u0275prov=tn({token:n,providedIn:"root",factory:()=>new NN(ft(ei),window)}),n})();class NN{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kN(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jE(this.window.history)||jE(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function jE(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Iy extends class UN extends class u3{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function c3(n){Lh||(Lh=n)}(new Iy)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function HN(){return Ru=Ru||document.querySelector("base"),Ru?Ru.getAttribute("href"):null}();return null==t?null:function VN(n){Wh=Wh||document.createElement("a"),Wh.setAttribute("href",n);const e=Wh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ru=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function eN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Wh,Ru=null;const $E=new on("TRANSITION_ID"),GN=[{provide:Rh,useFactory:function zN(n,e,t){return()=>{t.get(Fl).donePromise.then(()=>{const r=Mo(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[$E,ei,Gr],multi:!0}];class Py{static init(){!function AF(n){ly=n}(new Py)}addToWindow(e){xn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},xn.getAllAngularTestabilities=()=>e.getAllTestabilities(),xn.getAllAngularRootElements=()=>e.getAllRootElements(),xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(r=>{const i=xn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Mo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let WN=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const jh=new on("EventManagerPlugins");let $h=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ft(jh),ft(hr))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();class qE{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Mo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let XE=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),Iu=(()=>{class n extends XE{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(YE),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(YE))}}return n.\u0275fac=function(t){return new(t||n)(ft(ei))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();function YE(n){Mo().remove(n)}const Ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Oy=/%COMP%/g;function qh(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?qh(n,i,t):(i=i.replace(Oy,n),t.push(i))}return t}function QE(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fy=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ny(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ls.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ZN(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case ls.ShadowDom:return new JN(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=qh(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ft($h),ft(Iu),ft(Su))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();class Ny{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ly[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ly[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ly[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ci.DashCase|ci.Important)?e.style.setProperty(t,r,i&ci.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ci.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,QE(r)):this.eventManager.addEventListener(e,t,QE(r))}}class ZN extends Ny{constructor(e,t,r,i){super(e),this.component=r;const s=qh(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function qN(n){return"_ngcontent-%COMP%".replace(Oy,n)}(i+"-"+r.id),this.hostAttr=function XN(n){return"_nghost-%COMP%".replace(Oy,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class JN extends Ny{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=qh(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let QN=(()=>{class n extends qE{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(ft(ei))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const eS=["alt","control","meta","shift"],ek={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nk=(()=>{class n extends qE{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(eS.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function rk(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&tS.hasOwnProperty(e)&&(e=tS[e]))}return ek[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),eS.forEach(s=>{s!=i&&tk[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ft(ei))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const ak=lE(e3,"browser",[{provide:ry,useValue:"browser"},{provide:KM,useValue:function ik(){Iy.makeCurrent(),Py.init()},multi:!0},{provide:ei,useFactory:function ok(){return function sA(n){nm=n}(document),document},deps:[]}]),lk=[{provide:gg,useValue:"root"},{provide:sl,useFactory:function sk(){return new sl},deps:[]},{provide:jh,useClass:QN,multi:!0,deps:[ei,hr,ry]},{provide:jh,useClass:nk,multi:!0,deps:[ei]},{provide:Fy,useClass:Fy,deps:[$h,Iu,Su]},{provide:gM,useExisting:Fy},{provide:XE,useExisting:Iu},{provide:Iu,useClass:Iu,deps:[ei]},{provide:ay,useClass:ay,deps:[hr]},{provide:$h,useClass:$h,deps:[jh,hr]},{provide:class BN{},useClass:WN,deps:[]}];let ck=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Su,useValue:t.appId},{provide:$E,useExisting:Su},GN]}}}return n.\u0275fac=function(t){return new(t||n)(ft(n,12))},n.\u0275mod=Xo({type:n}),n.\u0275inj=ao({providers:lk,imports:[IN,a3]}),n})(),nS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ft(ei))},n.\u0275prov=tn({token:n,factory:function(t){let r=null;return r=t?new t:function dk(){return new nS(ft(ei))}(),r},providedIn:"root"}),n})();function Ft(...n){return Er(n,Uc(n))}"undefined"!=typeof window&&window;class Zi extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:xk}=Array,{getPrototypeOf:wk,prototype:bk,keys:Mk}=Object;const{isArray:Ck}=Array;function Rk(...n){const e=Uc(n),t=function MD(n){return F(Hp(n))?n.pop():void 0}(n),{args:r,keys:i}=function Ek(n){if(1===n.length){const e=n[0];if(xk(e))return{args:e,keys:null};if(function Sk(n){return n&&"object"==typeof n&&wk(n)===bk}(e)){const t=Mk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return Er([],e);const s=new re(function Ik(n,e,t=Me){return r=>{sS(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)sS(e,()=>{const c=Er(n[l],e);let u=!1;c.subscribe(new It(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function Ak(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):Me));return t?s.pipe(function Dk(n){return Wt(e=>function Tk(n,e){return Ck(e)?n(...e):n(e)}(n,e))}(t)):s}function sS(n,e,t){n?Nn(t,n,e):e()}const Xh=J(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function By(...n){return function Pk(){return kn(1)}()(Er(n,Uc(n)))}function oS(n){return new re(e=>{Mr(n()).subscribe(e)})}function aS(){return et((n,e)=>{let t=null;n._refCount++;const r=new It(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lk extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new V;const t=this.getSubject();e.add(this.source.subscribe(new It(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=V.EMPTY)}return e}refCount(){return aS()(this)}}function aa(n,e){return et((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(new It(r,l=>{null==i||i.unsubscribe();let c=0;const u=s++;Mr(n(l,u)).subscribe(i=new It(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Fk(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(new It(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function lS(n,e){return et(Fk(n,e,arguments.length>=2,!0))}function Bl(n,e){return et((t,r)=>{let i=0;t.subscribe(new It(r,s=>n.call(e,s,i++)&&r.next(s)))})}function So(n){return et((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new It(t,void 0,void 0,o=>{s=Mr(n(o,So(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Pu(n,e){return F(e)?nn(n,e,1):nn(n,1)}function Uy(n){return n<=0?()=>lr:et((e,t)=>{let r=[];e.subscribe(new It(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cS(n=Nk){return et((e,t)=>{let r=!1;e.subscribe(new It(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Nk(){return new Xh}function uS(n){return et((e,t)=>{let r=!1;e.subscribe(new It(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ul(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bl((i,s)=>n(i,s,r)):Me,Ed(1),t?uS(e):cS(()=>new Xh))}function di(n,e,t){const r=F(n)||e||t?{next:n,error:e,complete:t}:n;return r?et((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(new It(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Me}class zs{constructor(e,t){this.id=e,this.url=t}}class Hy extends zs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lu extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dS extends zs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uk extends zs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hk extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vk extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zk extends zs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Gk extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wk extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jk{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $k{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qk{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xk{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class Yk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hl(n){return new Yk(n)}const mS="ngNavigationCancelingError";function Vy(n){const e=Error("NavigationCancelingError: "+n);return e[mS]=!0,e}function Jk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _s(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gS(n[i],e[i]))return!1;return!0}function gS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function yS(n){return Array.prototype.concat.apply([],n)}function vS(n){return n.length>0?n[n.length-1]:null}function Sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xs(n){return Yw(n)?n:fh(n)?Er(Promise.resolve(n)):Ft(n)}const eB={exact:function wS(n,e,t){if(!ca(n.segments,e.segments)||!Yh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wS(n.children[r],e.children[r],t))return!1;return!0},subset:bS},_S={exact:function tB(n,e){return _s(n,e)},subset:function nB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gS(n[t],e[t]))},ignored:()=>!0};function xS(n,e,t){return eB[t.paths](n.root,e.root,t.matrixParams)&&_S[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bS(n,e,t){return MS(n,e,e.segments,t)}function MS(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ca(i,t)||e.hasChildren()||!Yh(i,t,r))}if(n.segments.length===t.length){if(!ca(n.segments,t)||!Yh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!bS(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ca(n.segments,i)&&Yh(n.segments,i,r)&&n.children[$t])&&MS(n.children[$t],e,s,r)}}function Yh(n,e,t){return e.every((r,i)=>_S[t](n[i].parameters,r.parameters))}class la{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return sB.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zh(this)}}class Ou{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hl(this.parameters)),this._parameterMap}toString(){return DS(this)}}function ca(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ES{}class SS{parse(e){const t=new pB(e);return new la(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fu(e.root,!0)}`,r=function lB(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Jh(t)}=${Jh(i)}`).join("&"):`${Jh(t)}=${Jh(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function oB(n){return encodeURI(n)}(e.fragment)}`:""}`}}const sB=new SS;function Zh(n){return n.segments.map(e=>DS(e)).join("/")}function Fu(n,e){if(!n.hasChildren())return Zh(n);if(e){const t=n.children[$t]?Fu(n.children[$t],!1):"",r=[];return Sr(n.children,(i,s)=>{s!==$t&&r.push(`${s}:${Fu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function iB(n,e){let t=[];return Sr(n.children,(r,i)=>{i===$t&&(t=t.concat(e(r,i)))}),Sr(n.children,(r,i)=>{i!==$t&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===$t?[Fu(n.children[$t],!1)]:[`${i}:${Fu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${Zh(n)}/${t[0]}`:`${Zh(n)}/(${t.join("//")})`}}function CS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jh(n){return CS(n).replace(/%3B/gi,";")}function zy(n){return CS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qh(n){return decodeURIComponent(n)}function TS(n){return Qh(n.replace(/\+/g,"%20"))}function DS(n){return`${zy(n.path)}${function aB(n){return Object.keys(n).map(e=>`;${zy(e)}=${zy(n[e])}`).join("")}(n.parameters)}`}const cB=/^[^\/()?;=#]+/;function Kh(n){const e=n.match(cB);return e?e[0]:""}const uB=/^[^=?&#]+/,hB=/^[^&#]+/;class pB{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new en(e,t)),r}parseSegment(){const e=Kh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ou(Qh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Kh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Kh(this.remaining);i&&(r=i,this.capture(r))}e[Qh(t)]=Qh(r)}parseQueryParam(e){const t=function dB(n){const e=n.match(uB);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function fB(n){const e=n.match(hB);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=TS(t),s=TS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Kh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=$t);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[$t]:new en([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class AS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wy(e,this._root).map(t=>t.value)}}function Gy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gy(n,t);if(r)return r}return null}function Wy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wy(n,t);if(r.length)return r.unshift(e),r}return[]}class Gs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RS extends AS{constructor(e,t){super(e),this.snapshot=t,jy(this,e)}toString(){return this.snapshot.toString()}}function IS(n,e){const t=function mB(n,e){const o=new ef([],{},{},"",{},$t,e,null,n.root,-1,{});return new LS("",new Gs(o,[]))}(n,e),r=new Zi([new Ou("",{})]),i=new Zi({}),s=new Zi({}),o=new Zi({}),a=new Zi(""),l=new zl(r,i,o,a,s,$t,e,t.root);return l.snapshot=t.root,new RS(new Gs(l,[]),t)}class zl{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Wt(e=>Hl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Wt(e=>Hl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function gB(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ef{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LS extends AS{constructor(e,t){super(t),this.url=e,jy(this,t)}toString(){return OS(this._root)}}function jy(n,e){e.value._routerState=n,e.children.forEach(t=>jy(n,t))}function OS(n){const e=n.children.length>0?` { ${n.children.map(OS).join(", ")} } `:"";return`${n.value}${e}`}function $y(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_s(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_s(e.params,t.params)||n.params.next(t.params),function Qk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_s(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_s(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function qy(n,e){const t=_s(n.params,e.params)&&function rB(n,e){return ca(n,e)&&n.every((t,r)=>_s(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qy(n.parent,e.parent))}function Nu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vB(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nu(n,r,i);return Nu(n,r)})}(n,e,t);return new Gs(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Nu(n,a)),o}}const r=function _B(n){return new zl(new Zi(n.url),new Zi(n.params),new Zi(n.queryParams),new Zi(n.fragment),new Zi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Nu(n,s));return new Gs(r,i)}}function tf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ku(n){return"object"==typeof n&&null!=n&&n.outlets}function Xy(n,e,t,r,i){let s={};return r&&Sr(r,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new la(t.root===n?e:FS(t.root,n,e),s,i)}function FS(n,e,t){const r={};return Sr(n.children,(i,s)=>{r[s]=i===e?t:FS(i,e,t)}),new en(n.segments,r)}class NS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tf(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ku);if(i&&i!==vS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kS(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return nf(n,e,t);const r=function SB(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(ku(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!US(l,c,o))return s;r+=2}else{if(!US(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new en(n.segments.slice(0,r.pathIndex),{});return s.children[$t]=new en(n.segments.slice(r.pathIndex),n.children),nf(s,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?Zy(n,e,t):r.match?nf(n,0,i):Zy(n,e,t)}function nf(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function EB(n){return ku(n[0])?n[0].outlets:{[$t]:n}}(t),i={};return Sr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=kS(n.children[o],e,s))}),Sr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new en(n.segments,i)}}function Zy(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(ku(s)){const l=CB(s.outlets);return new en(r,l)}if(0===i&&tf(t[0])){r.push(new Ou(n.segments[e].path,BS(t[0]))),i++;continue}const o=ku(s)?s.outlets[$t]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&tf(a)?(r.push(new Ou(o,BS(a))),i+=2):(r.push(new Ou(o,{})),i++)}return new en(r,{})}function CB(n){const e={};return Sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Zy(new en([],{}),0,t))}),e}function BS(n){const e={};return Sr(n,(t,r)=>e[r]=`${t}`),e}function US(n,e,t){return n==t.path&&_s(e,t.parameters)}class DB{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$y(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vl(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Sr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Xk(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $k(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if($y(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$y(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function AB(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Jy{constructor(e,t){this.routes=e,this.module=t}}function Co(n){return"function"==typeof n}function ua(n){return n instanceof la}const Bu=Symbol("INITIAL_VALUE");function Uu(){return aa(n=>Rk(n.map(e=>e.pipe(Ed(1),function Ok(...n){const e=Uc(n);return et((t,r)=>{(e?By(n,t,e):By(n,t)).subscribe(r)})}(Bu)))).pipe(lS((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==Bu?i:(s===Bu&&(r=!0),r||!1!==s&&o!==t.length-1&&!ua(s)?i:s),e)},Bu),Bl(e=>e!==Bu),Wt(e=>ua(e)?e:!0===e),Ed(1)))}class FB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hu,this.attachRef=null}}class Hu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new FB,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Qy=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new $r,this.deactivateEvents=new $r,this.attachEvents=new $r,this.detachEvents=new $r,this.name=s||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new NB(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(lt(Hu),lt($i),lt(Al),Yc("name"),lt(uy))},n.\u0275dir=Ar({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class NB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zl?this.route:e===Hu?this.childContexts:this.parent.get(e,t)}}let HS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Wr(0,"router-outlet")},directives:[Qy],encapsulation:2}),n})();function VS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kB(r,BB(e,r))}}function kB(n,e){n.children&&VS(n.children,e)}function BB(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ky(n){const e=n.children&&n.children.map(Ky),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=HS),t}function Ti(n){return n.outlet||$t}function zS(n,e){const t=n.filter(r=>Ti(r)===e);return t.push(...n.filter(r=>Ti(r)!==e)),t}const GS={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function rf(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},GS):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Jk)(t,n,e);if(!s)return Object.assign({},GS);const o={};Sr(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function sf(n,e,t,r,i="corrected"){if(t.length>0&&function VB(n,e,t){return t.some(r=>of(n,e,r)&&Ti(r)!==$t)}(n,t,r)){const o=new en(e,function HB(n,e,t,r){const i={};i[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ti(s)!==$t){const o=new en([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Ti(s)]=o}return i}(n,e,r,new en(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function zB(n,e,t){return t.some(r=>of(n,e,r))}(n,t,r)){const o=new en(n.segments,function UB(n,e,t,r,i,s){const o={};for(const a of r)if(of(n,t,a)&&!i[Ti(a)]){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ti(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new en(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function of(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WS(n,e,t,r){return!!(Ti(n)===r||r!==$t&&of(e,t,n))&&("**"===n.path||rf(e,n,t).matched)}function jS(n,e,t){return 0===e.length&&!n.children[t]}class Vu{constructor(e){this.segmentGroup=e||null}}class $S{constructor(e){this.urlTree=e}}function af(n){return new re(e=>e.error(new Vu(n)))}function qS(n){return new re(e=>e.error(new $S(n)))}function GB(n){return new re(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class $B{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Bs)}apply(){const e=sf(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,$t).pipe(Wt(s=>this.createUrlTree(ev(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(So(s=>{if(s instanceof $S)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Vu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,$t).pipe(Wt(i=>this.createUrlTree(ev(i),e.queryParams,e.fragment))).pipe(So(i=>{throw i instanceof Vu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[$t]:e}):e;return new la(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Wt(s=>new en([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Er(i).pipe(Pu(s=>{const o=r.children[s],a=zS(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Wt(l=>({segment:l,outlet:s})))}),lS((s,o)=>(s[o.outlet]=o.segment,s),{}),function kk(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bl((i,s)=>n(i,s,r)):Me,Uy(1),t?uS(e):cS(()=>new Xh))}())}expandSegment(e,t,r,i,s,o){return Er(r).pipe(Pu(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(So(c=>{if(c instanceof Vu)return Ft(null);throw c}))),Ul(a=>!!a),So((a,l)=>{if(a instanceof Xh||"EmptyError"===a.name){if(jS(t,i,s))return Ft(new en([],{}));throw new Vu(t)}throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return WS(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):af(t):af(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qS(s):this.lineralizeSegments(r,s).pipe(nn(o=>{const a=new en(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=rf(t,i,s);if(!a)return af(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?qS(d):this.lineralizeSegments(i,d).pipe(nn(h=>this.expandSegment(e,t,r,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(Wt(h=>(r._loadedConfig=h,new en(i,{})))):Ft(new en(i,{}));const{matched:o,consumedSegments:a,lastChild:l}=rf(t,r,i);if(!o)return af(t);const c=i.slice(l);return this.getChildConfig(e,r,i).pipe(nn(d=>{const h=d.module,f=d.routes,{segmentGroup:m,slicedSegments:p}=sf(t,a,c,f),g=new en(m.segments,m.children);if(0===p.length&&g.hasChildren())return this.expandChildren(h,f,g).pipe(Wt(_=>new en(a,_)));if(0===f.length&&0===p.length)return Ft(new en(a,{}));const v=Ti(r)===s;return this.expandSegment(h,g,f,p,v?$t:s,!0).pipe(Wt(x=>new en(a.concat(x.segments),x.children)))}))}getChildConfig(e,t,r){return t.children?Ft(new Jy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(nn(i=>i?this.configLoader.load(e.injector,t).pipe(Wt(s=>(t._loadedConfig=s,s))):function WB(n){return new re(e=>e.error(Vy(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Ft(new Jy([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ft(i.map(o=>{const a=e.get(o);let l;if(function IB(n){return n&&Co(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!Co(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return xs(l)})).pipe(Uu(),di(o=>{if(!ua(o))return;const a=Vy(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Wt(o=>!0===o)):Ft(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ft(r);if(i.numberOfChildren>1||!i.children[$t])return GB(e.redirectTo);i=i.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new la(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Sr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Sr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new en(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function ev(n){const e={};for(const r of Object.keys(n.children)){const s=ev(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qB(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class XS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lf{constructor(e,t){this.component=e,this.route=t}}function YB(n,e,t){const r=n._root;return zu(r,e?e._root:null,t,[r.value])}function cf(n,e,t){const r=function JB(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vl(e);return n.children.forEach(o=>{(function QB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function KB(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ca(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ca(n.url,e.url)||!_s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qy(n,e)||!_s(n.queryParams,e.queryParams);default:return!qy(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new XS(r)):(s.data=o.data,s._resolvedData=o._resolvedData),zu(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lf(a.outlet.component,o))}else o&&Gu(e,a,i),i.canActivateChecks.push(new XS(r)),zu(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Sr(s,(o,a)=>Gu(o,t.getContext(a),i)),i}function Gu(n,e,t){const r=Vl(n),i=n.value;Sr(r,(s,o)=>{Gu(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new lf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class lU{}function YS(n){return new re(e=>e.error(n))}class uU{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=sf(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,$t);if(null===t)return null;const r=new ef([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Gs(r,t),s=new LS(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=PS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=zS(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=ZS(r);return function dU(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return jS(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!WS(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?vS(r).parameters:{};s=new ef(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,KS(e),Ti(e),e.component,e,JS(t),QS(t)+r.length,eC(e))}else{const f=rf(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=r.slice(f.lastChild),s=new ef(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,KS(e),Ti(e),e.component,e,JS(t),QS(t)+o.length,eC(e))}const l=function hU(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=sf(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Gs(s,f)]}if(0===l.length&&0===u.length)return[new Gs(s,[])];const d=Ti(e)===i,h=this.processSegment(l,c,u,d?$t:i);return null===h?null:[new Gs(s,h)]}}function fU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ZS(n){const e=[],t=new Set;for(const r of n){if(!fU(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ZS(r.children);e.push(new Gs(r.value,i))}return e.filter(r=>!t.has(r))}function JS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function QS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function KS(n){return n.data||{}}function eC(n){return n.resolve||{}}function tv(n){return aa(e=>{const t=n(e);return t?Er(t).pipe(Wt(()=>e)):Ft(e)})}class wU extends class xU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const nv=new on("ROUTES");class tC{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(Wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new Jy(yS(o.injector.get(nv,void 0,Tt.Self|Tt.Optional)).map(Ky),o)}),So(s=>{throw t._loader$=void 0,s}));return t._loader$=new Lk(i,()=>new nt).pipe(aS()),t._loader$}loadModuleFactory(e){return xs(e()).pipe(nn(t=>t instanceof _M?Ft(t):Er(this.compiler.compileModuleAsync(t))))}}class MU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function EU(n){throw n}function SU(n,e,t){return e.parse("/")}function nC(n,e){return Ft(null)}const CU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hi=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nt,this.errorHandler=EU,this.malformedUriErrorHandler=SU,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nC,afterPreactivation:nC},this.urlHandlingStrategy=new MU,this.routeReuseStrategy=new wU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Bs),this.console=o.get(tE);const d=o.get(hr);this.isNgZoneEnabled=d instanceof hr&&hr.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Kk(){return new la(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new tC(o,a,h=>this.triggerEvent(new hS(h)),h=>this.triggerEvent(new fS(h))),this.routerState=IS(this.currentUrlTree,this.rootComponentType),this.transitions=new Zi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bl(i=>0!==i.id),Wt(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),aa(i=>{let s=!1,o=!1;return Ft(i).pipe(di(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),aa(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return uf(a.source)&&(this.browserUrlTree=a.extractedUrl),Ft(a).pipe(aa(d=>{const h=this.transitions.getValue();return r.next(new Hy(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?lr:Promise.resolve(d)}),function XB(n,e,t,r){return aa(i=>function jB(n,e,t,r,i){return new $B(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Wt(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),di(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function pU(n,e,t,r,i){return nn(s=>function cU(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new uU(n,e,t,r,i,s).recognize();return null===o?YS(new lU):Ft(o)}catch(o){return YS(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(Wt(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),di(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Hk(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:m,restoredState:p,extras:g}=a,v=new Hy(h,this.serializeUrl(f),m,p);r.next(v);const y=IS(f,this.rootComponentType).snapshot;return Ft(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),lr}),tv(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),di(a=>{const l=new Vk(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Wt(a=>Object.assign(Object.assign({},a),{guards:YB(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function eU(n,e){return nn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function tU(n,e,t,r){return Er(n).pipe(nn(i=>function aU(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ft(s.map(a=>{const l=cf(a,e,i);let c;if(function OB(n){return n&&Co(n.canDeactivate)}(l))c=xs(l.canDeactivate(n,e,t,r));else{if(!Co(l))throw new Error("Invalid CanDeactivate guard");c=xs(l(n,e,t,r))}return c.pipe(Ul())})).pipe(Uu()):Ft(!0)}(i.component,i.route,t,e,r)),Ul(i=>!0!==i,!0))}(o,r,i,n).pipe(nn(a=>a&&function RB(n){return"boolean"==typeof n}(a)?function nU(n,e,t,r){return Er(e).pipe(Pu(i=>By(function iU(n,e){return null!==n&&e&&e(new jk(n)),Ft(!0)}(i.route.parent,r),function rU(n,e){return null!==n&&e&&e(new qk(n)),Ft(!0)}(i.route,r),function oU(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ZB(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>oS(()=>Ft(o.guards.map(l=>{const c=cf(l,o.node,t);let u;if(function LB(n){return n&&Co(n.canActivateChild)}(c))u=xs(c.canActivateChild(r,n));else{if(!Co(c))throw new Error("Invalid CanActivateChild guard");u=xs(c(r,n))}return u.pipe(Ul())})).pipe(Uu())));return Ft(s).pipe(Uu())}(n,i.path,t),function sU(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ft(!0);const i=r.map(s=>oS(()=>{const o=cf(s,e,t);let a;if(function PB(n){return n&&Co(n.canActivate)}(o))a=xs(o.canActivate(e,n));else{if(!Co(o))throw new Error("Invalid CanActivate guard");a=xs(o(e,n))}return a.pipe(Ul())}));return Ft(i).pipe(Uu())}(n,i.route,t))),Ul(i=>!0!==i,!0))}(r,s,n,e):Ft(a)),Wt(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),di(a=>{if(ua(a.guardsResult)){const c=Vy(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new zk(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Bl(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),tv(a=>{if(a.guards.canActivateChecks.length)return Ft(a).pipe(di(l=>{const c=new Gk(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),aa(l=>{let c=!1;return Ft(l).pipe(function mU(n,e){return nn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ft(t);let s=0;return Er(i).pipe(Pu(o=>function gU(n,e,t,r){return function yU(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Ft({});const s={};return Er(i).pipe(nn(o=>function vU(n,e,t,r){const i=cf(n,e,r);return xs(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(di(a=>{s[o]=a}))),Uy(1),nn(()=>Object.keys(s).length===i.length?Ft(s):lr))}(n._resolve,n,e,r).pipe(Wt(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),PS(n,t).resolve),null)))}(o.route,r,n,e)),di(()=>s++),Uy(1),nn(o=>s===i.length?Ft(t):lr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),di({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),di(l=>{const c=new Wk(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),tv(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Wt(a=>{const l=function yB(n,e,t){const r=Nu(n,e._root,t?t._root:void 0);return new RS(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),di(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Wt(r=>(new DB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),di({next(){s=!0},complete(){s=!0}}),function Bk(n){return et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),So(a=>{if(o=!0,function Zk(n){return n&&n[mS]}(a)){const l=ua(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new dS(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uf(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new Uk(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return lr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){VS(t),this.config=t.map(Ky),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function xB(n,e,t,r,i){if(0===t.length)return Xy(e.root,e.root,e,r,i);const s=function wB(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new NS(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Sr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new NS(t,e,r)}(t);if(s.toRoot())return Xy(e.root,new en([],{}),e,r,i);const o=function bB(n,e,t){if(n.isAbsolute)return new Yy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Yy(s,s===e.root,0)}const r=tf(n.commands[0])?0:1;return function MB(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yy(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?nf(o.segmentGroup,o.index,s.commands):kS(o.segmentGroup,o.index,s.commands);return Xy(o.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ua(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function DU(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},CU):!1===r?Object.assign({},TU):r,ua(t))return xS(this.currentUrlTree,t,i);const s=this.parseUrl(t);return xS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Lu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=uf(r)&&u&&!uf(u.source),h=u.rawUrl.toString()===t.toString(),f=u.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&h&&f)return Promise.resolve(!0);let p,g,v;o?(p=o.resolve,g=o.reject,v=o.promise):v=new Promise((_,w)=>{p=_,g=w});const y=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):x=0,this.setTransition({id:y,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:p,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(_=>Promise.reject(_))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new dS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Dg()},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();function uf(n){return"imperative"!==n}let rv=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new nt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Gl(this.skipLocationChange),replaceUrl:Gl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Gl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(lt(hi),lt(zl),Yc("tabindex"),lt(bh),lt(wo))},n.\u0275dir=Ar({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&mu("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ea]}),n})(),df=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new nt,this.subscription=t.events.subscribe(s=>{s instanceof Lu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,o){if(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Gl(this.skipLocationChange),replaceUrl:Gl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Gl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(lt(hi),lt(zl),lt(kl))},n.\u0275dir=Ar({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&mu("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Mg("target",r.target)("href",r.href,ta)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ea]}),n})();function Gl(n){return""===n||!!n}let rC=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new $r,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Lu&&this.update()})}ngAfterContentInit(){Ft(this.links.changes,this.linksWithHrefs.changes,Ft(null)).pipe(kn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Er(r).pipe(kn()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function AU(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(hi),lt(wo),lt(bh),lt(uy),lt(rv,8),lt(df,8))},n.\u0275dir=Ar({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(Zg(i,rv,5),Zg(i,df,5)),2&t){let s;Pl(s=Ll())&&(r.links=s),Pl(s=Ll())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ea]}),n})();class iC{}class sC{preload(e,t){return Ft(null)}}let oC=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new tC(i,r,l=>t.triggerEvent(new hS(l)),l=>t.triggerEvent(new fS(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bl(t=>t instanceof Lu),Pu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Bs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return Er(i).pipe(kn(),Wt(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe(nn(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(ft(hi),ft(Ih),ft(Gr),ft(iC))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),iv=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new pS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Dg()},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();const da=new on("ROUTER_CONFIGURATION"),aC=new on("ROUTER_FORROOT_GUARD"),IU=[yy,{provide:ES,useClass:SS},{provide:hi,useFactory:function NU(n,e,t,r,i,s,o={},a,l){const c=new hi(null,n,e,t,r,i,yS(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function kU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[ES,Hu,yy,Gr,Ih,nv,da,[class bU{},new hs],[class _U{},new hs]]},Hu,{provide:zl,useFactory:function BU(n){return n.routerState.root},deps:[hi]},oC,sC,class RU{preload(e,t){return t().pipe(So(()=>Ft(null)))}},{provide:da,useValue:{enableTracing:!1}}];function PU(){return new aE("Router",hi)}let lC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[IU,cC(t),{provide:aC,useFactory:FU,deps:[[hi,new hs,new nl]]},{provide:da,useValue:r||{}},{provide:kl,useFactory:OU,deps:[oa,[new nu(gy),new hs],da]},{provide:iv,useFactory:LU,deps:[hi,FN,da]},{provide:iC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:sC},{provide:aE,multi:!0,useFactory:PU},[sv,{provide:Rh,multi:!0,useFactory:UU,deps:[sv]},{provide:uC,useFactory:HU,deps:[sv]},{provide:eE,multi:!0,useExisting:uC}]]}}static forChild(t){return{ngModule:n,providers:[cC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(ft(aC,8),ft(hi,8))},n.\u0275mod=Xo({type:n}),n.\u0275inj=ao({}),n})();function LU(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new iv(n,e,t)}function OU(n,e,t={}){return t.useHash?new m3(n,e):new AE(n,e)}function FU(n){return"guarded"}function cC(n){return[{provide:GA,multi:!0,useValue:n},{provide:nv,multi:!0,useValue:n}]}let sv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nt}appInitializer(){return this.injector.get(h3,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(hi),o=this.injector.get(da);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(da),i=this.injector.get(oC),s=this.injector.get(iv),o=this.injector.get(hi),a=this.injector.get(Cu);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(ft(Gr))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})();function UU(n){return n.appInitializer.bind(n)}function HU(n){return n.bootstrapListener.bind(n)}const uC=new on("Router Initializer");let zU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["app-about-me"]],decls:2,vars:0,template:function(t,r){1&t&&(Dt(0,"p"),er(1,"about-me works!"),At())},styles:[""]}),n})(),GU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["app-blogs"]],decls:2,vars:0,template:function(t,r){1&t&&(Dt(0,"p"),er(1,"blogs works!"),At())},styles:[""]}),n})();function dC(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function ov(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){dC(s,r,i,o,a,"next",l)}function a(l){dC(s,r,i,o,a,"throw",l)}o(void 0)})}}var WU=A(8304),jU=A.n(WU),$U=A(7803),qU=A.n($U);let hC=(()=>{class n{constructor(){this.sanityClientCredentials={option:jU()({projectId:"kwuwuig5",dataset:"production"})},this.urlFor=t=>qU()(this.sanityClientCredentials.option).image(t)}getExperiments(){var t=this;return ov(function*(){return yield t.sanityClientCredentials.option.fetch("*[_type=='experiments']{\n        _id,\n        title,\n        publishedAt,\n        mainImage,\n        isPreviewAvailable,\n        isSourceAvailable,\n        previewLink,\n        repoLink,\n        description\n    }")})()}getAuthor(){var t=this;return ov(function*(){return yield t.sanityClientCredentials.option.fetch("*[_type=='author']{\n        _id,\n        name,\n        image,\n        bio,\n        social,\n        phone,\n        email,\n        highlights\n    }")})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XU(n,e){1&n&&(_o(0),er(1," Loading ... "),xo())}function YU(n,e){if(1&n&&(_o(0),Dt(1,"a",14),Wr(2,"i",15),er(3," Preview"),At(),xo()),2&n){const t=El().$implicit;Kr(1),Sl("href",t.previewLink,ta)}}function ZU(n,e){if(1&n&&(_o(0),Dt(1,"a",16),Wr(2,"i",17),er(3," Source Code"),At(),xo()),2&n){const t=El().$implicit;Kr(1),Sl("href",t.repoLink,ta)}}function JU(n,e){if(1&n&&(_o(0),Dt(1,"div",7),Dt(2,"div",8),Wr(3,"img",9),Dt(4,"div",10),Dt(5,"h5",11),er(6),At(),Dt(7,"p",12),er(8),At(),vo(9,YU,4,1,"ng-container",3),vo(10,ZU,4,1,"ng-container",3),Dt(11,"small",13),er(12),At(),At(),At(),At(),xo()),2&n){const t=e.$implicit,r=El(2);Kr(3),Sl("src",r.imageUrl(t.mainImage).width(400).url(),ta),Sl("alt",t.title),Kr(3),mh(t.title),Kr(2),mh(t.description),Kr(1),ks("ngIf",t.isPreviewAvailable),Kr(1),ks("ngIf",t.isSourceAvailable),Kr(2),gh(" ",t.publishedAt,"")}}function QU(n,e){if(1&n&&(_o(0),vo(1,JU,13,7,"ng-container",6),xo()),2&n){const t=El();Kr(1),ks("ngForOf",t.experiments)}}function KU(n,e){1&n&&er(0," No Experiments found ")}let eH=(()=>{class n{constructor(t){this.sanitySvc=t,this.isRequestInProcess=!0}ngOnInit(){this.getExperiments()}imageUrl(t){return this.sanitySvc.urlFor(t)}getExperiments(){this.sanitySvc.getExperiments().then(t=>{this.experiments=t,this.isRequestInProcess=!1})}}return n.\u0275fac=function(t){return new(t||n)(lt(hC))},n.\u0275cmp=ki({type:n,selectors:[["app-experiments"]],decls:7,vars:3,consts:[["id","services",1,"experiments","section-show"],[1,"container"],[1,"row"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noExperimentsFound",""],[4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","d-flex","align-items-stretch","mb-4"],[1,"card","text-white","bg-dark"],["width","100%",1,"bd-placeholder-img","card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],["target","_blank",1,"preview-btn","mr-2","btn","btn-outline-light",3,"href"],["aria-hidden","true",1,"fa","fa-eye"],["target","_blank",1,"source-btn","btn","btn-outline-light",3,"href"],["aria-hidden","true",1,"fa","fa-github"]],template:function(t,r){if(1&t&&(Dt(0,"section",0),Dt(1,"div",1),Dt(2,"div",2),vo(3,XU,2,0,"ng-container",3),vo(4,QU,2,1,"ng-container",4),vo(5,KU,1,0,"ng-template",null,5,NM),At(),At(),At()),2&t){const i=function kw(n){return function $a(n,e){return n[e]}(function gA(){return _t.lFrame.contextLView}(),20+n)}(6);Kr(3),ks("ngIf",r.isRequestInProcess),Kr(1),ks("ngIf",r.experiments&&r.experiments.length>0||r.isRequestInProcess)("ngIfElse",i)}},directives:[Cy,UE],styles:['@import"https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&display=swap";body[_ngcontent-%COMP%]{font-family:Inconsolata,monospace;font-weight:400;background:#000;color:#fff}#hero[_ngcontent-%COMP%]{background-attachment:fixed}#hero[_ngcontent-%COMP%]{width:100%;background-size:cover}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}section[_ngcontent-%COMP%]{padding:100px 0;overflow:hidden}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-weight:600}.navbar[_ngcontent-%COMP%]{padding:30px;font-weight:600;font-size:x-large}a[_ngcontent-%COMP%]{color:#00ff62}a[_ngcontent-%COMP%]:hover{color:#fff}.nav-link[_ngcontent-%COMP%]{color:#00ff62;display:flex;align-items:center;justify-content:space-between;padding:0;white-space:nowrap;transition:.3s}.Typewriter__cursor[_ngcontent-%COMP%]{color:#00ff62}.nav-link[_ngcontent-%COMP%]:active, .nav-link[_ngcontent-%COMP%]:hover, .nav-link[_ngcontent-%COMP%]:focus{color:#fff}.navbar-toggler-icon[_ngcontent-%COMP%]{color:#fff;line-height:1.5}.footer-credits[_ngcontent-%COMP%]{position:fixed;right:0;left:0;bottom:0;padding:15px;text-align:center;font-size:13px;color:#fff;z-index:999999}section[_ngcontent-%COMP%]   .experiments[_ngcontent-%COMP%]{padding:0!important}card[_ngcontent-%COMP%]{border:none}.card-body[_ngcontent-%COMP%]{background:black;border-bottom:1px solid #00ff62}.card-title[_ngcontent-%COMP%]{color:#00ff62}.card-text[_ngcontent-%COMP%]{color:#fff}.preview-btn[_ngcontent-%COMP%]:hover{border:2px solid white;background:none;margin:-1px}.preview-btn[_ngcontent-%COMP%]:focus, .preview-btn.focus[_ngcontent-%COMP%]{box-shadow:none}.source-btn[_ngcontent-%COMP%]{border:1px solid #00ff62;color:#fff}.source-btn[_ngcontent-%COMP%]:hover{border:2px solid #00ff62;background:none;margin:-1px}.source-btn[_ngcontent-%COMP%]:focus, .source-btn.focus[_ngcontent-%COMP%]{box-shadow:none}a[_ngcontent-%COMP%]{color:#fff}']}),n})();var tH=A(946),nH=A.n(tH);const ni=1001,pr=1003,rr=1006,pa=1009,$u=1012,Do=1015,Yl=1016,Zl=1020,Ai=1023,ma=1026,Jl=1027,Ql=2400,Kl=2401,js=3e3,On=3001,$s="srgb",ga="srgb-linear",qu=35044,Xu=35048;class ya{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Cr=[];for(let n=0;n<256;n++)Cr[n]=(n<16?"0":"")+n.toString(16);const va=Math.PI/180,Yu=180/Math.PI;function fi(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Cr[255&n]+Cr[n>>8&255]+Cr[n>>16&255]+Cr[n>>24&255]+"-"+Cr[255&e]+Cr[e>>8&255]+"-"+Cr[e>>16&15|64]+Cr[e>>24&255]+"-"+Cr[63&t|128]+Cr[t>>8&255]+"-"+Cr[t>>16&255]+Cr[t>>24&255]+Cr[255&r]+Cr[r>>8&255]+Cr[r>>16&255]+Cr[r>>24&255]).toLowerCase()}function Yn(n,e,t){return Math.max(e,Math.min(t,n))}function Zu(n,e,t){return(1-t)*n+t*e}function wv(n){return 0==(n&n-1)&&0!==n}function wf(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class Ce{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ce.prototype.isVector2=!0;class _r{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],m=r[8],p=i[0],g=i[3],v=i[6],y=i[1],x=i[4],_=i[7],w=i[2],P=i[5],U=i[8];return s[0]=o*p+a*y+l*w,s[3]=o*g+a*x+l*P,s[6]=o*v+a*_+l*U,s[1]=c*p+u*y+d*w,s[4]=c*g+u*x+d*P,s[7]=c*v+u*_+d*U,s[2]=h*p+f*y+m*w,s[5]=h*g+f*x+m*P,s[8]=h*v+f*_+m*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,m=t*d+r*h+i*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=d*p,e[1]=(i*c-u*r)*p,e[2]=(a*r-i*o)*p,e[3]=h*p,e[4]=(u*t-i*l)*p,e[5]=(i*s-a*t)*p,e[6]=f*p,e[7]=(r*l-c*t)*p,e[8]=(o*t-r*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*c,i[6]=t*a+r*u,i[1]=-r*s+t*l,i[4]=-r*o+t*c,i[7]=-r*a+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function YC(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Ju(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function _a(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function bf(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}_r.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const bv={[$s]:{[ga]:_a},[ga]:{[$s]:bf}},Ji={legacyMode:!0,get workingColorSpace(){return ga},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(bv[e]&&void 0!==bv[e][t]){const r=bv[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},ZC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mr={r:0,g:0,b:0},Qi={h:0,s:0,l:0},Mf={h:0,s:0,l:0};function Mv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Ef(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let nc,qe=(()=>{class n{constructor(t,r,i){return void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=$s){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ji.toWorkingColorSpace(this,r),this}setRGB(t,r,i,s=ga){return this.r=t,this.g=r,this.b=i,Ji.toWorkingColorSpace(this,s),this}setHSL(t,r,i,s=ga){if(t=function xv(n,e){return(n%e+e)%e}(t,1),r=Yn(r,0,1),i=Yn(i,0,1),0===r)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+r):i+r-i*r,a=2*i-o;this.r=Mv(a,o,t+1/3),this.g=Mv(a,o,t),this.b=Mv(a,o,t-1/3)}return Ji.toWorkingColorSpace(this,s),this}setStyle(t,r=$s){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Ji.toWorkingColorSpace(this,r),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Ji.toWorkingColorSpace(this,r),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(c,u,d,r)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Ji.toWorkingColorSpace(this,r),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Ji.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=$s){const i=ZC[t.toLowerCase()];return void 0!==i?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=_a(t.r),this.g=_a(t.g),this.b=_a(t.b),this}copyLinearToSRGB(t){return this.r=bf(t.r),this.g=bf(t.g),this.b=bf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=$s){return Ji.fromWorkingColorSpace(Ef(this,mr),t),Yn(255*mr.r,0,255)<<16^Yn(255*mr.g,0,255)<<8^Yn(255*mr.b,0,255)<<0}getHexString(t=$s){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=ga){Ji.fromWorkingColorSpace(Ef(this,mr),r);const i=mr.r,s=mr.g,o=mr.b,a=Math.max(i,s,o),l=Math.min(i,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case i:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-i)/h+2;break;case o:c=(i-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,r=ga){return Ji.fromWorkingColorSpace(Ef(this,mr),r),t.r=mr.r,t.g=mr.g,t.b=mr.b,t}getStyle(t=$s){return Ji.fromWorkingColorSpace(Ef(this,mr),t),t!==$s?`color(${t} ${mr.r} ${mr.g} ${mr.b})`:`rgb(${255*mr.r|0},${255*mr.g|0},${255*mr.b|0})`}offsetHSL(t,r,i){return this.getHSL(Qi),Qi.h+=t,Qi.s+=r,Qi.l+=i,this.setHSL(Qi.h,Qi.s,Qi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(Qi),t.getHSL(Mf);const i=Zu(Qi.h,Mf.h,r),s=Zu(Qi.s,Mf.s,r),o=Zu(Qi.l,Mf.l,r);return this.setHSL(i,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=ZC,n})();qe.prototype.isColor=!0,qe.prototype.r=1,qe.prototype.g=1,qe.prototype.b=1;class xa{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nc&&(nc=Ju("canvas")),nc.width=e.width,nc.height=e.height;const r=nc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=nc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ju("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=255*_a(s[o]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*_a(t[r]/255)):_a(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class rc{constructor(e=null){this.uuid=fi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)s.push(Ev(i[o].isDataTexture?i[o].image:i[o]))}else s=Ev(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Ev(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?xa.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}rc.prototype.isSource=!0;let yV=0,ri=(()=>{class n extends ya{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=ni,s=ni,o=rr,a=1008,l=Ai,c=pa,u=1,d=js){super(),Object.defineProperty(this,"id",{value:yV++}),this.uuid=fi(),this.name="",this.source=new rc(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _r,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case ni:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case ni:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();ri.prototype.isTexture=!0;class gn{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const o=.01,a=.1,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],p=l[2],g=l[6],v=l[10];if(Math.abs(u-h)<o&&Math.abs(d-p)<o&&Math.abs(m-g)<o){if(Math.abs(u+h)<a&&Math.abs(d+p)<a&&Math.abs(m+g)<a&&Math.abs(c+f+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,_=(f+1)/2,w=(v+1)/2,P=(u+h)/4,U=(d+p)/4,j=(m+g)/4;return x>_&&x>w?x<o?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(x),i=P/r,s=U/r):_>w?_<o?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(_),r=P/i,s=j/i):w<o?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=U/s,i=j/s),this.set(r,i,s,t),this}let y=Math.sqrt((g-m)*(g-m)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(g-m)/y,this.y=(d-p)/y,this.z=(h-u)/y,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}gn.prototype.isVector4=!0;class pi extends ya{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new gn(0,0,e,t),this.scissorTest=!1,this.viewport=new gn(0,0,e,t),this.texture=new ri({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:rr,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}pi.prototype.isWebGLRenderTarget=!0;class Sf extends ri{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=pr,this.minFilter=pr,this.wrapR=ni,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Sf.prototype.isDataArrayTexture=!0,class vV extends pi{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new Sf(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class Sv extends ri{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=pr,this.minFilter=pr,this.wrapR=ni,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Sv.prototype.isData3DTexture=!0,class _V extends pi{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new Sv(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class xV extends pi{constructor(e,t,r,i={}){super(e,t,i);const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Or{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],f=s[o+1],m=s[o+2],p=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=m,void(e[t+3]=p);if(d!==p||l!==h||c!==f||u!==m){let g=1-a;const v=l*h+c*f+u*m+d*p,y=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const w=Math.sqrt(x),P=Math.atan2(w,v*y);g=Math.sin(g*P)/w,a=Math.sin(a*P)/w}const _=a*y;if(l=l*g+h*_,c=c*g+f*_,u=u*g+m*_,d=d*g+p*_,g===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),h=l(r/2),f=l(i/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Or.prototype.isQuaternion=!0;class C{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(JC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(JC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,u=l*r+a*t-s*i,d=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Cv.copy(this).projectOnVector(e),this.sub(Cv)}reflect(e){return this.sub(Cv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Yn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}C.prototype.isVector3=!0;const Cv=new C,JC=new Or;class Ri{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=wa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)wa.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(wa)}else null===r.boundingBox&&r.computeBoundingBox(),Tv.copy(r.boundingBox),Tv.applyMatrix4(e.matrixWorld),this.union(Tv);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,wa),wa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qu),Cf.subVectors(this.max,Qu),ic.subVectors(e.a,Qu),sc.subVectors(e.b,Qu),oc.subVectors(e.c,Qu),Ao.subVectors(sc,ic),Ro.subVectors(oc,sc),ba.subVectors(ic,oc);let t=[0,-Ao.z,Ao.y,0,-Ro.z,Ro.y,0,-ba.z,ba.y,Ao.z,0,-Ao.x,Ro.z,0,-Ro.x,ba.z,0,-ba.x,-Ao.y,Ao.x,0,-Ro.y,Ro.x,0,-ba.y,ba.x,0];return!(!Dv(t,ic,sc,oc,Cf)||(t=[1,0,0,0,1,0,0,0,1],!Dv(t,ic,sc,oc,Cf)))&&(Tf.crossVectors(Ao,Ro),t=[Tf.x,Tf.y,Tf.z],Dv(t,ic,sc,oc,Cf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wa.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(wa).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ri.prototype.isBox3=!0;const qs=[new C,new C,new C,new C,new C,new C,new C,new C],wa=new C,Tv=new Ri,ic=new C,sc=new C,oc=new C,Ao=new C,Ro=new C,ba=new C,Qu=new C,Cf=new C,Tf=new C,Ma=new C;function Dv(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ma.fromArray(n,s);const a=i.x*Math.abs(Ma.x)+i.y*Math.abs(Ma.y)+i.z*Math.abs(Ma.z),l=e.dot(Ma),c=t.dot(Ma),u=r.dot(Ma);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const wV=new Ri,QC=new C,Df=new C,Av=new C;class Ea{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):wV.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Av.subVectors(e,this.center);const t=Av.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.add(Av.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return!0===this.center.equals(e.center)?Df.set(0,0,1).multiplyScalar(e.radius):Df.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(QC.copy(e.center).add(Df)),this.expandByPoint(QC.copy(e.center).sub(Df)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Xs=new C,Rv=new C,Af=new C,Io=new C,Iv=new C,Rf=new C,Pv=new C;class Sa{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Xs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Xs.copy(this.direction).multiplyScalar(t).add(this.origin),Xs.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Rv.copy(e).add(t).multiplyScalar(.5),Af.copy(t).sub(e).normalize(),Io.copy(this.origin).sub(Rv);const s=.5*e.distanceTo(t),o=-this.direction.dot(Af),a=Io.dot(this.direction),l=-Io.dot(Af),c=Io.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=s*u,d>=0)if(h>=-m)if(h<=m){const p=1/u;d*=p,h*=p,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Af).multiplyScalar(h).add(Rv),f}intersectSphere(e,t){Xs.subVectors(e.center,this.origin);const r=Xs.dot(this.direction),i=Xs.dot(Xs)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||r!=r)&&(r=s),(o<i||i!=i)&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!=r)&&(r=a),(l<i||i!=i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Xs)}intersectTriangle(e,t,r,i,s){Iv.subVectors(t,e),Rf.subVectors(r,e),Pv.crossVectors(Iv,Rf);let a,o=this.direction.dot(Pv);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Io.subVectors(this.origin,e);const l=a*this.direction.dot(Rf.crossVectors(Io,Rf));if(l<0)return null;const c=a*this.direction.dot(Iv.cross(Io));if(c<0||l+c>o)return null;const u=-a*Io.dot(Pv);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class rt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,c,u,d,h,f,m,p,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=f,v[7]=m,v[11]=p,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new rt).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/ac.setFromMatrixColumn(e,0).length(),s=1/ac.setFromMatrixColumn(e,1).length(),o=1/ac.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-p*c,t[9]=-a*l,t[2]=p-h*c,t[6]=m+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h+p*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-m,t[6]=p+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h-p*a,t[4]=-o*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*u,t[9]=p-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+p,t[1]=l*d,t[5]=p*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=p-h*d,t[8]=m*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-p*d}else if("XZY"===e.order){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+p,t[5]=o*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=p*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bV,e,MV)}lookAt(e,t,r){const i=this.elements;return mi.subVectors(e,t),0===mi.lengthSq()&&(mi.z=1),mi.normalize(),Po.crossVectors(r,mi),0===Po.lengthSq()&&(1===Math.abs(r.z)?mi.x+=1e-4:mi.z+=1e-4,mi.normalize(),Po.crossVectors(r,mi)),Po.normalize(),If.crossVectors(mi,Po),i[0]=Po.x,i[4]=If.x,i[8]=mi.x,i[1]=Po.y,i[5]=If.y,i[9]=mi.y,i[2]=Po.z,i[6]=If.z,i[10]=mi.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],m=r[2],p=r[6],g=r[10],v=r[14],y=r[3],x=r[7],_=r[11],w=r[15],P=i[0],U=i[4],j=i[8],ce=i[12],q=i[1],M=i[5],k=i[9],Ae=i[13],Y=i[2],oe=i[6],ne=i[10],pe=i[14],Z=i[3],Ee=i[7],Re=i[11],Ne=i[15];return s[0]=o*P+a*q+l*Y+c*Z,s[4]=o*U+a*M+l*oe+c*Ee,s[8]=o*j+a*k+l*ne+c*Re,s[12]=o*ce+a*Ae+l*pe+c*Ne,s[1]=u*P+d*q+h*Y+f*Z,s[5]=u*U+d*M+h*oe+f*Ee,s[9]=u*j+d*k+h*ne+f*Re,s[13]=u*ce+d*Ae+h*pe+f*Ne,s[2]=m*P+p*q+g*Y+v*Z,s[6]=m*U+p*M+g*oe+v*Ee,s[10]=m*j+p*k+g*ne+v*Re,s[14]=m*ce+p*Ae+g*pe+v*Ne,s[3]=y*P+x*q+_*Y+w*Z,s[7]=y*U+x*M+_*oe+w*Ee,s[11]=y*j+x*k+_*ne+w*Re,s[15]=y*ce+x*Ae+_*pe+w*Ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-i*c*d-s*a*h+r*c*h+i*a*f-r*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-i*o*f+i*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+r*o*f+s*a*u-r*c*u)+e[15]*(-i*a*u-t*l*d+t*a*h+i*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],p=e[13],g=e[14],v=e[15],y=d*g*c-p*h*c+p*l*f-a*g*f-d*l*v+a*h*v,x=m*h*c-u*g*c-m*l*f+o*g*f+u*l*v-o*h*v,_=u*p*c-m*d*c+m*a*f-o*p*f-u*a*v+o*d*v,w=m*d*l-u*p*l-m*a*h+o*p*h+u*a*g-o*d*g,P=t*y+r*x+i*_+s*w;if(0===P)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/P;return e[0]=y*U,e[1]=(p*h*s-d*g*s-p*i*f+r*g*f+d*i*v-r*h*v)*U,e[2]=(a*g*s-p*l*s+p*i*c-r*g*c-a*i*v+r*l*v)*U,e[3]=(d*l*s-a*h*s-d*i*c+r*h*c+a*i*f-r*l*f)*U,e[4]=x*U,e[5]=(u*g*s-m*h*s+m*i*f-t*g*f-u*i*v+t*h*v)*U,e[6]=(m*l*s-o*g*s-m*i*c+t*g*c+o*i*v-t*l*v)*U,e[7]=(o*h*s-u*l*s+u*i*c-t*h*c-o*i*f+t*l*f)*U,e[8]=_*U,e[9]=(m*d*s-u*p*s-m*r*f+t*p*f+u*r*v-t*d*v)*U,e[10]=(o*p*s-m*a*s+m*r*c-t*p*c-o*r*v+t*a*v)*U,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*f-t*a*f)*U,e[12]=w*U,e[13]=(u*p*i-m*d*i+m*r*h-t*p*h-u*r*g+t*d*g)*U,e[14]=(m*a*i-o*p*i-m*r*l+t*p*l+o*r*g-t*a*g)*U,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*h+t*a*h)*U,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,m=s*d,p=o*u,g=o*d,v=a*d,y=l*c,x=l*u,_=l*d,w=r.x,P=r.y,U=r.z;return i[0]=(1-(p+v))*w,i[1]=(f+_)*w,i[2]=(m-x)*w,i[3]=0,i[4]=(f-_)*P,i[5]=(1-(h+v))*P,i[6]=(g+y)*P,i[7]=0,i[8]=(m+x)*U,i[9]=(g-y)*U,i[10]=(1-(h+p))*U,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=ac.set(i[0],i[1],i[2]).length();const o=ac.set(i[4],i[5],i[6]).length(),a=ac.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ki.copy(this);const c=1/s,u=1/o,d=1/a;return Ki.elements[0]*=c,Ki.elements[1]*=c,Ki.elements[2]*=c,Ki.elements[4]*=u,Ki.elements[5]*=u,Ki.elements[6]*=u,Ki.elements[8]*=d,Ki.elements[9]*=d,Ki.elements[10]*=d,t.setFromRotationMatrix(Ki),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(o-s),d=(t+e)*l,h=(r+i)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}rt.prototype.isMatrix4=!0;const ac=new C,Ki=new rt,bV=new C(0,0,0),MV=new C(1,1,1),Po=new C,If=new C,mi=new C,KC=new rt,eT=new Or;class Ca{constructor(e=0,t=0,r=0,i=Ca.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Yn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Yn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Yn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Yn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Yn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return KC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(KC,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return eT.setFromEuler(this),this.setFromQuaternion(eT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ca.prototype.isEuler=!0,Ca.DefaultOrder="XYZ",Ca.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Lv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let EV=0;const tT=new C,lc=new Or,Ys=new rt,Pf=new C,Ku=new C,SV=new C,CV=new Or,nT=new C(1,0,0),rT=new C(0,1,0),iT=new C(0,0,1),TV={type:"added"},sT={type:"removed"};class hn extends ya{constructor(){super(),Object.defineProperty(this,"id",{value:EV++}),this.uuid=fi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DefaultUp.clone();const e=new C,t=new Ca,r=new Or,i=new C(1,1,1);t._onChange(function s(){r.setFromEuler(t,!1)}),r._onChange(function o(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new rt},normalMatrix:{value:new _r}}),this.matrix=new rt,this.matrixWorld=new rt,this.matrixAutoUpdate=hn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Lv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lc.setFromAxisAngle(e,t),this.quaternion.multiply(lc),this}rotateOnWorldAxis(e,t){return lc.setFromAxisAngle(e,t),this.quaternion.premultiply(lc),this}rotateX(e){return this.rotateOnAxis(nT,e)}rotateY(e){return this.rotateOnAxis(rT,e)}rotateZ(e){return this.rotateOnAxis(iT,e)}translateOnAxis(e,t){return tT.copy(e).applyQuaternion(this.quaternion),this.position.add(tT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nT,e)}translateY(e){return this.translateOnAxis(rT,e)}translateZ(e){return this.translateOnAxis(iT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ys.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Pf.copy(e):Pf.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ku.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ys.lookAt(Ku,Pf,this.up):Ys.lookAt(Pf,Ku,this.up),this.quaternion.setFromRotationMatrix(Ys),i&&(Ys.extractRotation(i.matrixWorld),lc.setFromRotationMatrix(Ys),this.quaternion.premultiply(lc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(TV)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(sT)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(sT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ys.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ys.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ys),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ku,e,SV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ku,CV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++)i.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),m.length>0&&(r.nodes=m)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}hn.DefaultUp=new C(0,1,0),hn.DefaultMatrixAutoUpdate=!0,hn.prototype.isObject3D=!0;const es=new C,Zs=new C,Ov=new C,Js=new C,cc=new C,uc=new C,oT=new C,Fv=new C,Nv=new C,kv=new C;class ir{constructor(e=new C,t=new C,r=new C){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),es.subVectors(e,t),i.cross(es);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){es.subVectors(i,t),Zs.subVectors(r,t),Ov.subVectors(e,t);const o=es.dot(es),a=es.dot(Zs),l=es.dot(Ov),c=Zs.dot(Zs),u=Zs.dot(Ov),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Js),Js.x>=0&&Js.y>=0&&Js.x+Js.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Js),l.set(0,0),l.addScaledVector(s,Js.x),l.addScaledVector(o,Js.y),l.addScaledVector(a,Js.z),l}static isFrontFacing(e,t,r,i){return es.subVectors(r,t),Zs.subVectors(e,t),es.cross(Zs).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return es.subVectors(this.c,this.b),Zs.subVectors(this.a,this.b),.5*es.cross(Zs).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ir.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ir.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return ir.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ir.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ir.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;cc.subVectors(i,r),uc.subVectors(s,r),Fv.subVectors(e,r);const l=cc.dot(Fv),c=uc.dot(Fv);if(l<=0&&c<=0)return t.copy(r);Nv.subVectors(e,i);const u=cc.dot(Nv),d=uc.dot(Nv);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(cc,o);kv.subVectors(e,s);const f=cc.dot(kv),m=uc.dot(kv);if(m>=0&&f<=m)return t.copy(s);const p=f*c-l*m;if(p<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(r).addScaledVector(uc,a);const g=u*m-f*d;if(g<=0&&d-u>=0&&f-m>=0)return oT.subVectors(s,i),a=(d-u)/(d-u+(f-m)),t.copy(i).addScaledVector(oT,a);const v=1/(g+p+h);return o=p*v,a=h*v,t.copy(r).addScaledVector(cc,o).addScaledVector(uc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let DV=0;class sr extends ya{constructor(){super(),Object.defineProperty(this,"id",{value:DV++}),this.uuid=fi(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}sr.prototype.isMaterial=!0,sr.fromType=function(){return null};class Lo extends sr{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Lo.prototype.isMeshBasicMaterial=!0;const or=new C,Lf=new Ce;class Sn{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=qu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new qe),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Ce),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new C),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new gn),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Lf.fromBufferAttribute(this,t),Lf.applyMatrix3(e),this.setXY(t,Lf.x,Lf.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)or.fromBufferAttribute(this,t),or.applyMatrix3(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)or.fromBufferAttribute(this,t),or.applyMatrix4(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)or.fromBufferAttribute(this,t),or.applyNormalMatrix(e),this.setXYZ(t,or.x,or.y,or.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)or.fromBufferAttribute(this,t),or.transformDirection(e),this.setXYZ(t,or.x,or.y,or.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==qu&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Sn.prototype.isBufferAttribute=!0;class aT extends Sn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class lT extends Sn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class AV extends Sn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class tt extends Sn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let RV=0;const Ii=new rt,Bv=new hn,dc=new C,gi=new Ri,ed=new Ri,xr=new C;class gt extends ya{constructor(){super(),Object.defineProperty(this,"id",{value:RV++}),this.uuid=fi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(YC(e)?lT:aT)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const s=(new _r).getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ii.makeRotationFromQuaternion(e),this.applyMatrix4(Ii),this}rotateX(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this}rotateY(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this}rotateZ(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this}translate(e,t,r){return Ii.makeTranslation(e,t,r),this.applyMatrix4(Ii),this}scale(e,t,r){return Ii.makeScale(e,t,r),this.applyMatrix4(Ii),this}lookAt(e){return Bv.lookAt(e),Bv.updateMatrix(),this.applyMatrix4(Bv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dc).negate(),this.translate(dc.x,dc.y,dc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new tt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)gi.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,gi.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,gi.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(gi.min),this.boundingBox.expandByPoint(gi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ea);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new C,1/0);if(e){const r=this.boundingSphere.center;if(gi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)ed.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(xr.addVectors(gi.min,ed.min),gi.expandByPoint(xr),xr.addVectors(gi.max,ed.max),gi.expandByPoint(xr)):(gi.expandByPoint(ed.min),gi.expandByPoint(ed.max));gi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xr.fromBufferAttribute(a,c),l&&(dc.fromBufferAttribute(e,c),xr.add(dc)),i=Math.max(i,r.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Sn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let q=0;q<a;q++)c[q]=new C,u[q]=new C;const d=new C,h=new C,f=new C,m=new Ce,p=new Ce,g=new Ce,v=new C,y=new C;function x(q,M,k){d.fromArray(i,3*q),h.fromArray(i,3*M),f.fromArray(i,3*k),m.fromArray(o,2*q),p.fromArray(o,2*M),g.fromArray(o,2*k),h.sub(d),f.sub(d),p.sub(m),g.sub(m);const Ae=1/(p.x*g.y-g.x*p.y);!isFinite(Ae)||(v.copy(h).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(Ae),y.copy(f).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(Ae),c[q].add(v),c[M].add(v),c[k].add(v),u[q].add(y),u[M].add(y),u[k].add(y))}let _=this.groups;0===_.length&&(_=[{start:0,count:r.length}]);for(let q=0,M=_.length;q<M;++q){const k=_[q],Ae=k.start;for(let oe=Ae,ne=Ae+k.count;oe<ne;oe+=3)x(r[oe+0],r[oe+1],r[oe+2])}const w=new C,P=new C,U=new C,j=new C;function ce(q){U.fromArray(s,3*q),j.copy(U);const M=c[q];w.copy(M),w.sub(U.multiplyScalar(U.dot(M))).normalize(),P.crossVectors(j,M);const Ae=P.dot(u[q])<0?-1:1;l[4*q]=w.x,l[4*q+1]=w.y,l[4*q+2]=w.z,l[4*q+3]=Ae}for(let q=0,M=_.length;q<M;++q){const k=_[q],Ae=k.start;for(let oe=Ae,ne=Ae+k.count;oe<ne;oe+=3)ce(r[oe+0]),ce(r[oe+1]),ce(r[oe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Sn(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new C,s=new C,o=new C,a=new C,l=new C,c=new C,u=new C,d=new C;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),p=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,p),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===e.attributes[i])continue;const o=r[i].array,a=e.attributes[i],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let p=0,g=l.length;p<g;p++){f=a.isInterleavedBufferAttribute?l[p]*a.data.stride+a.offset:l[p]*u;for(let v=0;v<u;v++)h[m++]=c[f++]}return new Sn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gt,r=this.index.array,i=this.attributes;for(const a in i){const c=e(i[a],r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r)e.data.attributes[l]=r[l].toJSON(e.data);const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i)this.setAttribute(c,i[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}gt.prototype.isBufferGeometry=!0;const cT=new rt,hc=new Sa,Uv=new Ea,Oo=new C,Fo=new C,No=new C,Hv=new C,Vv=new C,zv=new C,Of=new C,Ff=new C,Nf=new C,kf=new Ce,Bf=new Ce,Uf=new Ce,Gv=new C,Hf=new C;class wr extends hn{constructor(e=new gt,t=new Lo){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),Uv.copy(r.boundingSphere),Uv.applyMatrix4(s),!1===e.ray.intersectsSphere(Uv))||(cT.copy(s).invert(),hc.copy(e.ray).applyMatrix4(cT),null!==r.boundingBox&&!1===hc.intersectsBox(r.boundingBox)))return;let o;if(r.isBufferGeometry){const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,m=r.drawRange;if(null!==a)if(Array.isArray(i))for(let p=0,g=f.length;p<g;p++){const v=f[p],y=i[v.materialIndex];for(let w=Math.max(v.start,m.start),P=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));w<P;w+=3){const U=a.getX(w),j=a.getX(w+1),ce=a.getX(w+2);o=Vf(this,y,e,hc,l,c,u,d,h,U,j,ce),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);v<y;v+=3){const x=a.getX(v),_=a.getX(v+1),w=a.getX(v+2);o=Vf(this,i,e,hc,l,c,u,d,h,x,_,w),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==l)if(Array.isArray(i))for(let p=0,g=f.length;p<g;p++){const v=f[p],y=i[v.materialIndex];for(let w=Math.max(v.start,m.start),P=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));w<P;w+=3)o=Vf(this,y,e,hc,l,c,u,d,h,w,w+1,w+2),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);v<y;v+=3)o=Vf(this,i,e,hc,l,c,u,d,h,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Vf(n,e,t,r,i,s,o,a,l,c,u,d){Oo.fromBufferAttribute(i,c),Fo.fromBufferAttribute(i,u),No.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(s&&h){Of.set(0,0,0),Ff.set(0,0,0),Nf.set(0,0,0);for(let m=0,p=s.length;m<p;m++){const g=h[m],v=s[m];0!==g&&(Hv.fromBufferAttribute(v,c),Vv.fromBufferAttribute(v,u),zv.fromBufferAttribute(v,d),o?(Of.addScaledVector(Hv,g),Ff.addScaledVector(Vv,g),Nf.addScaledVector(zv,g)):(Of.addScaledVector(Hv.sub(Oo),g),Ff.addScaledVector(Vv.sub(Fo),g),Nf.addScaledVector(zv.sub(No),g)))}Oo.add(Of),Fo.add(Ff),No.add(Nf)}n.isSkinnedMesh&&(n.boneTransform(c,Oo),n.boneTransform(u,Fo),n.boneTransform(d,No));const f=function IV(n,e,t,r,i,s,o,a){let l;if(l=1===e.side?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,2!==e.side,a),null===l)return null;Hf.copy(a),Hf.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Hf);return c<t.near||c>t.far?null:{distance:c,point:Hf.clone(),object:n}}(n,e,t,r,Oo,Fo,No,Gv);if(f){a&&(kf.fromBufferAttribute(a,c),Bf.fromBufferAttribute(a,u),Uf.fromBufferAttribute(a,d),f.uv=ir.getUV(Gv,Oo,Fo,No,kf,Bf,Uf,new Ce)),l&&(kf.fromBufferAttribute(l,c),Bf.fromBufferAttribute(l,u),Uf.fromBufferAttribute(l,d),f.uv2=ir.getUV(Gv,Oo,Fo,No,kf,Bf,Uf,new Ce));const m={a:c,b:u,c:d,normal:new C,materialIndex:0};ir.getNormal(Oo,Fo,No,m.normal),f.face=m}return f}wr.prototype.isMesh=!0;class Ta extends gt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function m(p,g,v,y,x,_,w,P,U,j,ce){const q=_/U,M=w/j,k=_/2,Ae=w/2,Y=P/2,oe=U+1,ne=j+1;let pe=0,Z=0;const Ee=new C;for(let Re=0;Re<ne;Re++){const Ne=Re*M-Ae;for(let Pe=0;Pe<oe;Pe++)Ee[p]=(Pe*q-k)*y,Ee[g]=Ne*x,Ee[v]=Y,c.push(Ee.x,Ee.y,Ee.z),Ee[p]=0,Ee[g]=0,Ee[v]=P>0?1:-1,u.push(Ee.x,Ee.y,Ee.z),d.push(Pe/U),d.push(1-Re/j),pe+=1}for(let Re=0;Re<j;Re++)for(let Ne=0;Ne<U;Ne++){const ut=h+Ne+oe*(Re+1),qt=h+(Ne+1)+oe*(Re+1),Ct=h+(Ne+1)+oe*Re;l.push(h+Ne+oe*Re,ut,Ct),l.push(ut,qt,Ct),Z+=6}a.addGroup(f,Z,ce),f+=Z,h+=pe}m("z","y","x",-1,-1,r,t,e,o,s,0),m("z","y","x",1,-1,r,t,-e,o,s,1),m("x","z","y",1,1,e,r,t,i,o,2),m("x","z","y",1,-1,e,r,-t,i,o,3),m("x","y","z",1,-1,e,t,r,i,s,4),m("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new tt(c,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(d,2))}static fromJSON(e){return new Ta(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fc(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];e[t][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return e}function Fr(n){const e={};for(let t=0;t<n.length;t++){const r=fc(n[t]);for(const i in r)e[i]=r[i]}return e}const PV={clone:fc,merge:Fr};class ts extends sr{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;t.uniforms[i]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}ts.prototype.isShaderMaterial=!0;class zf extends hn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new rt,this.projectionMatrix=new rt,this.projectionMatrixInverse=new rt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}zf.prototype.isCamera=!0;class br extends zf{constructor(e=50,t=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Yu*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*va*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Yu*Math.atan(Math.tan(.5*va*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*va*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}br.prototype.isPerspectiveCamera=!0;class Wv extends hn{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const i=new br(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new C(1,0,0)),this.add(i);const s=new br(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new C(-1,0,0)),this.add(s);const o=new br(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new C(0,1,0)),this.add(o);const a=new br(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new C(0,-1,0)),this.add(a);const l=new br(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new C(0,0,1)),this.add(l);const c=new br(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.outputEncoding,h=e.toneMapping,f=e.xr.enabled;e.outputEncoding=js,e.toneMapping=0,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.outputEncoding=d,e.toneMapping=h,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}}class td extends ri{constructor(e,t,r,i,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,i,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}td.prototype.isCubeTexture=!0;class uT extends pi{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1};this.texture=new td([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:rr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Ta(5,5,5),s=new ts({name:"CubemapFromEquirect",uniforms:fc(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new wr(i,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=rr),new Wv(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}uT.prototype.isWebGLCubeRenderTarget=!0;const jv=new C,FV=new C,NV=new _r;class Qs{constructor(e=new C(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=jv.subVectors(r,t).cross(FV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(jv),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||NV.getNormalMatrix(e),i=this.coplanarPoint(jv).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Qs.prototype.isPlane=!0;const gc=new Ea,Gf=new C;class Wf{constructor(e=new Qs,t=new Qs,r=new Qs,i=new Qs,s=new Qs,o=new Qs){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],m=r[10],p=r[11],g=r[12],v=r[13],y=r[14],x=r[15];return t[0].setComponents(a-i,d-l,p-h,x-g).normalize(),t[1].setComponents(a+i,d+l,p+h,x+g).normalize(),t[2].setComponents(a+s,d+c,p+f,x+v).normalize(),t[3].setComponents(a-s,d-c,p-f,x-v).normalize(),t[4].setComponents(a-o,d-u,p-m,x-y).normalize(),t[5].setComponents(a+o,d+u,p+m,x+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),gc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSprite(e){return gc.center.set(0,0,0),gc.radius=.7071067811865476,gc.applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Gf.x=i.normal.x>0?e.max.x:e.min.x,Gf.y=i.normal.y>0?e.max.y:e.min.y,Gf.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Gf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function dT(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function kV(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);return void((!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);void 0===d?r.set(c,function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let m;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)m=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(d instanceof Int16Array)m=5122;else if(d instanceof Uint32Array)m=5125;else if(d instanceof Int32Array)m=5124;else if(d instanceof Int8Array)m=5120;else if(d instanceof Uint8Array)m=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);m=5121}return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class nd extends gt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],p=[],g=[];for(let v=0;v<u;v++){const y=v*h-o;for(let x=0;x<c;x++)m.push(x*d-s,-y,0),p.push(0,0,1),g.push(x/a),g.push(1-v/l)}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const _=y+c*(v+1),w=y+1+c*(v+1),P=y+1+c*v;f.push(y+c*v,_,P),f.push(_,w,P)}this.setIndex(f),this.setAttribute("position",new tt(m,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(g,2))}static fromJSON(e){return new nd(e.width,e.height,e.widthSegments,e.heightSegments)}}const Qt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ge={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _r},uv2Transform:{value:new _r},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _r}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _r}}},ws={basic:{uniforms:Fr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Qt.meshbasic_vert,fragmentShader:Qt.meshbasic_frag},lambert:{uniforms:Fr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.fog,Ge.lights,{emissive:{value:new qe(0)}}]),vertexShader:Qt.meshlambert_vert,fragmentShader:Qt.meshlambert_frag},phong:{uniforms:Fr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:Qt.meshphong_vert,fragmentShader:Qt.meshphong_frag},standard:{uniforms:Fr([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},toon:{uniforms:Fr([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new qe(0)}}]),vertexShader:Qt.meshtoon_vert,fragmentShader:Qt.meshtoon_frag},matcap:{uniforms:Fr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Qt.meshmatcap_vert,fragmentShader:Qt.meshmatcap_frag},points:{uniforms:Fr([Ge.points,Ge.fog]),vertexShader:Qt.points_vert,fragmentShader:Qt.points_frag},dashed:{uniforms:Fr([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qt.linedashed_vert,fragmentShader:Qt.linedashed_frag},depth:{uniforms:Fr([Ge.common,Ge.displacementmap]),vertexShader:Qt.depth_vert,fragmentShader:Qt.depth_frag},normal:{uniforms:Fr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Qt.meshnormal_vert,fragmentShader:Qt.meshnormal_frag},sprite:{uniforms:Fr([Ge.sprite,Ge.fog]),vertexShader:Qt.sprite_vert,fragmentShader:Qt.sprite_frag},background:{uniforms:{uvTransform:{value:new _r},t2D:{value:null}},vertexShader:Qt.background_vert,fragmentShader:Qt.background_frag},cube:{uniforms:Fr([Ge.envmap,{opacity:{value:1}}]),vertexShader:Qt.cube_vert,fragmentShader:Qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qt.equirect_vert,fragmentShader:Qt.equirect_frag},distanceRGBA:{uniforms:Fr([Ge.common,Ge.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qt.distanceRGBA_vert,fragmentShader:Qt.distanceRGBA_frag},shadow:{uniforms:Fr([Ge.lights,Ge.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:Qt.shadow_vert,fragmentShader:Qt.shadow_frag}};function L4(n,e,t,r,i,s){const o=new qe(0);let l,c,a=!0===i?0:1,u=null,d=0,h=null;function m(p,g){t.buffers.color.setClear(p.r,p.g,p.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(p,g=1){o.set(p),a=g,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,m(o,a)},render:function f(p,g){let v=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=e.get(y));const x=n.xr,_=x.getSession&&x.getSession();_&&"additive"===_.environmentBlendMode&&(y=null),null===y?m(o,a):y&&y.isColor&&(m(y,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===c&&(c=new wr(new Ta(1,1,1),new ts({name:"BackgroundCubeMaterial",uniforms:fc(ws.cube.uniforms),vertexShader:ws.cube.vertexShader,fragmentShader:ws.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,P,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(u!==y||d!==y.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=y,d=y.version,h=n.toneMapping),p.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new wr(new nd(2,2),new ts({name:"BackgroundMaterial",uniforms:fc(ws.background.uniforms),vertexShader:ws.background.vertexShader,fragmentShader:ws.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||d!==y.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,d=y.version,h=n.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null))}}}function O4(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(Y){return r.isWebGL2?n.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function m(Y){return r.isWebGL2?n.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function g(Y){const oe=[],ne=[],pe=[];for(let Z=0;Z<i;Z++)oe[Z]=0,ne[Z]=0,pe[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:oe,enabledAttributes:ne,attributeDivisors:pe,object:Y,attributes:{},index:null}}function x(){const Y=c.newAttributes;for(let oe=0,ne=Y.length;oe<ne;oe++)Y[oe]=0}function _(Y){w(Y,0)}function w(Y,oe){const pe=c.enabledAttributes,Z=c.attributeDivisors;c.newAttributes[Y]=1,0===pe[Y]&&(n.enableVertexAttribArray(Y),pe[Y]=1),Z[Y]!==oe&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,oe),Z[Y]=oe)}function P(){const Y=c.newAttributes,oe=c.enabledAttributes;for(let ne=0,pe=oe.length;ne<pe;ne++)oe[ne]!==Y[ne]&&(n.disableVertexAttribArray(ne),oe[ne]=0)}function U(Y,oe,ne,pe,Z,Ee){!0!==r.isWebGL2||5124!==ne&&5125!==ne?n.vertexAttribPointer(Y,oe,ne,pe,Z,Ee):n.vertexAttribIPointer(Y,oe,ne,Z,Ee)}function k(){Ae(),u=!0,c!==l&&(c=l,f(c.object))}function Ae(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(Y,oe,ne,pe,Z){let Ee=!1;if(o){const Re=function p(Y,oe,ne){const pe=!0===ne.wireframe;let Z=a[Y.id];void 0===Z&&(Z={},a[Y.id]=Z);let Ee=Z[oe.id];void 0===Ee&&(Ee={},Z[oe.id]=Ee);let Re=Ee[pe];return void 0===Re&&(Re=g(function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),Ee[pe]=Re),Re}(pe,ne,oe);c!==Re&&(c=Re,f(c.object)),Ee=function v(Y,oe){const ne=c.attributes,pe=Y.attributes;let Z=0;for(const Ee in pe){const Re=ne[Ee],Ne=pe[Ee];if(void 0===Re||Re.attribute!==Ne||Re.data!==Ne.data)return!0;Z++}return c.attributesNum!==Z||c.index!==oe}(pe,Z),Ee&&function y(Y,oe){const ne={},pe=Y.attributes;let Z=0;for(const Ee in pe){const Re=pe[Ee],Ne={};Ne.attribute=Re,Re.data&&(Ne.data=Re.data),ne[Ee]=Ne,Z++}c.attributes=ne,c.attributesNum=Z,c.index=oe}(pe,Z)}else{const Re=!0===oe.wireframe;(c.geometry!==pe.id||c.program!==ne.id||c.wireframe!==Re)&&(c.geometry=pe.id,c.program=ne.id,c.wireframe=Re,Ee=!0)}!0===Y.isInstancedMesh&&(Ee=!0),null!==Z&&t.update(Z,34963),(Ee||u)&&(u=!1,function j(Y,oe,ne,pe){if(!1===r.isWebGL2&&(Y.isInstancedMesh||pe.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const Z=pe.attributes,Ee=ne.getAttributes(),Re=oe.defaultAttributeValues;for(const Ne in Ee){const Pe=Ee[Ne];if(Pe.location>=0){let ut=Z[Ne];if(void 0===ut&&("instanceMatrix"===Ne&&Y.instanceMatrix&&(ut=Y.instanceMatrix),"instanceColor"===Ne&&Y.instanceColor&&(ut=Y.instanceColor)),void 0!==ut){const qt=ut.normalized,Ct=ut.itemSize,xe=t.get(ut);if(void 0===xe)continue;const fn=xe.buffer,Ut=xe.type,Ht=xe.bytesPerElement;if(ut.isInterleavedBufferAttribute){const He=ut.data,Kt=He.stride,ve=ut.offset;if(He.isInstancedInterleavedBuffer){for(let Se=0;Se<Pe.locationSize;Se++)w(Pe.location+Se,He.meshPerAttribute);!0!==Y.isInstancedMesh&&void 0===pe._maxInstanceCount&&(pe._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Se=0;Se<Pe.locationSize;Se++)_(Pe.location+Se);n.bindBuffer(34962,fn);for(let Se=0;Se<Pe.locationSize;Se++)U(Pe.location+Se,Ct/Pe.locationSize,Ut,qt,Kt*Ht,(ve+Ct/Pe.locationSize*Se)*Ht)}else{if(ut.isInstancedBufferAttribute){for(let He=0;He<Pe.locationSize;He++)w(Pe.location+He,ut.meshPerAttribute);!0!==Y.isInstancedMesh&&void 0===pe._maxInstanceCount&&(pe._maxInstanceCount=ut.meshPerAttribute*ut.count)}else for(let He=0;He<Pe.locationSize;He++)_(Pe.location+He);n.bindBuffer(34962,fn);for(let He=0;He<Pe.locationSize;He++)U(Pe.location+He,Ct/Pe.locationSize,Ut,qt,Ct*Ht,Ct/Pe.locationSize*He*Ht)}}else if(void 0!==Re){const qt=Re[Ne];if(void 0!==qt)switch(qt.length){case 2:n.vertexAttrib2fv(Pe.location,qt);break;case 3:n.vertexAttrib3fv(Pe.location,qt);break;case 4:n.vertexAttrib4fv(Pe.location,qt);break;default:n.vertexAttrib1fv(Pe.location,qt)}}}}P()}(Y,oe,ne,pe),null!==Z&&n.bindBuffer(34963,t.get(Z).buffer))},reset:k,resetDefaultState:Ae,dispose:function ce(){k();for(const Y in a){const oe=a[Y];for(const ne in oe){const pe=oe[ne];for(const Z in pe)m(pe[Z].object),delete pe[Z];delete oe[ne]}delete a[Y]}},releaseStatesOfGeometry:function q(Y){if(void 0===a[Y.id])return;const oe=a[Y.id];for(const ne in oe){const pe=oe[ne];for(const Z in pe)m(pe[Z].object),delete pe[Z];delete oe[ne]}delete a[Y.id]},releaseStatesOfProgram:function M(Y){for(const oe in a){const ne=a[oe];if(void 0===ne[Y.id])continue;const pe=ne[Y.id];for(const Z in pe)m(pe[Z].object),delete pe[Z];delete ne[Y.id]}},initAttributes:x,enableAttribute:_,disableUnusedAttributes:P}}function F4(n,e,t,r){const i=r.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function N4(n,e,t){let r;function s(U){if("highp"===U){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";U="mediump"}return"mediump"===U&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),m=n.getParameter(34076),p=n.getParameter(34921),g=n.getParameter(36347),v=n.getParameter(36348),y=n.getParameter(36349),x=h>0,_=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const U=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:_,floatVertexTextures:x&&_,maxSamples:o?n.getParameter(36183):0}}function k4(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Qs,a=new _r,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,m){const p=null!==d?d.length:0;let g=null;if(0!==p){if(g=l.value,!0!==m||null===g){const v=f+4*p,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===g||g.length<v)&&(g=new Float32Array(v));for(let x=0,_=f;x!==p;++x,_+=4)o.copy(d[x]).applyMatrix4(y,a),o.normal.toArray(g,_),g[_+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=0!==d.length||h||0!==r||i;return i=h,t=u(d,f,0),r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,p=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!i||null===m||0===m.length||s&&!g)s?u(null):c();else{const y=s?0:r,x=4*y;let _=v.clippingState||null;l.value=_,_=u(m,h,x,f);for(let w=0;w!==x;++w)_[w]=t[w];v.clippingState=_,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}}}function B4(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function r(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new uT(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}ws.physical={uniforms:Fr([ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag};class jf extends zf{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}jf.prototype.isOrthographicCamera=!0;const hT=[.125,.215,.35,.446,.526,.582],$v=new jf,fT=new qe;let qv=null;const Aa=(1+Math.sqrt(5))/2,vc=1/Aa,pT=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Aa,vc),new C(0,Aa,-vc),new C(vc,0,Aa),new C(-vc,0,Aa),new C(Aa,vc,0),new C(-Aa,vc,0)];class mT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){qv=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=vT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=yT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qv),e.scissorTest=!1,$f(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),qv=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:rr,minFilter:rr,generateMipmaps:!1,type:Yl,format:Ai,encoding:js,depthBuffer:!1},i=gT(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=gT(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function U4(n){const e=[],t=[],r=[];let i=n;const s=n-4+1+hT.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-4?l=hT[o-n+4-1]:0===o&&(l=0),r.push(l);const c=1/(a-1),u=-c/2,d=1+c/2,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*f),x=new Float32Array(g*m*f),_=new Float32Array(v*m*f);for(let P=0;P<f;P++){const U=P%3*2/3-1,j=P>2?0:-1;y.set([U,j,0,U+2/3,j,0,U+2/3,j+1,0,U,j,0,U+2/3,j+1,0,U,j+1,0],p*m*P),x.set(h,g*m*P),_.set([P,P,P,P,P,P],v*m*P)}const w=new gt;w.setAttribute("position",new Sn(y,p)),w.setAttribute("uv",new Sn(x,g)),w.setAttribute("faceIndex",new Sn(_,v)),e.push(w),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(s)),this._blurMaterial=function H4(n,e,t){const r=new Float32Array(20),i=new C(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return i}_compileMaterial(e){const t=new wr(this._lodPlanes[0],e);this._renderer.compile(t,$v)}_sceneToCubeUV(e,t,r,i){const a=new br(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(fT),u.toneMapping=0,u.autoClear=!1;const f=new Lo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),m=new wr(new Ta,f);let p=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,p=!0):(f.color.copy(fT),p=!0);for(let v=0;v<6;v++){const y=v%3;0===y?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):1===y?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const x=this._cubeSize;$f(i,y*x,v>2?x:0,x,x),u.setRenderTarget(i),p&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=vT()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=yT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new wr(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;$f(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,$v)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,s,pT[(i-1)%pT.length])}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new wr(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,p=s/m,g=isFinite(s)?1+Math.floor(3*p):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const v=[];let y=0;for(let U=0;U<20;++U){const j=U/p,ce=Math.exp(-j*j/2);v.push(ce),0===U?y+=ce:U<g&&(y+=2*ce)}for(let U=0;U<v.length;U++)v[U]=v[U]/y;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=m,h.mipInt.value=x-r;const _=this._sizeLods[i];$f(t,3*_*(i>x-4?i-x+4:0),4*(this._cubeSize-_),3*_,2*_),l.setRenderTarget(t),l.render(d,$v)}}function gT(n,e,t){const r=new pi(n,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function $f(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function yT(){return new ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function vT(){return new ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function V4(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function r(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new mT(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function i(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new mT(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function z4(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function G4(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,m=d.attributes.position;let p=0;if(null!==f){const y=f.array;p=f.version;for(let x=0,_=y.length;x<_;x+=3){const w=y[x+0],P=y[x+1],U=y[x+2];h.push(w,P,P,U,U,w)}}else{p=m.version;for(let x=0,_=m.array.length/3-1;x<_;x+=3){const w=x+0,P=x+1,U=x+2;h.push(w,P,P,U,U,w)}}const g=new(YC(h)?lT:aT)(h,1);g.version=p;const v=s.get(d);v&&e.remove(v),s.set(d,g)}return{get:function a(d,h){return!0===i[h.id]||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const m in h)e.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const p=f[m];for(let g=0,v=p.length;g<v;g++)e.update(p[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function W4(n,e,t,r){const i=r.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,m){if(0===m)return;let p,g;if(i)p=n,g="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===p)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,f,a,h*l,m),t.update(f,s,m)}}function j4(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function $4(n,e){return n[0]-e[0]}function q4(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Yv(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function X4(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new gn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==m?m.length:0;let g=s.get(u);if(void 0===g||g.count!==p){let oe=function(){Ae.dispose(),s.delete(u),u.removeEventListener("dispose",oe)};void 0!==g&&g.texture.dispose();const x=void 0!==u.morphAttributes.position,_=void 0!==u.morphAttributes.normal,w=void 0!==u.morphAttributes.color,P=u.morphAttributes.position||[],U=u.morphAttributes.normal||[],j=u.morphAttributes.color||[];let ce=0;!0===x&&(ce=1),!0===_&&(ce=2),!0===w&&(ce=3);let q=u.attributes.position.count*ce,M=1;q>e.maxTextureSize&&(M=Math.ceil(q/e.maxTextureSize),q=e.maxTextureSize);const k=new Float32Array(q*M*4*p),Ae=new Sf(k,q,M,p);Ae.type=Do,Ae.needsUpdate=!0;const Y=4*ce;for(let ne=0;ne<p;ne++){const pe=P[ne],Z=U[ne],Ee=j[ne],Re=q*M*4*ne;for(let Ne=0;Ne<pe.count;Ne++){const Pe=Ne*Y;!0===x&&(o.fromBufferAttribute(pe,Ne),!0===pe.normalized&&Yv(o,pe),k[Re+Pe+0]=o.x,k[Re+Pe+1]=o.y,k[Re+Pe+2]=o.z,k[Re+Pe+3]=0),!0===_&&(o.fromBufferAttribute(Z,Ne),!0===Z.normalized&&Yv(o,Z),k[Re+Pe+4]=o.x,k[Re+Pe+5]=o.y,k[Re+Pe+6]=o.z,k[Re+Pe+7]=0),!0===w&&(o.fromBufferAttribute(Ee,Ne),!0===Ee.normalized&&Yv(o,Ee),k[Re+Pe+8]=o.x,k[Re+Pe+9]=o.y,k[Re+Pe+10]=o.z,k[Re+Pe+11]=4===Ee.itemSize?o.w:1)}}g={count:p,texture:Ae,size:new Ce(q,M)},s.set(u,g),u.addEventListener("dispose",oe)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const m=void 0===f?0:f.length;let p=r[u.id];if(void 0===p||p.length!==m){p=[];for(let _=0;_<m;_++)p[_]=[_,0];r[u.id]=p}for(let _=0;_<m;_++){const w=p[_];w[0]=_,w[1]=f[_]}p.sort(q4);for(let _=0;_<8;_++)_<m&&p[_][1]?(a[_][0]=p[_][0],a[_][1]=p[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort($4);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let _=0;_<8;_++){const w=a[_],P=w[0],U=w[1];P!==Number.MAX_SAFE_INTEGER&&U?(g&&u.getAttribute("morphTarget"+_)!==g[P]&&u.setAttribute("morphTarget"+_,g[P]),v&&u.getAttribute("morphNormal"+_)!==v[P]&&u.setAttribute("morphNormal"+_,v[P]),i[_]=U,y+=U):(g&&!0===u.hasAttribute("morphTarget"+_)&&u.deleteAttribute("morphTarget"+_),v&&!0===u.hasAttribute("morphNormal"+_)&&u.deleteAttribute("morphNormal"+_),i[_]=0)}const x=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function Y4(n,e,t,r){let i=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=r.render.frame,d=e.get(l,l.geometry);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){i=new WeakMap}}}const _T=new ri,xT=new Sf,wT=new Sv,bT=new td,MT=[],ET=[],ST=new Float32Array(16),CT=new Float32Array(9),TT=new Float32Array(4);function _c(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=MT[i];if(void 0===s&&(s=new Float32Array(i),MT[i]=s),0!==e){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Xr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Nr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function qf(n,e){let t=ET[e];void 0===t&&(t=new Int32Array(e),ET[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Z4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function J4(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xr(t,e))return;n.uniform2fv(this.addr,e),Nr(t,e)}}function Q4(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xr(t,e))return;n.uniform3fv(this.addr,e),Nr(t,e)}}function K4(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xr(t,e))return;n.uniform4fv(this.addr,e),Nr(t,e)}}function eG(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Xr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Nr(t,e)}else{if(Xr(t,r))return;TT.set(r),n.uniformMatrix2fv(this.addr,!1,TT),Nr(t,r)}}function tG(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Xr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Nr(t,e)}else{if(Xr(t,r))return;CT.set(r),n.uniformMatrix3fv(this.addr,!1,CT),Nr(t,r)}}function nG(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Xr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Nr(t,e)}else{if(Xr(t,r))return;ST.set(r),n.uniformMatrix4fv(this.addr,!1,ST),Nr(t,r)}}function rG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function iG(n,e){const t=this.cache;Xr(t,e)||(n.uniform2iv(this.addr,e),Nr(t,e))}function sG(n,e){const t=this.cache;Xr(t,e)||(n.uniform3iv(this.addr,e),Nr(t,e))}function oG(n,e){const t=this.cache;Xr(t,e)||(n.uniform4iv(this.addr,e),Nr(t,e))}function aG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function lG(n,e){const t=this.cache;Xr(t,e)||(n.uniform2uiv(this.addr,e),Nr(t,e))}function cG(n,e){const t=this.cache;Xr(t,e)||(n.uniform3uiv(this.addr,e),Nr(t,e))}function uG(n,e){const t=this.cache;Xr(t,e)||(n.uniform4uiv(this.addr,e),Nr(t,e))}function dG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||_T,i)}function hG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||wT,i)}function fG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||bT,i)}function pG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||xT,i)}function gG(n,e){n.uniform1fv(this.addr,e)}function yG(n,e){const t=_c(e,this.size,2);n.uniform2fv(this.addr,t)}function vG(n,e){const t=_c(e,this.size,3);n.uniform3fv(this.addr,t)}function _G(n,e){const t=_c(e,this.size,4);n.uniform4fv(this.addr,t)}function xG(n,e){const t=_c(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function wG(n,e){const t=_c(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bG(n,e){const t=_c(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function MG(n,e){n.uniform1iv(this.addr,e)}function EG(n,e){n.uniform2iv(this.addr,e)}function SG(n,e){n.uniform3iv(this.addr,e)}function CG(n,e){n.uniform4iv(this.addr,e)}function TG(n,e){n.uniform1uiv(this.addr,e)}function DG(n,e){n.uniform2uiv(this.addr,e)}function AG(n,e){n.uniform3uiv(this.addr,e)}function RG(n,e){n.uniform4uiv(this.addr,e)}function IG(n,e,t){const r=e.length,i=qf(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||_T,i[s])}function PG(n,e,t){const r=e.length,i=qf(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||wT,i[s])}function LG(n,e,t){const r=e.length,i=qf(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||bT,i[s])}function OG(n,e,t){const r=e.length,i=qf(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||xT,i[s])}function NG(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function mG(n){switch(n){case 5126:return Z4;case 35664:return J4;case 35665:return Q4;case 35666:return K4;case 35674:return eG;case 35675:return tG;case 35676:return nG;case 5124:case 35670:return rG;case 35667:case 35671:return iG;case 35668:case 35672:return sG;case 35669:case 35673:return oG;case 5125:return aG;case 36294:return lG;case 36295:return cG;case 36296:return uG;case 35678:case 36198:case 36298:case 36306:case 35682:return dG;case 35679:case 36299:case 36307:return hG;case 35680:case 36300:case 36308:case 36293:return fG;case 36289:case 36303:case 36311:case 36292:return pG}}(e.type)}function DT(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function FG(n){switch(n){case 5126:return gG;case 35664:return yG;case 35665:return vG;case 35666:return _G;case 35674:return xG;case 35675:return wG;case 35676:return bG;case 5124:case 35670:return MG;case 35667:case 35671:return EG;case 35668:case 35672:return SG;case 35669:case 35673:return CG;case 5125:return TG;case 36294:return DG;case 36295:return AG;case 36296:return RG;case 35678:case 36198:case 36298:case 36306:case 35682:return IG;case 35679:case 36299:case 36307:return PG;case 35680:case 36300:case 36308:case 36293:return LG;case 36289:case 36303:case 36311:case 36292:return OG}}(e.type)}function AT(n){this.id=n,this.seq=[],this.map={}}DT.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Nr(e,n)},AT.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const Zv=/(\w+)(\])?(\[|\.)?/g;function RT(n,e){n.seq.push(e),n.map[e.id]=e}function kG(n,e,t){const r=n.name,i=r.length;for(Zv.lastIndex=0;;){const s=Zv.exec(r),o=Zv.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===i){RT(t,void 0===c?new NG(a,n,e):new DT(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new AT(a),RT(t,d)),t=d}}}function ko(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r);kG(i,n.getUniformLocation(e,i.name),this)}}function IT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}ko.prototype.setValue=function(n,e,t,r){const i=this.map[e];void 0!==i&&i.setValue(n,t,r)},ko.prototype.setOptional=function(n,e,t){const r=e[t];void 0!==r&&this.setValue(n,t,r)},ko.upload=function(n,e,t,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,r)}},ko.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.id in e&&t.push(s)}return t};let BG=0;function PT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(i)[1]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function UG(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++)r.push(o+1+": "+t[o]);return r.join("\n")}(n.getShaderSource(e),s)}function VG(n,e){const t=function HG(n){switch(n){case js:return["Linear","( value )"];case On:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function zG(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rd(n){return""!==n}function LT(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $G=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jv(n){return n.replace($G,qG)}function qG(n,e){const t=Qt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Jv(t)}const XG=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,YG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function FT(n){return n.replace(YG,NT).replace(XG,ZG)}function ZG(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),NT(0,e,t,r)}function NT(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function kT(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function n5(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function JG(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function QG(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function KG(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function e5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function t5(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),f=t.isWebGL2?"":function GG(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rd).join("\n")}(t),m=function WG(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(s),p=i.createProgram();let g,v,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[m].filter(rd).join("\n"),g.length>0&&(g+="\n"),v=[f,m].filter(rd).join("\n"),v.length>0&&(v+="\n")):(g=[kT(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rd).join("\n"),v=[f,kT(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Qt.tonemapping_pars_fragment:"",0!==t.toneMapping?zG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Qt.encodings_pars_fragment,VG("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(rd).join("\n")),o=Jv(o),o=LT(o,t),o=OT(o,t),a=Jv(a),a=LT(a,t),a=OT(a,t),o=FT(o),a=FT(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+v+a,w=IT(i,35633,y+g+o),P=IT(i,35632,_);if(i.attachShader(p,w),i.attachShader(p,P),void 0!==t.index0AttributeName?i.bindAttribLocation(p,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),n.debug.checkShaderErrors){const ce=i.getProgramInfoLog(p).trim(),q=i.getShaderInfoLog(w).trim(),M=i.getShaderInfoLog(P).trim();let k=!0,Ae=!0;if(!1===i.getProgramParameter(p,35714)){k=!1;const Y=PT(i,w,"vertex"),oe=PT(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+ce+"\n"+Y+"\n"+oe)}else""!==ce?console.warn("THREE.WebGLProgram: Program Info Log:",ce):(""===q||""===M)&&(Ae=!1);Ae&&(this.diagnostics={runnable:k,programLog:ce,vertexShader:{log:q,prefix:g},fragmentShader:{log:M,prefix:v}})}let U,j;return i.deleteShader(w),i.deleteShader(P),this.getUniforms=function(){return void 0===U&&(U=new ko(i,p)),U},this.getAttributes=function(){return void 0===j&&(j=function jG(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(i,p)),j},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=BG++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=w,this.fragmentShader=P,this}let r5=0;class i5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new s5(e);t.set(e,r)}return t.get(e)}}class s5{constructor(e){this.id=r5++,this.code=e,this.usedTimes=0}}function o5(n,e,t,r,i,s,o){const a=new Lv,l=new i5,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.floatVertexTextures,f=i.maxVertexUniforms,m=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(M,k,Ae,Y,oe){const ne=Y.fog,pe=oe.geometry,Ee=(M.isMeshStandardMaterial?t:e).get(M.envMap||(M.isMeshStandardMaterial?Y.environment:null)),Re=Ee&&306===Ee.mapping?Ee.image.height:null,Ne=g[M.type],Pe=oe.isSkinnedMesh?function v(M){const Ae=M.skeleton.bones;if(h)return 1024;{const oe=Math.floor((f-20)/4),ne=Math.min(oe,Ae.length);return ne<Ae.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ae.length+" bones. This GPU supports "+ne+"."),0):ne}}(oe):0;null!==M.precision&&(p=i.getMaxPrecision(M.precision),p!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",p,"instead."));const ut=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,qt=void 0!==ut?ut.length:0;let xe,fn,Ut,Ht,Ct=0;if(void 0!==pe.morphAttributes.position&&(Ct=1),void 0!==pe.morphAttributes.normal&&(Ct=2),void 0!==pe.morphAttributes.color&&(Ct=3),Ne){const Fe=ws[Ne];xe=Fe.vertexShader,fn=Fe.fragmentShader}else xe=M.vertexShader,fn=M.fragmentShader,l.update(M),Ut=l.getVertexShaderID(M),Ht=l.getFragmentShaderID(M);const He=n.getRenderTarget(),ve=M.clearcoat>0;return{isWebGL2:u,shaderID:Ne,shaderName:M.type,vertexShader:xe,fragmentShader:fn,defines:M.defines,customVertexShaderID:Ut,customFragmentShaderID:Ht,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:p,instancing:!0===oe.isInstancedMesh,instancingColor:!0===oe.isInstancedMesh&&null!==oe.instanceColor,supportsVertexTextures:m,outputEncoding:null===He?n.outputEncoding:!0===He.isXRRenderTarget?He.texture.encoding:js,map:!!M.map,matcap:!!M.matcap,envMap:!!Ee,envMapMode:Ee&&Ee.mapping,envMapCubeUVHeight:Re,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:1===M.normalMapType,tangentSpaceNormalMap:0===M.normalMapType,decodeVideoTexture:!!M.map&&!0===M.map.isVideoTexture&&M.map.encoding===On,clearcoat:ve,clearcoatMap:ve&&!!M.clearcoatMap,clearcoatRoughnessMap:ve&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:ve&&!!M.clearcoatNormalMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:!1===M.transparent&&1===M.blending,alphaMap:!!M.alphaMap,alphaTest:M.alphaTest>0,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!pe.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!pe.attributes.color&&4===pe.attributes.color.itemSize,vertexUvs:!!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatMap||M.clearcoatRoughnessMap||M.clearcoatNormalMap||M.displacementMap||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheenColorMap||M.sheenRoughnessMap),uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap||!M.displacementMap),fog:!!ne,useFog:M.fog,fogExp2:ne&&ne.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===oe.isSkinnedMesh&&Pe>0,maxBones:Pe,useVertexTexture:h,morphTargets:void 0!==pe.morphAttributes.position,morphNormals:void 0!==pe.morphAttributes.normal,morphColors:void 0!==pe.morphAttributes.color,morphTargetsCount:qt,morphTextureStride:Ct,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&Ae.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,depthPacking:void 0!==M.depthPacking&&M.depthPacking,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}},getProgramCacheKey:function x(M){const k=[];if(M.shaderID?k.push(M.shaderID):(k.push(M.customVertexShaderID),k.push(M.customFragmentShaderID)),void 0!==M.defines)for(const Ae in M.defines)k.push(Ae),k.push(M.defines[Ae]);return!1===M.isRawShaderMaterial&&(function _(M,k){M.push(k.precision),M.push(k.outputEncoding),M.push(k.envMapMode),M.push(k.envMapCubeUVHeight),M.push(k.combine),M.push(k.vertexUvs),M.push(k.fogExp2),M.push(k.sizeAttenuation),M.push(k.maxBones),M.push(k.morphTargetsCount),M.push(k.morphAttributeCount),M.push(k.numDirLights),M.push(k.numPointLights),M.push(k.numSpotLights),M.push(k.numHemiLights),M.push(k.numRectAreaLights),M.push(k.numDirLightShadows),M.push(k.numPointLightShadows),M.push(k.numSpotLightShadows),M.push(k.shadowMapType),M.push(k.toneMapping),M.push(k.numClippingPlanes),M.push(k.numClipIntersection)}(k,M),function w(M,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.map&&a.enable(4),k.matcap&&a.enable(5),k.envMap&&a.enable(6),k.lightMap&&a.enable(7),k.aoMap&&a.enable(8),k.emissiveMap&&a.enable(9),k.bumpMap&&a.enable(10),k.normalMap&&a.enable(11),k.objectSpaceNormalMap&&a.enable(12),k.tangentSpaceNormalMap&&a.enable(13),k.clearcoat&&a.enable(14),k.clearcoatMap&&a.enable(15),k.clearcoatRoughnessMap&&a.enable(16),k.clearcoatNormalMap&&a.enable(17),k.displacementMap&&a.enable(18),k.specularMap&&a.enable(19),k.roughnessMap&&a.enable(20),k.metalnessMap&&a.enable(21),k.gradientMap&&a.enable(22),k.alphaMap&&a.enable(23),k.alphaTest&&a.enable(24),k.vertexColors&&a.enable(25),k.vertexAlphas&&a.enable(26),k.vertexUvs&&a.enable(27),k.vertexTangents&&a.enable(28),k.uvsVertexOnly&&a.enable(29),k.fog&&a.enable(30),M.push(a.mask),a.disableAll(),k.useFog&&a.enable(0),k.flatShading&&a.enable(1),k.logarithmicDepthBuffer&&a.enable(2),k.skinning&&a.enable(3),k.useVertexTexture&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.physicallyCorrectLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.depthPacking&&a.enable(13),k.dithering&&a.enable(14),k.specularIntensityMap&&a.enable(15),k.specularColorMap&&a.enable(16),k.transmission&&a.enable(17),k.transmissionMap&&a.enable(18),k.thicknessMap&&a.enable(19),k.sheen&&a.enable(20),k.sheenColorMap&&a.enable(21),k.sheenRoughnessMap&&a.enable(22),k.decodeVideoTexture&&a.enable(23),k.opaque&&a.enable(24),M.push(a.mask)}(k,M),k.push(n.outputEncoding)),k.push(M.customProgramCacheKey),k.join()},getUniforms:function P(M){const k=g[M.type];let Ae;return Ae=k?PV.clone(ws[k].uniforms):M.uniforms,Ae},acquireProgram:function U(M,k){let Ae;for(let Y=0,oe=c.length;Y<oe;Y++){const ne=c[Y];if(ne.cacheKey===k){Ae=ne,++Ae.usedTimes;break}}return void 0===Ae&&(Ae=new n5(n,k,M,s),c.push(Ae)),Ae},releaseProgram:function j(M){if(0==--M.usedTimes){const k=c.indexOf(M);c[k]=c[c.length-1],c.pop(),M.destroy()}},releaseShaderCache:function ce(M){l.remove(M)},programs:c,dispose:function q(){l.dispose()}}}function a5(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function r(s,o,a){n.get(s)[o]=a},dispose:function i(){n=new WeakMap}}}function l5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function UT(){const n=[];let e=0;const t=[],r=[],i=[];function o(d,h,f,m,p,g){let v=n[e];return void 0===v?(v={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:p,group:g},n[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=f,v.groupOrder=m,v.renderOrder=d.renderOrder,v.z=p,v.group=g),e++,v}return{opaque:t,transmissive:r,transparent:i,init:function s(){e=0,t.length=0,r.length=0,i.length=0},push:function a(d,h,f,m,p,g){const v=o(d,h,f,m,p,g);f.transmission>0?r.push(v):!0===f.transparent?i.push(v):t.push(v)},unshift:function l(d,h,f,m,p,g){const v=o(d,h,f,m,p,g);f.transmission>0?r.unshift(v):!0===f.transparent?i.unshift(v):t.unshift(v)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||l5),r.length>1&&r.sort(h||BT),i.length>1&&i.sort(h||BT)}}}function c5(){let n=new WeakMap;return{get:function e(r,i){let s;return!1===n.has(r)?(s=new UT,n.set(r,[s])):i>=n.get(r).length?(s=new UT,n.get(r).push(s)):s=n.get(r)[i],s},dispose:function t(){n=new WeakMap}}}function u5(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new C,color:new qe};break;case"SpotLight":t={position:new C,direction:new C,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new C,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new C,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new C,halfWidth:new C,halfHeight:new C}}return n[e.id]=t,t}}}let h5=0;function f5(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function p5(n,e){const t=new u5,r=function d5(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new C);const s=new C,o=new rt,a=new rt;return{setup:function l(u,d){let h=0,f=0,m=0;for(let ce=0;ce<9;ce++)i.probe[ce].set(0,0,0);let p=0,g=0,v=0,y=0,x=0,_=0,w=0,P=0;u.sort(f5);const U=!0!==d?Math.PI:1;for(let ce=0,q=u.length;ce<q;ce++){const M=u[ce],k=M.color,Ae=M.intensity,Y=M.distance,oe=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)h+=k.r*Ae*U,f+=k.g*Ae*U,m+=k.b*Ae*U;else if(M.isLightProbe)for(let ne=0;ne<9;ne++)i.probe[ne].addScaledVector(M.sh.coefficients[ne],Ae);else if(M.isDirectionalLight){const ne=t.get(M);if(ne.color.copy(M.color).multiplyScalar(M.intensity*U),M.castShadow){const pe=M.shadow,Z=r.get(M);Z.shadowBias=pe.bias,Z.shadowNormalBias=pe.normalBias,Z.shadowRadius=pe.radius,Z.shadowMapSize=pe.mapSize,i.directionalShadow[p]=Z,i.directionalShadowMap[p]=oe,i.directionalShadowMatrix[p]=M.shadow.matrix,_++}i.directional[p]=ne,p++}else if(M.isSpotLight){const ne=t.get(M);if(ne.position.setFromMatrixPosition(M.matrixWorld),ne.color.copy(k).multiplyScalar(Ae*U),ne.distance=Y,ne.coneCos=Math.cos(M.angle),ne.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),ne.decay=M.decay,M.castShadow){const pe=M.shadow,Z=r.get(M);Z.shadowBias=pe.bias,Z.shadowNormalBias=pe.normalBias,Z.shadowRadius=pe.radius,Z.shadowMapSize=pe.mapSize,i.spotShadow[v]=Z,i.spotShadowMap[v]=oe,i.spotShadowMatrix[v]=M.shadow.matrix,P++}i.spot[v]=ne,v++}else if(M.isRectAreaLight){const ne=t.get(M);ne.color.copy(k).multiplyScalar(Ae),ne.halfWidth.set(.5*M.width,0,0),ne.halfHeight.set(0,.5*M.height,0),i.rectArea[y]=ne,y++}else if(M.isPointLight){const ne=t.get(M);if(ne.color.copy(M.color).multiplyScalar(M.intensity*U),ne.distance=M.distance,ne.decay=M.decay,M.castShadow){const pe=M.shadow,Z=r.get(M);Z.shadowBias=pe.bias,Z.shadowNormalBias=pe.normalBias,Z.shadowRadius=pe.radius,Z.shadowMapSize=pe.mapSize,Z.shadowCameraNear=pe.camera.near,Z.shadowCameraFar=pe.camera.far,i.pointShadow[g]=Z,i.pointShadowMap[g]=oe,i.pointShadowMatrix[g]=M.shadow.matrix,w++}i.point[g]=ne,g++}else if(M.isHemisphereLight){const ne=t.get(M);ne.skyColor.copy(M.color).multiplyScalar(Ae*U),ne.groundColor.copy(M.groundColor).multiplyScalar(Ae*U),i.hemi[x]=ne,x++}}y>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=m;const j=i.hash;(j.directionalLength!==p||j.pointLength!==g||j.spotLength!==v||j.rectAreaLength!==y||j.hemiLength!==x||j.numDirectionalShadows!==_||j.numPointShadows!==w||j.numSpotShadows!==P)&&(i.directional.length=p,i.spot.length=v,i.rectArea.length=y,i.point.length=g,i.hemi.length=x,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=w,i.spotShadowMatrix.length=P,j.directionalLength=p,j.pointLength=g,j.spotLength=v,j.rectAreaLength=y,j.hemiLength=x,j.numDirectionalShadows=_,j.numPointShadows=w,j.numSpotShadows=P,i.version=h5++)},setupView:function c(u,d){let h=0,f=0,m=0,p=0,g=0;const v=d.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const _=u[y];if(_.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),h++}else if(_.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),m++}else if(_.isRectAreaLight){const w=i.rectArea[p];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(v),a.identity(),o.copy(_.matrixWorld),o.premultiply(v),a.extractRotation(o),w.halfWidth.set(.5*_.width,0,0),w.halfHeight.set(0,.5*_.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),p++}else if(_.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(v),f++}else if(_.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(v),w.direction.normalize(),g++}}},state:i}}function HT(n,e){const t=new p5(n,e),r=[],i=[];return{init:function s(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function l(d){t.setup(r,d)},setupLightsView:function c(d){t.setupView(r,d)},pushLight:function o(d){r.push(d)},pushShadow:function a(d){i.push(d)}}}function m5(n,e){let t=new WeakMap;return{get:function r(s,o=0){let a;return!1===t.has(s)?(a=new HT(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new HT(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function i(){t=new WeakMap}}}class Qv extends sr{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Qv.prototype.isMeshDepthMaterial=!0;class Kv extends sr{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function VT(n,e,t){let r=new Wf;const i=new Ce,s=new Ce,o=new gn,a=new Qv({depthPacking:3201}),l=new Kv,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new gt;m.setAttribute("position",new Sn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new wr(m,h),g=this;function v(_,w){const P=e.update(p);h.defines.VSM_SAMPLES!==_.blurSamples&&(h.defines.VSM_SAMPLES=_.blurSamples,f.defines.VSM_SAMPLES=_.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=_.map.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,n.setRenderTarget(_.mapPass),n.clear(),n.renderBufferDirect(w,null,P,h,p,null),f.uniforms.shadow_pass.value=_.mapPass.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,n.setRenderTarget(_.map),n.clear(),n.renderBufferDirect(w,null,P,f,p,null)}function y(_,w,P,U,j,ce){let q=null;const M=!0===P.isPointLight?_.customDistanceMaterial:_.customDepthMaterial;if(q=void 0!==M?M:!0===P.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const k=q.uuid,Ae=w.uuid;let Y=c[k];void 0===Y&&(Y={},c[k]=Y);let oe=Y[Ae];void 0===oe&&(oe=q.clone(),Y[Ae]=oe),q=oe}return q.visible=w.visible,q.wireframe=w.wireframe,q.side=3===ce?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:d[w.side],q.alphaMap=w.alphaMap,q.alphaTest=w.alphaTest,q.clipShadows=w.clipShadows,q.clippingPlanes=w.clippingPlanes,q.clipIntersection=w.clipIntersection,q.displacementMap=w.displacementMap,q.displacementScale=w.displacementScale,q.displacementBias=w.displacementBias,q.wireframeLinewidth=w.wireframeLinewidth,q.linewidth=w.linewidth,!0===P.isPointLight&&!0===q.isMeshDistanceMaterial&&(q.referencePosition.setFromMatrixPosition(P.matrixWorld),q.nearDistance=U,q.farDistance=j),q}function x(_,w,P,U,j){if(!1===_.visible)return;if(_.layers.test(w.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&3===j)&&(!_.frustumCulled||r.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,_.matrixWorld);const M=e.update(_),k=_.material;if(Array.isArray(k)){const Ae=M.groups;for(let Y=0,oe=Ae.length;Y<oe;Y++){const ne=Ae[Y],pe=k[ne.materialIndex];if(pe&&pe.visible){const Z=y(_,pe,U,P.near,P.far,j);n.renderBufferDirect(P,null,M,Z,_,ne)}}}else if(k.visible){const Ae=y(_,k,U,P.near,P.far,j);n.renderBufferDirect(P,null,M,Ae,_,null)}}const q=_.children;for(let M=0,k=q.length;M<k;M++)x(q[M],w,P,U,j)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(_,w,P){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===_.length)return;const U=n.getRenderTarget(),j=n.getActiveCubeFace(),ce=n.getActiveMipmapLevel(),q=n.state;q.setBlending(0),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);for(let M=0,k=_.length;M<k;M++){const Ae=_[M],Y=Ae.shadow;if(void 0===Y){console.warn("THREE.WebGLShadowMap:",Ae,"has no shadow.");continue}if(!1===Y.autoUpdate&&!1===Y.needsUpdate)continue;i.copy(Y.mapSize);const oe=Y.getFrameExtents();i.multiply(oe),s.copy(Y.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/oe.x),i.x=s.x*oe.x,Y.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/oe.y),i.y=s.y*oe.y,Y.mapSize.y=s.y)),null===Y.map&&!Y.isPointLightShadow&&3===this.type&&(Y.map=new pi(i.x,i.y),Y.map.texture.name=Ae.name+".shadowMap",Y.mapPass=new pi(i.x,i.y),Y.camera.updateProjectionMatrix()),null===Y.map&&(Y.map=new pi(i.x,i.y,{minFilter:pr,magFilter:pr,format:Ai}),Y.map.texture.name=Ae.name+".shadowMap",Y.camera.updateProjectionMatrix()),n.setRenderTarget(Y.map),n.clear();const ne=Y.getViewportCount();for(let pe=0;pe<ne;pe++){const Z=Y.getViewport(pe);o.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),q.viewport(o),Y.updateMatrices(Ae,pe),r=Y.getFrustum(),x(w,P,Y.camera,Ae,this.type)}!Y.isPointLightShadow&&3===this.type&&v(Y,P),Y.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(U,j,ce)}}function v5(n,e,t){const r=t.isWebGL2,a=new function i(){let W=!1;const je=new gn;let ze=null;const xt=new gn(0,0,0,0);return{setMask:function(Ke){ze!==Ke&&!W&&(n.colorMask(Ke,Ke,Ke,Ke),ze=Ke)},setLocked:function(Ke){W=Ke},setClear:function(Ke,wt,Ve,Rt,In){!0===In&&(Ke*=Rt,wt*=Rt,Ve*=Rt),je.set(Ke,wt,Ve,Rt),!1===xt.equals(je)&&(n.clearColor(Ke,wt,Ve,Rt),xt.copy(je))},reset:function(){W=!1,ze=null,xt.set(-1,0,0,0)}}},l=new function s(){let W=!1,je=null,ze=null,xt=null;return{setTest:function(Ke){Ke?Ct(2929):xe(2929)},setMask:function(Ke){je!==Ke&&!W&&(n.depthMask(Ke),je=Ke)},setFunc:function(Ke){if(ze!==Ke){if(Ke)switch(Ke){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ze=Ke}},setLocked:function(Ke){W=Ke},setClear:function(Ke){xt!==Ke&&(n.clearDepth(Ke),xt=Ke)},reset:function(){W=!1,je=null,ze=null,xt=null}}},c=new function o(){let W=!1,je=null,ze=null,xt=null,Ke=null,wt=null,Ve=null,Rt=null,In=null;return{setTest:function(sn){W||(sn?Ct(2960):xe(2960))},setMask:function(sn){je!==sn&&!W&&(n.stencilMask(sn),je=sn)},setFunc:function(sn,Es,Ss){(ze!==sn||xt!==Es||Ke!==Ss)&&(n.stencilFunc(sn,Es,Ss),ze=sn,xt=Es,Ke=Ss)},setOp:function(sn,Es,Ss){(wt!==sn||Ve!==Es||Rt!==Ss)&&(n.stencilOp(sn,Es,Ss),wt=sn,Ve=Es,Rt=Ss)},setLocked:function(sn){W=sn},setClear:function(sn){In!==sn&&(n.clearStencil(sn),In=sn)},reset:function(){W=!1,je=null,ze=null,xt=null,Ke=null,wt=null,Ve=null,Rt=null,In=null}}};let u={},d={},h=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,x=null,_=null,w=null,P=null,U=!1,j=null,ce=null,q=null,M=null,k=null;const Ae=n.getParameter(35661);let Y=!1,oe=0;const ne=n.getParameter(7938);-1!==ne.indexOf("WebGL")?(oe=parseFloat(/^WebGL (\d)/.exec(ne)[1]),Y=oe>=1):-1!==ne.indexOf("OpenGL ES")&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),Y=oe>=2);let pe=null,Z={};const Ee=n.getParameter(3088),Re=n.getParameter(2978),Ne=(new gn).fromArray(Ee),Pe=(new gn).fromArray(Re);function ut(W,je,ze){const xt=new Uint8Array(4),Ke=n.createTexture();n.bindTexture(W,Ke),n.texParameteri(W,10241,9728),n.texParameteri(W,10240,9728);for(let wt=0;wt<ze;wt++)n.texImage2D(je+wt,0,6408,1,1,0,6408,5121,xt);return Ke}const qt={};function Ct(W){!0!==u[W]&&(n.enable(W),u[W]=!0)}function xe(W){!1!==u[W]&&(n.disable(W),u[W]=!1)}qt[3553]=ut(3553,3553,1),qt[34067]=ut(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ct(2929),l.setFunc(3),Fe(!1),it(1),Ct(2884),ve(0);const He={100:32774,101:32778,102:32779};if(r)He[103]=32775,He[104]=32776;else{const W=e.get("EXT_blend_minmax");null!==W&&(He[103]=W.MIN_EXT,He[104]=W.MAX_EXT)}const Kt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ve(W,je,ze,xt,Ke,wt,Ve,Rt){if(0!==W){if(!1===p&&(Ct(3042),p=!0),5===W)Ke=Ke||je,wt=wt||ze,Ve=Ve||xt,(je!==v||Ke!==_)&&(n.blendEquationSeparate(He[je],He[Ke]),v=je,_=Ke),(ze!==y||xt!==x||wt!==w||Ve!==P)&&(n.blendFuncSeparate(Kt[ze],Kt[xt],Kt[wt],Kt[Ve]),y=ze,x=xt,w=wt,P=Ve),g=W,U=null;else if(W!==g||Rt!==U){if((100!==v||100!==_)&&(n.blendEquation(32774),v=100,_=100),Rt)switch(W){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",W)}else switch(W){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",W)}y=null,x=null,w=null,P=null,g=W,U=Rt}}else!0===p&&(xe(3042),p=!1)}function Fe(W){j!==W&&(n.frontFace(W?2304:2305),j=W)}function it(W){0!==W?(Ct(2884),W!==ce&&n.cullFace(1===W?1029:2===W?1028:1032)):xe(2884),ce=W}function Nt(W,je,ze){W?(Ct(32823),(M!==je||k!==ze)&&(n.polygonOffset(je,ze),M=je,k=ze)):xe(32823)}function ht(W){void 0===W&&(W=33984+Ae-1),pe!==W&&(n.activeTexture(W),pe=W)}return{buffers:{color:a,depth:l,stencil:c},enable:Ct,disable:xe,bindFramebuffer:function fn(W,je){return d[W]!==je&&(n.bindFramebuffer(W,je),d[W]=je,r&&(36009===W&&(d[36160]=je),36160===W&&(d[36009]=je)),!0)},drawBuffers:function Ut(W,je){let ze=f,xt=!1;if(W)if(ze=h.get(je),void 0===ze&&(ze=[],h.set(je,ze)),W.isWebGLMultipleRenderTargets){const Ke=W.texture;if(ze.length!==Ke.length||36064!==ze[0]){for(let wt=0,Ve=Ke.length;wt<Ve;wt++)ze[wt]=36064+wt;ze.length=Ke.length,xt=!0}}else 36064!==ze[0]&&(ze[0]=36064,xt=!0);else 1029!==ze[0]&&(ze[0]=1029,xt=!0);xt&&(t.isWebGL2?n.drawBuffers(ze):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ze))},useProgram:function Ht(W){return m!==W&&(n.useProgram(W),m=W,!0)},setBlending:ve,setMaterial:function Se(W,je){2===W.side?xe(2884):Ct(2884);let ze=1===W.side;je&&(ze=!ze),Fe(ze),1===W.blending&&!1===W.transparent?ve(0):ve(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.premultipliedAlpha),l.setFunc(W.depthFunc),l.setTest(W.depthTest),l.setMask(W.depthWrite),a.setMask(W.colorWrite);const xt=W.stencilWrite;c.setTest(xt),xt&&(c.setMask(W.stencilWriteMask),c.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),c.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),Nt(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),!0===W.alphaToCoverage?Ct(32926):xe(32926)},setFlipSided:Fe,setCullFace:it,setLineWidth:function Ye(W){W!==q&&(Y&&n.lineWidth(W),q=W)},setPolygonOffset:Nt,setScissorTest:function vt(W){W?Ct(3089):xe(3089)},activeTexture:ht,bindTexture:function Hn(W,je){null===pe&&ht();let ze=Z[pe];void 0===ze&&(ze={type:void 0,texture:void 0},Z[pe]=ze),(ze.type!==W||ze.texture!==je)&&(n.bindTexture(W,je||qt[W]),ze.type=W,ze.texture=je)},unbindTexture:function Cn(){const W=Z[pe];void 0!==W&&void 0!==W.type&&(n.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)},compressedTexImage2D:function I(){try{n.compressedTexImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage2D:function yt(){try{n.texImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texImage3D:function ge(){try{n.texImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texStorage2D:function Xe(){try{n.texStorage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texStorage3D:function Je(){try{n.texStorage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage2D:function S(){try{n.texSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},texSubImage3D:function fe(){try{n.texSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},compressedTexSubImage2D:function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}},scissor:function Vt(W){!1===Ne.equals(W)&&(n.scissor(W.x,W.y,W.z,W.w),Ne.copy(W))},viewport:function Xt(W){!1===Pe.equals(W)&&(n.viewport(W.x,W.y,W.z,W.w),Pe.copy(W))},reset:function st(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},pe=null,Z={},d={},h=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,x=null,_=null,w=null,P=null,U=!1,j=null,ce=null,q=null,M=null,k=null,Ne.set(0,0,n.canvas.width,n.canvas.height),Pe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function _5(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let p;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(I){}function y(I,S){return v?new OffscreenCanvas(I,S):Ju("canvas")}function x(I,S,fe,Le){let Xe=1;if((I.width>Le||I.height>Le)&&(Xe=Le/Math.max(I.width,I.height)),Xe<1||!0===S){if("undefined"!=typeof HTMLImageElement&&I instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&I instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&I instanceof ImageBitmap){const Je=S?wf:Math.floor,yt=Je(Xe*I.width),ge=Je(Xe*I.height);void 0===p&&(p=y(yt,ge));const Vt=fe?y(yt,ge):p;return Vt.width=yt,Vt.height=ge,Vt.getContext("2d").drawImage(I,0,0,yt,ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+I.width+"x"+I.height+") to ("+yt+"x"+ge+")."),Vt}return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+I.width+"x"+I.height+")."),I}return I}function _(I){return wv(I.width)&&wv(I.height)}function P(I,S){return I.generateMipmaps&&S&&I.minFilter!==pr&&I.minFilter!==rr}function U(I){n.generateMipmap(I)}function j(I,S,fe,Le,Xe=!1){if(!1===a)return S;if(null!==I){if(void 0!==n[I])return n[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let Je=S;return 6403===S&&(5126===fe&&(Je=33326),5131===fe&&(Je=33325),5121===fe&&(Je=33321)),33319===S&&(5126===fe&&(Je=33328),5131===fe&&(Je=33327),5121===fe&&(Je=33323)),6408===S&&(5126===fe&&(Je=34836),5131===fe&&(Je=34842),5121===fe&&(Je=Le===On&&!1===Xe?35907:32856),32819===fe&&(Je=32854),32820===fe&&(Je=32855)),(33325===Je||33326===Je||33327===Je||33328===Je||34842===Je||34836===Je)&&e.get("EXT_color_buffer_float"),Je}function ce(I,S,fe){return!0===P(I,fe)||I.isFramebufferTexture&&I.minFilter!==pr&&I.minFilter!==rr?Math.log2(Math.max(S.width,S.height))+1:void 0!==I.mipmaps&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?S.mipmaps.length:1}function q(I){return I===pr||1004===I||1005===I?9728:9729}function M(I){const S=I.target;S.removeEventListener("dispose",M),function Ae(I){const S=r.get(I);if(void 0===S.__webglInit)return;const fe=I.source,Le=g.get(fe);if(Le){const Xe=Le[S.__cacheKey];Xe.usedTimes--,0===Xe.usedTimes&&Y(I),0===Object.keys(Le).length&&g.delete(fe)}r.remove(I)}(S),S.isVideoTexture&&m.delete(S)}function k(I){const S=I.target;S.removeEventListener("dispose",k),function oe(I){const S=I.texture,fe=r.get(I),Le=r.get(S);if(void 0!==Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),o.memory.textures--),I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let Xe=0;Xe<6;Xe++)n.deleteFramebuffer(fe.__webglFramebuffer[Xe]),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[Xe]);else n.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer),fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer);if(I.isWebGLMultipleRenderTargets)for(let Xe=0,Je=S.length;Xe<Je;Xe++){const yt=r.get(S[Xe]);yt.__webglTexture&&(n.deleteTexture(yt.__webglTexture),o.memory.textures--),r.remove(S[Xe])}r.remove(S),r.remove(I)}(S)}function Y(I){const S=r.get(I);n.deleteTexture(S.__webglTexture),delete g.get(I.source)[S.__cacheKey],o.memory.textures--}let ne=0;function Re(I,S){const fe=r.get(I);if(I.isVideoTexture&&function Hn(I){const S=o.render.frame;m.get(I)!==S&&(m.set(I,S),I.update())}(I),!1===I.isRenderTargetTexture&&I.version>0&&fe.__version!==I.version){const Le=I.image;if(null===Le)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Le.complete)return void Ut(fe,I,S);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+S),t.bindTexture(3553,fe.__webglTexture)}const qt={1e3:10497,[ni]:33071,1002:33648},Ct={[pr]:9728,1004:9984,1005:9986,[rr]:9729,1007:9985,1008:9987};function xe(I,S,fe){if(fe?(n.texParameteri(I,10242,qt[S.wrapS]),n.texParameteri(I,10243,qt[S.wrapT]),(32879===I||35866===I)&&n.texParameteri(I,32882,qt[S.wrapR]),n.texParameteri(I,10240,Ct[S.magFilter]),n.texParameteri(I,10241,Ct[S.minFilter])):(n.texParameteri(I,10242,33071),n.texParameteri(I,10243,33071),(32879===I||35866===I)&&n.texParameteri(I,32882,33071),(S.wrapS!==ni||S.wrapT!==ni)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(I,10240,q(S.magFilter)),n.texParameteri(I,10241,q(S.minFilter)),S.minFilter!==pr&&S.minFilter!==rr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Le=e.get("EXT_texture_filter_anisotropic");if(S.type===Do&&!1===e.has("OES_texture_float_linear")||!1===a&&S.type===Yl&&!1===e.has("OES_texture_half_float_linear"))return;(S.anisotropy>1||r.get(S).__currentAnisotropy)&&(n.texParameterf(I,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,i.getMaxAnisotropy())),r.get(S).__currentAnisotropy=S.anisotropy)}}function fn(I,S){let fe=!1;void 0===I.__webglInit&&(I.__webglInit=!0,S.addEventListener("dispose",M));const Le=S.source;let Xe=g.get(Le);void 0===Xe&&(Xe={},g.set(Le,Xe));const Je=function Ee(I){const S=[];return S.push(I.wrapS),S.push(I.wrapT),S.push(I.magFilter),S.push(I.minFilter),S.push(I.anisotropy),S.push(I.internalFormat),S.push(I.format),S.push(I.type),S.push(I.generateMipmaps),S.push(I.premultiplyAlpha),S.push(I.flipY),S.push(I.unpackAlignment),S.push(I.encoding),S.join()}(S);if(Je!==I.__cacheKey){void 0===Xe[Je]&&(Xe[Je]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Xe[Je].usedTimes++;const yt=Xe[I.__cacheKey];void 0!==yt&&(Xe[I.__cacheKey].usedTimes--,0===yt.usedTimes&&Y(S)),I.__cacheKey=Je,I.__webglTexture=Xe[Je].texture}return fe}function Ut(I,S,fe){let Le=3553;S.isDataArrayTexture&&(Le=35866),S.isData3DTexture&&(Le=32879);const Xe=fn(I,S),Je=S.source;if(t.activeTexture(33984+fe),t.bindTexture(Le,I.__webglTexture),Je.version!==Je.__currentVersion||!0===Xe){n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const yt=function w(I){return!a&&(I.wrapS!==ni||I.wrapT!==ni||I.minFilter!==pr&&I.minFilter!==rr)}(S)&&!1===_(S.image);let ge=x(S.image,yt,!1,u);ge=Cn(S,ge);const Vt=_(ge)||a,Xt=s.convert(S.format,S.encoding);let je,st=s.convert(S.type),W=j(S.internalFormat,Xt,st,S.encoding,S.isVideoTexture);xe(Le,S,Vt);const ze=S.mipmaps,xt=a&&!0!==S.isVideoTexture,Ke=void 0===I.__version,wt=ce(S,ge,Vt);if(S.isDepthTexture)W=6402,a?W=S.type===Do?36012:1014===S.type?33190:S.type===Zl?35056:33189:S.type===Do&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),S.format===ma&&6402===W&&S.type!==$u&&1014!==S.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),S.type=$u,st=s.convert(S.type)),S.format===Jl&&6402===W&&(W=34041,S.type!==Zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),S.type=Zl,st=s.convert(S.type))),xt&&Ke?t.texStorage2D(3553,1,W,ge.width,ge.height):t.texImage2D(3553,0,W,ge.width,ge.height,0,Xt,st,null);else if(S.isDataTexture)if(ze.length>0&&Vt){xt&&Ke&&t.texStorage2D(3553,wt,W,ze[0].width,ze[0].height);for(let Ve=0,Rt=ze.length;Ve<Rt;Ve++)je=ze[Ve],xt?t.texSubImage2D(3553,Ve,0,0,je.width,je.height,Xt,st,je.data):t.texImage2D(3553,Ve,W,je.width,je.height,0,Xt,st,je.data);S.generateMipmaps=!1}else xt?(Ke&&t.texStorage2D(3553,wt,W,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,ge.width,ge.height,Xt,st,ge.data)):t.texImage2D(3553,0,W,ge.width,ge.height,0,Xt,st,ge.data);else if(S.isCompressedTexture){xt&&Ke&&t.texStorage2D(3553,wt,W,ze[0].width,ze[0].height);for(let Ve=0,Rt=ze.length;Ve<Rt;Ve++)je=ze[Ve],S.format!==Ai?null!==Xt?xt?t.compressedTexSubImage2D(3553,Ve,0,0,je.width,je.height,Xt,je.data):t.compressedTexImage2D(3553,Ve,W,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?t.texSubImage2D(3553,Ve,0,0,je.width,je.height,Xt,st,je.data):t.texImage2D(3553,Ve,W,je.width,je.height,0,Xt,st,je.data)}else if(S.isDataArrayTexture)xt?(Ke&&t.texStorage3D(35866,wt,W,ge.width,ge.height,ge.depth),t.texSubImage3D(35866,0,0,0,0,ge.width,ge.height,ge.depth,Xt,st,ge.data)):t.texImage3D(35866,0,W,ge.width,ge.height,ge.depth,0,Xt,st,ge.data);else if(S.isData3DTexture)xt?(Ke&&t.texStorage3D(32879,wt,W,ge.width,ge.height,ge.depth),t.texSubImage3D(32879,0,0,0,0,ge.width,ge.height,ge.depth,Xt,st,ge.data)):t.texImage3D(32879,0,W,ge.width,ge.height,ge.depth,0,Xt,st,ge.data);else if(S.isFramebufferTexture)xt&&Ke?t.texStorage2D(3553,wt,W,ge.width,ge.height):t.texImage2D(3553,0,W,ge.width,ge.height,0,Xt,st,null);else if(ze.length>0&&Vt){xt&&Ke&&t.texStorage2D(3553,wt,W,ze[0].width,ze[0].height);for(let Ve=0,Rt=ze.length;Ve<Rt;Ve++)je=ze[Ve],xt?t.texSubImage2D(3553,Ve,0,0,Xt,st,je):t.texImage2D(3553,Ve,W,Xt,st,je);S.generateMipmaps=!1}else xt?(Ke&&t.texStorage2D(3553,wt,W,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,Xt,st,ge)):t.texImage2D(3553,0,W,Xt,st,ge);P(S,Vt)&&U(Le),Je.__currentVersion=Je.version,S.onUpdate&&S.onUpdate(S)}I.__version=S.version}function He(I,S,fe,Le,Xe){const Je=s.convert(fe.format,fe.encoding),yt=s.convert(fe.type),ge=j(fe.internalFormat,Je,yt,fe.encoding);r.get(S).__hasExternalTextures||(32879===Xe||35866===Xe?t.texImage3D(Xe,0,ge,S.width,S.height,S.depth,0,Je,yt,null):t.texImage2D(Xe,0,ge,S.width,S.height,0,Je,yt,null)),t.bindFramebuffer(36160,I),ht(S)?h.framebufferTexture2DMultisampleEXT(36160,Le,Xe,r.get(fe).__webglTexture,0,vt(S)):n.framebufferTexture2D(36160,Le,Xe,r.get(fe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Kt(I,S,fe){if(n.bindRenderbuffer(36161,I),S.depthBuffer&&!S.stencilBuffer){let Le=33189;if(fe||ht(S)){const Xe=S.depthTexture;Xe&&Xe.isDepthTexture&&(Xe.type===Do?Le=36012:1014===Xe.type&&(Le=33190));const Je=vt(S);ht(S)?h.renderbufferStorageMultisampleEXT(36161,Je,Le,S.width,S.height):n.renderbufferStorageMultisample(36161,Je,Le,S.width,S.height)}else n.renderbufferStorage(36161,Le,S.width,S.height);n.framebufferRenderbuffer(36160,36096,36161,I)}else if(S.depthBuffer&&S.stencilBuffer){const Le=vt(S);fe&&!1===ht(S)?n.renderbufferStorageMultisample(36161,Le,35056,S.width,S.height):ht(S)?h.renderbufferStorageMultisampleEXT(36161,Le,35056,S.width,S.height):n.renderbufferStorage(36161,34041,S.width,S.height),n.framebufferRenderbuffer(36160,33306,36161,I)}else{const Le=!0===S.isWebGLMultipleRenderTargets?S.texture[0]:S.texture,Xe=s.convert(Le.format,Le.encoding),Je=s.convert(Le.type),yt=j(Le.internalFormat,Xe,Je,Le.encoding),ge=vt(S);fe&&!1===ht(S)?n.renderbufferStorageMultisample(36161,ge,yt,S.width,S.height):ht(S)?h.renderbufferStorageMultisampleEXT(36161,ge,yt,S.width,S.height):n.renderbufferStorage(36161,yt,S.width,S.height)}n.bindRenderbuffer(36161,null)}function Se(I){const S=r.get(I),fe=!0===I.isWebGLCubeRenderTarget;if(I.depthTexture&&!S.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");!function ve(I,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,I),!S.depthTexture||!S.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(S.depthTexture).__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),Re(S.depthTexture,0);const Le=r.get(S.depthTexture).__webglTexture,Xe=vt(S);if(S.depthTexture.format===ma)ht(S)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Le,0,Xe):n.framebufferTexture2D(36160,36096,3553,Le,0);else{if(S.depthTexture.format!==Jl)throw new Error("Unknown depthTexture format");ht(S)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Le,0,Xe):n.framebufferTexture2D(36160,33306,3553,Le,0)}}(S.__webglFramebuffer,I)}else if(fe){S.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)t.bindFramebuffer(36160,S.__webglFramebuffer[Le]),S.__webglDepthbuffer[Le]=n.createRenderbuffer(),Kt(S.__webglDepthbuffer[Le],I,!1)}else t.bindFramebuffer(36160,S.__webglFramebuffer),S.__webglDepthbuffer=n.createRenderbuffer(),Kt(S.__webglDepthbuffer,I,!1);t.bindFramebuffer(36160,null)}function vt(I){return Math.min(d,I.samples)}function ht(I){const S=r.get(I);return a&&I.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==S.__useRenderToTexture}function Cn(I,S){const fe=I.encoding,Le=I.format,Xe=I.type;return!0===I.isCompressedTexture||!0===I.isVideoTexture||1035===I.format||fe!==js&&(fe===On?!1===a?!0===e.has("EXT_sRGB")&&Le===Ai?(I.format=1035,I.minFilter=rr,I.generateMipmaps=!1):S=xa.sRGBToLinear(S):(Le!==Ai||Xe!==pa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),S}this.allocateTextureUnit=function Z(){const I=ne;return I>=l&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+l),ne+=1,I},this.resetTextureUnits=function pe(){ne=0},this.setTexture2D=Re,this.setTexture2DArray=function Ne(I,S){const fe=r.get(I);I.version>0&&fe.__version!==I.version?Ut(fe,I,S):(t.activeTexture(33984+S),t.bindTexture(35866,fe.__webglTexture))},this.setTexture3D=function Pe(I,S){const fe=r.get(I);I.version>0&&fe.__version!==I.version?Ut(fe,I,S):(t.activeTexture(33984+S),t.bindTexture(32879,fe.__webglTexture))},this.setTextureCube=function ut(I,S){const fe=r.get(I);I.version>0&&fe.__version!==I.version?function Ht(I,S,fe){if(6!==S.image.length)return;const Le=fn(I,S),Xe=S.source;if(t.activeTexture(33984+fe),t.bindTexture(34067,I.__webglTexture),Xe.version!==Xe.__currentVersion||!0===Le){n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const Je=S.isCompressedTexture||S.image[0].isCompressedTexture,yt=S.image[0]&&S.image[0].isDataTexture,ge=[];for(let Ve=0;Ve<6;Ve++)ge[Ve]=Je||yt?yt?S.image[Ve].image:S.image[Ve]:x(S.image[Ve],!1,!0,c),ge[Ve]=Cn(S,ge[Ve]);const Vt=ge[0],Xt=_(Vt)||a,st=s.convert(S.format,S.encoding),W=s.convert(S.type),je=j(S.internalFormat,st,W,S.encoding),ze=a&&!0!==S.isVideoTexture,xt=void 0===I.__version;let wt,Ke=ce(S,Vt,Xt);if(xe(34067,S,Xt),Je){ze&&xt&&t.texStorage2D(34067,Ke,je,Vt.width,Vt.height);for(let Ve=0;Ve<6;Ve++){wt=ge[Ve].mipmaps;for(let Rt=0;Rt<wt.length;Rt++){const In=wt[Rt];S.format!==Ai?null!==st?ze?t.compressedTexSubImage2D(34069+Ve,Rt,0,0,In.width,In.height,st,In.data):t.compressedTexImage2D(34069+Ve,Rt,je,In.width,In.height,0,In.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ze?t.texSubImage2D(34069+Ve,Rt,0,0,In.width,In.height,st,W,In.data):t.texImage2D(34069+Ve,Rt,je,In.width,In.height,0,st,W,In.data)}}}else{wt=S.mipmaps,ze&&xt&&(wt.length>0&&Ke++,t.texStorage2D(34067,Ke,je,ge[0].width,ge[0].height));for(let Ve=0;Ve<6;Ve++)if(yt){ze?t.texSubImage2D(34069+Ve,0,0,0,ge[Ve].width,ge[Ve].height,st,W,ge[Ve].data):t.texImage2D(34069+Ve,0,je,ge[Ve].width,ge[Ve].height,0,st,W,ge[Ve].data);for(let Rt=0;Rt<wt.length;Rt++){const sn=wt[Rt].image[Ve].image;ze?t.texSubImage2D(34069+Ve,Rt+1,0,0,sn.width,sn.height,st,W,sn.data):t.texImage2D(34069+Ve,Rt+1,je,sn.width,sn.height,0,st,W,sn.data)}}else{ze?t.texSubImage2D(34069+Ve,0,0,0,st,W,ge[Ve]):t.texImage2D(34069+Ve,0,je,st,W,ge[Ve]);for(let Rt=0;Rt<wt.length;Rt++){const In=wt[Rt];ze?t.texSubImage2D(34069+Ve,Rt+1,0,0,st,W,In.image[Ve]):t.texImage2D(34069+Ve,Rt+1,je,st,W,In.image[Ve])}}}P(S,Xt)&&U(34067),Xe.__currentVersion=Xe.version,S.onUpdate&&S.onUpdate(S)}I.__version=S.version}(fe,I,S):(t.activeTexture(33984+S),t.bindTexture(34067,fe.__webglTexture))},this.rebindTextures=function Fe(I,S,fe){const Le=r.get(I);void 0!==S&&He(Le.__webglFramebuffer,I,I.texture,36064,3553),void 0!==fe&&Se(I)},this.setupRenderTarget=function it(I){const S=I.texture,fe=r.get(I),Le=r.get(S);I.addEventListener("dispose",k),!0!==I.isWebGLMultipleRenderTargets&&(void 0===Le.__webglTexture&&(Le.__webglTexture=n.createTexture()),Le.__version=S.version,o.memory.textures++);const Xe=!0===I.isWebGLCubeRenderTarget,Je=!0===I.isWebGLMultipleRenderTargets,yt=_(I)||a;if(Xe){fe.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)fe.__webglFramebuffer[ge]=n.createFramebuffer()}else if(fe.__webglFramebuffer=n.createFramebuffer(),Je)if(i.drawBuffers){const ge=I.texture;for(let Vt=0,Xt=ge.length;Vt<Xt;Vt++){const st=r.get(ge[Vt]);void 0===st.__webglTexture&&(st.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&I.samples>0&&!1===ht(I)){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,fe.__webglColorRenderbuffer);const ge=s.convert(S.format,S.encoding),Vt=s.convert(S.type),Xt=j(S.internalFormat,ge,Vt,S.encoding),st=vt(I);n.renderbufferStorageMultisample(36161,st,Xt,I.width,I.height),t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,fe.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),I.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Kt(fe.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(36160,null)}if(Xe){t.bindTexture(34067,Le.__webglTexture),xe(34067,S,yt);for(let ge=0;ge<6;ge++)He(fe.__webglFramebuffer[ge],I,S,36064,34069+ge);P(S,yt)&&U(34067),t.unbindTexture()}else if(Je){const ge=I.texture;for(let Vt=0,Xt=ge.length;Vt<Xt;Vt++){const st=ge[Vt],W=r.get(st);t.bindTexture(3553,W.__webglTexture),xe(3553,st,yt),He(fe.__webglFramebuffer,I,st,36064+Vt,3553),P(st,yt)&&U(3553)}t.unbindTexture()}else{let ge=3553;(I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(a?ge=I.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ge,Le.__webglTexture),xe(ge,S,yt),He(fe.__webglFramebuffer,I,S,36064,ge),P(S,yt)&&U(ge),t.unbindTexture()}I.depthBuffer&&Se(I)},this.updateRenderTargetMipmap=function Ye(I){const S=_(I)||a,fe=!0===I.isWebGLMultipleRenderTargets?I.texture:[I.texture];for(let Le=0,Xe=fe.length;Le<Xe;Le++){const Je=fe[Le];if(P(Je,S)){const yt=I.isWebGLCubeRenderTarget?34067:3553,ge=r.get(Je).__webglTexture;t.bindTexture(yt,ge),U(yt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Nt(I){if(a&&I.samples>0&&!1===ht(I)){const S=I.width,fe=I.height;let Le=16384;const Xe=[36064],Je=I.stencilBuffer?33306:36096;I.depthBuffer&&Xe.push(Je);const yt=r.get(I),ge=void 0!==yt.__ignoreDepthValues&&yt.__ignoreDepthValues;!1===ge&&(I.depthBuffer&&(Le|=256),I.stencilBuffer&&(Le|=1024)),t.bindFramebuffer(36008,yt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,yt.__webglFramebuffer),!0===ge&&(n.invalidateFramebuffer(36008,[Je]),n.invalidateFramebuffer(36009,[Je])),n.blitFramebuffer(0,0,S,fe,0,0,S,fe,Le,9728),f&&n.invalidateFramebuffer(36008,Xe),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,yt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Se,this.setupFrameBufferTexture=He,this.useMultisampledRTT=ht}function x5(n,e,t){const r=t.isWebGL2;return{convert:function i(s,o=null){let a;if(s===pa)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===$u)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===Do)return 5126;if(s===Yl)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Ai)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===ma)return 6402;if(s===Jl)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===On){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===On?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===On?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Zl?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Kv.prototype.isMeshDistanceMaterial=!0;class zT extends br{constructor(e=[]){super(),this.cameras=e}}zT.prototype.isArrayCamera=!0;class xc extends hn{constructor(){super(),this.type="Group"}}xc.prototype.isGroup=!0;const w5={type:"move"};class e0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new xc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new xc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new xc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(i=t.getPose(e.targetRaySpace,r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(w5))),c&&e.hand){o=!0;for(const p of e.hand.values()){const g=t.getJointPose(p,r);if(void 0===c.joints[p.jointName]){const y=new xc;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[p.jointName]=y,c.add(y)}const v=c.joints[p.jointName];null!==g&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class GT extends ri{constructor(e,t,r,i,s,o,a,l,c,u){if((u=void 0!==u?u:ma)!==ma&&u!==Jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===ma&&(r=$u),void 0===r&&u===Jl&&(r=Zl),super(null,i,s,o,a,l,u,r,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:pr,this.minFilter=void 0!==l?l:pr,this.flipY=!1,this.generateMipmaps=!1}}GT.prototype.isDepthTexture=!0;class b5 extends ya{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null;const f=t.getContextAttributes();let m=null,p=null;const g=[],v=new Map,y=new br;y.layers.enable(1),y.viewport=new gn;const x=new br;x.layers.enable(2),x.viewport=new gn;const _=[y,x],w=new zT;w.layers.enable(1),w.layers.enable(2);let P=null,U=null;function j(Z){const Ee=v.get(Z.inputSource);Ee&&Ee.dispatchEvent({type:Z.type,data:Z.inputSource})}function ce(){v.forEach(function(Z,Ee){Z.disconnect(Ee)}),v.clear(),P=null,U=null,e.setRenderTarget(m),d=null,u=null,c=null,i=null,p=null,pe.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function q(Z){const Ee=i.inputSources;for(let Re=0;Re<g.length;Re++)v.set(Ee[Re],g[Re]);for(let Re=0;Re<Z.removed.length;Re++){const Ne=Z.removed[Re],Pe=v.get(Ne);Pe&&(Pe.dispatchEvent({type:"disconnected",data:Ne}),v.delete(Ne))}for(let Re=0;Re<Z.added.length;Re++){const Ne=Z.added[Re],Pe=v.get(Ne);Pe&&Pe.dispatchEvent({type:"connected",data:Ne})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let Ee=g[Z];return void 0===Ee&&(Ee=new e0,g[Z]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(Z){let Ee=g[Z];return void 0===Ee&&(Ee=new e0,g[Z]=Ee),Ee.getGripSpace()},this.getHand=function(Z){let Ee=g[Z];return void 0===Ee&&(Ee=new e0,g[Z]=Ee),Ee.getHandSpace()},this.setFramebufferScaleFactor=function(Z){s=Z,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return i},this.setSession=function(){var Z=ov(function*(Ee){if(i=Ee,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",ce),i.addEventListener("inputsourceschange",q),!0!==f.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)d=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s}),i.updateRenderState({baseLayer:d}),p=new pi(d.framebufferWidth,d.framebufferHeight,{format:Ai,type:pa,encoding:e.outputEncoding});else{let Re=null,Ne=null,Pe=null;f.depth&&(Pe=f.stencil?35056:33190,Re=f.stencil?Jl:ma,Ne=f.stencil?Zl:$u);const ut={colorFormat:e.outputEncoding===On?35907:32856,depthFormat:Pe,scaleFactor:s};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(ut),i.updateRenderState({layers:[u]}),p=new pi(u.textureWidth,u.textureHeight,{format:Ai,type:pa,depthTexture:new GT(u.textureWidth,u.textureHeight,Ne,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(p).__ignoreDepthValues=u.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),o=yield i.requestReferenceSpace(a),pe.setContext(i),pe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Ee){return Z.apply(this,arguments)}}();const M=new C,k=new C;function Y(Z,Ee){null===Ee?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(Ee.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(null===i)return;w.near=x.near=y.near=Z.near,w.far=x.far=y.far=Z.far,(P!==w.near||U!==w.far)&&(i.updateRenderState({depthNear:w.near,depthFar:w.far}),P=w.near,U=w.far);const Ee=Z.parent,Re=w.cameras;Y(w,Ee);for(let Pe=0;Pe<Re.length;Pe++)Y(Re[Pe],Ee);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),Z.position.copy(w.position),Z.quaternion.copy(w.quaternion),Z.scale.copy(w.scale),Z.matrix.copy(w.matrix),Z.matrixWorld.copy(w.matrixWorld);const Ne=Z.children;for(let Pe=0,ut=Ne.length;Pe<ut;Pe++)Ne[Pe].updateMatrixWorld(!0);2===Re.length?function Ae(Z,Ee,Re){M.setFromMatrixPosition(Ee.matrixWorld),k.setFromMatrixPosition(Re.matrixWorld);const Ne=M.distanceTo(k),Pe=Ee.projectionMatrix.elements,ut=Re.projectionMatrix.elements,qt=Pe[14]/(Pe[10]-1),Ct=Pe[14]/(Pe[10]+1),xe=(Pe[9]+1)/Pe[5],fn=(Pe[9]-1)/Pe[5],Ut=(Pe[8]-1)/Pe[0],Ht=(ut[8]+1)/ut[0],He=qt*Ut,Kt=qt*Ht,ve=Ne/(-Ut+Ht),Se=ve*-Ut;Ee.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Se),Z.translateZ(ve),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const Fe=qt+ve,it=Ct+ve;Z.projectionMatrix.makePerspective(He-Se,Kt+(Ne-Se),xe*Ct/it*Fe,fn*Ct/it*Fe,Fe,it)}(w,y,x):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(Z){null!==u&&(u.fixedFoveation=Z),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=Z)};let oe=null;const pe=new dT;pe.setAnimationLoop(function ne(Z,Ee){if(l=Ee.getViewerPose(o),h=Ee,null!==l){const Ne=l.views;null!==d&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let Pe=!1;Ne.length!==w.cameras.length&&(w.cameras.length=0,Pe=!0);for(let ut=0;ut<Ne.length;ut++){const qt=Ne[ut];let Ct=null;if(null!==d)Ct=d.getViewport(qt);else{const fn=c.getViewSubImage(u,qt);Ct=fn.viewport,0===ut&&(e.setRenderTargetTextures(p,fn.colorTexture,u.ignoreDepthValues?void 0:fn.depthStencilTexture),e.setRenderTarget(p))}const xe=_[ut];xe.matrix.fromArray(qt.transform.matrix),xe.projectionMatrix.fromArray(qt.projectionMatrix),xe.viewport.set(Ct.x,Ct.y,Ct.width,Ct.height),0===ut&&w.matrix.copy(xe.matrix),!0===Pe&&w.cameras.push(xe)}}const Re=i.inputSources;for(let Ne=0;Ne<g.length;Ne++)g[Ne].update(Re[Ne],Ee,o);oe&&oe(Z,Ee),h=null}),this.setAnimationLoop=function(Z){oe=Z},this.dispose=function(){}}}function M5(n,e){function i(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,1===g.side&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),1===g.side&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;const _=!0!==n.physicallyCorrectLights?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*_}let y,x;g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity),g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix)),g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),p.uv2Transform.value.copy(x.matrix))}return{refreshFogUniforms:function t(p,g){p.fogColor.value.copy(g.color),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)},refreshMaterialUniforms:function r(p,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(p,g):g.isMeshToonMaterial?(i(p,g),function u(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}(p,g)):g.isMeshPhongMaterial?(i(p,g),function c(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}(p,g)):g.isMeshStandardMaterial?(i(p,g),function d(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}(p,g),g.isMeshPhysicalMaterial&&function h(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&p.clearcoatNormalScale.value.negate())),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}(p,g,x)):g.isMeshMatcapMaterial?(i(p,g),function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}(p,g)):g.isMeshDepthMaterial?i(p,g):g.isMeshDistanceMaterial?(i(p,g),function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}(p,g)):g.isMeshNormalMaterial?i(p,g):g.isLineBasicMaterial?(function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}(p,g),g.isLineDashedMaterial&&function o(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}(p,g)):g.isPointsMaterial?function a(p,g,v,y){let x;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=.5*y,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),void 0!==x&&(!0===x.matrixAutoUpdate&&x.updateMatrix(),p.uvTransform.value.copy(x.matrix))}(p,g,v,y):g.isSpriteMaterial?function l(p,g){let v;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function yn(n={}){const e=void 0!==n.canvas?n.canvas:function E5(){const n=Ju("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,i=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=void 0!==n.context?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=js,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const p=this;let g=!1,v=0,y=0,x=null,_=-1,w=null;const P=new gn,U=new gn;let j=null,ce=e.width,q=e.height,M=1,k=null,Ae=null;const Y=new gn(0,0,ce,q),oe=new gn(0,0,ce,q);let ne=!1;const pe=new Wf;let Z=!1,Ee=!1,Re=null;const Ne=new rt,Pe=new Ce,ut=new C,qt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ct(){return null===x?M:1}let Ut,Ht,He,Kt,ve,Se,Fe,it,Ye,Nt,vt,ht,Hn,Cn,I,S,fe,Le,Xe,Je,yt,ge,Vt,xe=t;function fn(R,ee){for(let ue=0;ue<R.length;ue++){const we=e.getContext(R[ue],ee);if(null!==we)return we}return null}try{const R={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r139"),e.addEventListener("webglcontextlost",W,!1),e.addEventListener("webglcontextrestored",je,!1),null===xe){const ee=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&ee.shift(),xe=fn(ee,R),null===xe)throw fn(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xe.getShaderPrecisionFormat&&(xe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function Xt(){Ut=new z4(xe),Ht=new N4(xe,Ut,n),Ut.init(Ht),ge=new x5(xe,Ut,Ht),He=new v5(xe,Ut,Ht),Kt=new j4(xe),ve=new a5,Se=new _5(xe,Ut,He,ve,Ht,ge,Kt),Fe=new B4(p),it=new V4(p),Ye=new kV(xe,Ht),Vt=new O4(xe,Ut,Ye,Ht),Nt=new G4(xe,Ye,Kt,Vt),vt=new Y4(xe,Nt,Ye,Kt),Xe=new X4(xe,Ht,Se),S=new k4(ve),ht=new o5(p,Fe,it,Ut,Ht,Vt,S),Hn=new M5(p,ve),Cn=new c5,I=new m5(Ut,Ht),Le=new L4(p,Fe,He,vt,u,o),fe=new VT(p,vt,Ht),Je=new F4(xe,Ut,Kt,Ht),yt=new W4(xe,Ut,Kt,Ht),Kt.programs=ht.programs,p.capabilities=Ht,p.extensions=Ut,p.properties=ve,p.renderLists=Cn,p.shadowMap=fe,p.state=He,p.info=Kt}Xt();const st=new b5(p,xe);function W(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const R=Kt.autoReset,ee=fe.enabled,ue=fe.autoUpdate,se=fe.needsUpdate,we=fe.type;Xt(),Kt.autoReset=R,fe.enabled=ee,fe.autoUpdate=ue,fe.needsUpdate=se,fe.type=we}function ze(R){const ee=R.target;ee.removeEventListener("dispose",ze),function xt(R){(function Ke(R){const ee=ve.get(R).programs;void 0!==ee&&(ee.forEach(function(ue){ht.releaseProgram(ue)}),R.isShaderMaterial&&ht.releaseShaderCache(R))})(R),ve.remove(R)}(ee)}this.xr=st,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const R=Ut.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=Ut.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(R){void 0!==R&&(M=R,this.setSize(ce,q,!1))},this.getSize=function(R){return R.set(ce,q)},this.setSize=function(R,ee,ue){st.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ce=R,q=ee,e.width=Math.floor(R*M),e.height=Math.floor(ee*M),!1!==ue&&(e.style.width=R+"px",e.style.height=ee+"px"),this.setViewport(0,0,R,ee))},this.getDrawingBufferSize=function(R){return R.set(ce*M,q*M).floor()},this.setDrawingBufferSize=function(R,ee,ue){ce=R,q=ee,M=ue,e.width=Math.floor(R*ue),e.height=Math.floor(ee*ue),this.setViewport(0,0,R,ee)},this.getCurrentViewport=function(R){return R.copy(P)},this.getViewport=function(R){return R.copy(Y)},this.setViewport=function(R,ee,ue,se){R.isVector4?Y.set(R.x,R.y,R.z,R.w):Y.set(R,ee,ue,se),He.viewport(P.copy(Y).multiplyScalar(M).floor())},this.getScissor=function(R){return R.copy(oe)},this.setScissor=function(R,ee,ue,se){R.isVector4?oe.set(R.x,R.y,R.z,R.w):oe.set(R,ee,ue,se),He.scissor(U.copy(oe).multiplyScalar(M).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(R){He.setScissorTest(ne=R)},this.setOpaqueSort=function(R){k=R},this.setTransparentSort=function(R){Ae=R},this.getClearColor=function(R){return R.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(R=!0,ee=!0,ue=!0){let se=0;R&&(se|=16384),ee&&(se|=256),ue&&(se|=1024),xe.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",W,!1),e.removeEventListener("webglcontextrestored",je,!1),Cn.dispose(),I.dispose(),ve.dispose(),Fe.dispose(),it.dispose(),vt.dispose(),Vt.dispose(),ht.dispose(),st.dispose(),st.removeEventListener("sessionstart",Rt),st.removeEventListener("sessionend",In),Re&&(Re.dispose(),Re=null),sn.stop()},this.renderBufferDirect=function(R,ee,ue,se,we,bt){null===ee&&(ee=qt);const kt=we.isMesh&&we.matrixWorld.determinant()<0,Yt=function iW(R,ee,ue,se,we){!0!==ee.isScene&&(ee=qt),Se.resetTextureUnits();const bt=ee.fog,Yt=null===x?p.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:js,Gt=(se.isMeshStandardMaterial?it:Fe).get(se.envMap||(se.isMeshStandardMaterial?ee.environment:null)),vn=!0===se.vertexColors&&!!ue.attributes.color&&4===ue.attributes.color.itemSize,an=!!se.normalMap&&!!ue.attributes.tangent,ln=!!ue.morphAttributes.position,jn=!!ue.morphAttributes.normal,ka=!!ue.morphAttributes.color,Fc=se.toneMapped?p.toneMapping:0,Nc=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Cs=void 0!==Nc?Nc.length:0,pn=ve.get(se),kc=h.state.lights;!0!==Z||!0!==Ee&&R===w||S.setState(se,R,R===w&&se.id===_);let ar=!1;se.version===pn.__version?(pn.needsLights&&pn.lightsStateVersion!==kc.state.version||pn.outputEncoding!==Yt||we.isInstancedMesh&&!1===pn.instancing||!we.isInstancedMesh&&!0===pn.instancing||we.isSkinnedMesh&&!1===pn.skinning||!we.isSkinnedMesh&&!0===pn.skinning||pn.envMap!==Gt||se.fog&&pn.fog!==bt||void 0!==pn.numClippingPlanes&&(pn.numClippingPlanes!==S.numPlanes||pn.numIntersection!==S.numIntersection)||pn.vertexAlphas!==vn||pn.vertexTangents!==an||pn.morphTargets!==ln||pn.morphNormals!==jn||pn.morphColors!==ka||pn.toneMapping!==Fc||!0===Ht.isWebGL2&&pn.morphTargetsCount!==Cs)&&(ar=!0):(ar=!0,pn.__version=se.version);let Ts=pn.currentProgram;!0===ar&&(Ts=O0(se,ee,we));let jo=!1,wd=!1,F0=!1;const kr=Ts.getUniforms(),bd=pn.uniforms;if(He.useProgram(Ts.program)&&(jo=!0,wd=!0,F0=!0),se.id!==_&&(_=se.id,wd=!0),jo||w!==R){if(kr.setValue(xe,"projectionMatrix",R.projectionMatrix),Ht.logarithmicDepthBuffer&&kr.setValue(xe,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),w!==R&&(w=R,wd=!0,F0=!0),se.isShaderMaterial||se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshStandardMaterial||se.envMap){const is=kr.map.cameraPosition;void 0!==is&&is.setValue(xe,ut.setFromMatrixPosition(R.matrixWorld))}(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&kr.setValue(xe,"isOrthographic",!0===R.isOrthographicCamera),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial||se.isShadowMaterial||we.isSkinnedMesh)&&kr.setValue(xe,"viewMatrix",R.matrixWorldInverse)}if(we.isSkinnedMesh){kr.setOptional(xe,we,"bindMatrix"),kr.setOptional(xe,we,"bindMatrixInverse");const is=we.skeleton;is&&(Ht.floatVertexTextures?(null===is.boneTexture&&is.computeBoneTexture(),kr.setValue(xe,"boneTexture",is.boneTexture,Se),kr.setValue(xe,"boneTextureSize",is.boneTextureSize)):kr.setOptional(xe,is,"boneMatrices"))}const N0=ue.morphAttributes;return(void 0!==N0.position||void 0!==N0.normal||void 0!==N0.color&&!0===Ht.isWebGL2)&&Xe.update(we,ue,se,Ts),(wd||pn.receiveShadow!==we.receiveShadow)&&(pn.receiveShadow=we.receiveShadow,kr.setValue(xe,"receiveShadow",we.receiveShadow)),wd&&(kr.setValue(xe,"toneMappingExposure",p.toneMappingExposure),pn.needsLights&&function sW(R,ee){R.ambientLightColor.needsUpdate=ee,R.lightProbe.needsUpdate=ee,R.directionalLights.needsUpdate=ee,R.directionalLightShadows.needsUpdate=ee,R.pointLights.needsUpdate=ee,R.pointLightShadows.needsUpdate=ee,R.spotLights.needsUpdate=ee,R.spotLightShadows.needsUpdate=ee,R.rectAreaLights.needsUpdate=ee,R.hemisphereLights.needsUpdate=ee}(bd,F0),bt&&se.fog&&Hn.refreshFogUniforms(bd,bt),Hn.refreshMaterialUniforms(bd,se,M,q,Re),ko.upload(xe,pn.uniformsList,bd,Se)),se.isShaderMaterial&&!0===se.uniformsNeedUpdate&&(ko.upload(xe,pn.uniformsList,bd,Se),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&kr.setValue(xe,"center",we.center),kr.setValue(xe,"modelViewMatrix",we.modelViewMatrix),kr.setValue(xe,"normalMatrix",we.normalMatrix),kr.setValue(xe,"modelMatrix",we.matrixWorld),Ts}(R,ee,ue,se,we);He.setMaterial(se,kt);let Gt=ue.index;const vn=ue.attributes.position;if(null===Gt){if(void 0===vn||0===vn.count)return}else if(0===Gt.count)return;let an=1;!0===se.wireframe&&(Gt=Nt.getWireframeAttribute(ue),an=2),Vt.setup(we,se,Yt,ue,Gt);let ln,jn=Je;null!==Gt&&(ln=Ye.get(Gt),jn=yt,jn.setIndex(ln));const ka=null!==Gt?Gt.count:vn.count,Fc=ue.drawRange.start*an,Nc=ue.drawRange.count*an,Cs=null!==bt?bt.start*an:0,pn=null!==bt?bt.count*an:1/0,kc=Math.max(Fc,Cs),ar=Math.min(ka,Fc+Nc,Cs+pn)-1,Ts=Math.max(0,ar-kc+1);if(0!==Ts){if(we.isMesh)!0===se.wireframe?(He.setLineWidth(se.wireframeLinewidth*Ct()),jn.setMode(1)):jn.setMode(4);else if(we.isLine){let jo=se.linewidth;void 0===jo&&(jo=1),He.setLineWidth(jo*Ct()),jn.setMode(we.isLineSegments?1:we.isLineLoop?2:3)}else we.isPoints?jn.setMode(0):we.isSprite&&jn.setMode(4);if(we.isInstancedMesh)jn.renderInstances(kc,Ts,we.count);else if(ue.isInstancedBufferGeometry){const jo=Math.min(ue.instanceCount,ue._maxInstanceCount);jn.renderInstances(kc,Ts,jo)}else jn.render(kc,Ts)}},this.compile=function(R,ee){h=I.get(R),h.init(),m.push(h),R.traverseVisible(function(ue){ue.isLight&&ue.layers.test(ee.layers)&&(h.pushLight(ue),ue.castShadow&&h.pushShadow(ue))}),h.setupLights(p.physicallyCorrectLights),R.traverse(function(ue){const se=ue.material;if(se)if(Array.isArray(se))for(let we=0;we<se.length;we++)O0(se[we],R,ue);else O0(se,R,ue)}),m.pop(),h=null};let wt=null;function Rt(){sn.stop()}function In(){sn.start()}const sn=new dT;function Es(R,ee,ue,se){if(!1===R.visible)return;if(R.layers.test(ee.layers))if(R.isGroup)ue=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update(ee);else if(R.isLight)h.pushLight(R),R.castShadow&&h.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||pe.intersectsSprite(R)){se&&ut.setFromMatrixPosition(R.matrixWorld).applyMatrix4(Ne);const kt=vt.update(R),Yt=R.material;Yt.visible&&d.push(R,kt,Yt,ue,ut.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(R.isSkinnedMesh&&R.skeleton.frame!==Kt.render.frame&&(R.skeleton.update(),R.skeleton.frame=Kt.render.frame),!R.frustumCulled||pe.intersectsObject(R))){se&&ut.setFromMatrixPosition(R.matrixWorld).applyMatrix4(Ne);const kt=vt.update(R),Yt=R.material;if(Array.isArray(Yt)){const Gt=kt.groups;for(let vn=0,an=Gt.length;vn<an;vn++){const ln=Gt[vn],jn=Yt[ln.materialIndex];jn&&jn.visible&&d.push(R,kt,jn,ue,ut.z,ln)}}else Yt.visible&&d.push(R,kt,Yt,ue,ut.z,null)}const bt=R.children;for(let kt=0,Yt=bt.length;kt<Yt;kt++)Es(bt[kt],ee,ue,se)}function Ss(R,ee,ue,se){const we=R.opaque,bt=R.transmissive,kt=R.transparent;h.setupLightsView(ue),bt.length>0&&function nW(R,ee,ue){const se=Ht.isWebGL2;null===Re&&(Re=new pi(1,1,{generateMipmaps:!0,type:null!==ge.convert(Yl)?Yl:pa,minFilter:1008,samples:se&&!0===s?4:0})),p.getDrawingBufferSize(Pe),se?Re.setSize(Pe.x,Pe.y):Re.setSize(wf(Pe.x),wf(Pe.y));const we=p.getRenderTarget();p.setRenderTarget(Re),p.clear();const bt=p.toneMapping;p.toneMapping=0,kp(R,ee,ue),p.toneMapping=bt,Se.updateMultisampleRenderTarget(Re),Se.updateRenderTargetMipmap(Re),p.setRenderTarget(we)}(we,ee,ue),se&&He.viewport(P.copy(se)),we.length>0&&kp(we,ee,ue),bt.length>0&&kp(bt,ee,ue),kt.length>0&&kp(kt,ee,ue),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function kp(R,ee,ue){const se=!0===ee.isScene?ee.overrideMaterial:null;for(let we=0,bt=R.length;we<bt;we++){const kt=R[we],Yt=kt.object,Gt=kt.geometry,vn=null===se?kt.material:se,an=kt.group;Yt.layers.test(ue.layers)&&rW(Yt,ee,ue,Gt,vn,an)}}function rW(R,ee,ue,se,we,bt){R.onBeforeRender(p,ee,ue,se,we,bt),R.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),we.onBeforeRender(p,ee,ue,se,R,bt),!0===we.transparent&&2===we.side?(we.side=1,we.needsUpdate=!0,p.renderBufferDirect(ue,ee,se,we,R,bt),we.side=0,we.needsUpdate=!0,p.renderBufferDirect(ue,ee,se,we,R,bt),we.side=2):p.renderBufferDirect(ue,ee,se,we,R,bt),R.onAfterRender(p,ee,ue,se,we,bt)}function O0(R,ee,ue){!0!==ee.isScene&&(ee=qt);const se=ve.get(R),we=h.state.lights,kt=we.state.version,Yt=ht.getParameters(R,we.state,h.state.shadowsArray,ee,ue),Gt=ht.getProgramCacheKey(Yt);let vn=se.programs;se.environment=R.isMeshStandardMaterial?ee.environment:null,se.fog=ee.fog,se.envMap=(R.isMeshStandardMaterial?it:Fe).get(R.envMap||se.environment),void 0===vn&&(R.addEventListener("dispose",ze),vn=new Map,se.programs=vn);let an=vn.get(Gt);if(void 0!==an){if(se.currentProgram===an&&se.lightsStateVersion===kt)return wD(R,Yt),an}else Yt.uniforms=ht.getUniforms(R),R.onBuild(ue,Yt,p),R.onBeforeCompile(Yt,p),an=ht.acquireProgram(Yt,Gt),vn.set(Gt,an),se.uniforms=Yt.uniforms;const ln=se.uniforms;(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(ln.clippingPlanes=S.uniform),wD(R,Yt),se.needsLights=function oW(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),se.lightsStateVersion=kt,se.needsLights&&(ln.ambientLightColor.value=we.state.ambient,ln.lightProbe.value=we.state.probe,ln.directionalLights.value=we.state.directional,ln.directionalLightShadows.value=we.state.directionalShadow,ln.spotLights.value=we.state.spot,ln.spotLightShadows.value=we.state.spotShadow,ln.rectAreaLights.value=we.state.rectArea,ln.ltc_1.value=we.state.rectAreaLTC1,ln.ltc_2.value=we.state.rectAreaLTC2,ln.pointLights.value=we.state.point,ln.pointLightShadows.value=we.state.pointShadow,ln.hemisphereLights.value=we.state.hemi,ln.directionalShadowMap.value=we.state.directionalShadowMap,ln.directionalShadowMatrix.value=we.state.directionalShadowMatrix,ln.spotShadowMap.value=we.state.spotShadowMap,ln.spotShadowMatrix.value=we.state.spotShadowMatrix,ln.pointShadowMap.value=we.state.pointShadowMap,ln.pointShadowMatrix.value=we.state.pointShadowMatrix);const jn=an.getUniforms(),ka=ko.seqWithValue(jn.seq,ln);return se.currentProgram=an,se.uniformsList=ka,an}function wD(R,ee){const ue=ve.get(R);ue.outputEncoding=ee.outputEncoding,ue.instancing=ee.instancing,ue.skinning=ee.skinning,ue.morphTargets=ee.morphTargets,ue.morphNormals=ee.morphNormals,ue.morphColors=ee.morphColors,ue.morphTargetsCount=ee.morphTargetsCount,ue.numClippingPlanes=ee.numClippingPlanes,ue.numIntersection=ee.numClipIntersection,ue.vertexAlphas=ee.vertexAlphas,ue.vertexTangents=ee.vertexTangents,ue.toneMapping=ee.toneMapping}sn.setAnimationLoop(function Ve(R){wt&&wt(R)}),"undefined"!=typeof self&&sn.setContext(self),this.setAnimationLoop=function(R){wt=R,st.setAnimationLoop(R),null===R?sn.stop():sn.start()},st.addEventListener("sessionstart",Rt),st.addEventListener("sessionend",In),this.render=function(R,ee){if(void 0===ee||!0===ee.isCamera){if(!0!==g){if(!0===R.autoUpdate&&R.updateMatrixWorld(),null===ee.parent&&ee.updateMatrixWorld(),!0===st.enabled&&!0===st.isPresenting&&(!0===st.cameraAutoUpdate&&st.updateCamera(ee),ee=st.getCamera()),!0===R.isScene&&R.onBeforeRender(p,R,ee,x),h=I.get(R,m.length),h.init(),m.push(h),Ne.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),pe.setFromProjectionMatrix(Ne),Ee=this.localClippingEnabled,Z=S.init(this.clippingPlanes,Ee,ee),d=Cn.get(R,f.length),d.init(),f.push(d),Es(R,ee,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(k,Ae),!0===Z&&S.beginShadows(),fe.render(h.state.shadowsArray,R,ee),!0===Z&&S.endShadows(),!0===this.info.autoReset&&this.info.reset(),Le.render(d,R),h.setupLights(p.physicallyCorrectLights),ee.isArrayCamera){const se=ee.cameras;for(let we=0,bt=se.length;we<bt;we++){const kt=se[we];Ss(d,R,kt,kt.viewport)}}else Ss(d,R,ee);null!==x&&(Se.updateMultisampleRenderTarget(x),Se.updateRenderTargetMipmap(x)),!0===R.isScene&&R.onAfterRender(p,R,ee),Vt.resetDefaultState(),_=-1,w=null,m.pop(),h=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(R,ee,ue){ve.get(R.texture).__webglTexture=ee,ve.get(R.depthTexture).__webglTexture=ue;const se=ve.get(R);se.__hasExternalTextures=!0,se.__hasExternalTextures&&(se.__autoAllocateDepthBuffer=void 0===ue,se.__autoAllocateDepthBuffer||!0===Ut.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(R,ee){const ue=ve.get(R);ue.__webglFramebuffer=ee,ue.__useDefaultFramebuffer=void 0===ee},this.setRenderTarget=function(R,ee=0,ue=0){x=R,v=ee,y=ue;let se=!0;if(R){const Gt=ve.get(R);void 0!==Gt.__useDefaultFramebuffer?(He.bindFramebuffer(36160,null),se=!1):void 0===Gt.__webglFramebuffer?Se.setupRenderTarget(R):Gt.__hasExternalTextures&&Se.rebindTextures(R,ve.get(R.texture).__webglTexture,ve.get(R.depthTexture).__webglTexture)}let we=null,bt=!1,kt=!1;if(R){const Gt=R.texture;(Gt.isData3DTexture||Gt.isDataArrayTexture)&&(kt=!0);const vn=ve.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(we=vn[ee],bt=!0):we=Ht.isWebGL2&&R.samples>0&&!1===Se.useMultisampledRTT(R)?ve.get(R).__webglMultisampledFramebuffer:vn,P.copy(R.viewport),U.copy(R.scissor),j=R.scissorTest}else P.copy(Y).multiplyScalar(M).floor(),U.copy(oe).multiplyScalar(M).floor(),j=ne;if(He.bindFramebuffer(36160,we)&&Ht.drawBuffers&&se&&He.drawBuffers(R,we),He.viewport(P),He.scissor(U),He.setScissorTest(j),bt){const Gt=ve.get(R.texture);xe.framebufferTexture2D(36160,36064,34069+ee,Gt.__webglTexture,ue)}else if(kt){const Gt=ve.get(R.texture);xe.framebufferTextureLayer(36160,36064,Gt.__webglTexture,ue||0,ee||0)}_=-1},this.readRenderTargetPixels=function(R,ee,ue,se,we,bt,kt){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Yt=ve.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==kt&&(Yt=Yt[kt]),Yt){He.bindFramebuffer(36160,Yt);try{const Gt=R.texture,vn=Gt.format,an=Gt.type;if(vn!==Ai&&ge.convert(vn)!==xe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ln=an===Yl&&(Ut.has("EXT_color_buffer_half_float")||Ht.isWebGL2&&Ut.has("EXT_color_buffer_float"));if(!(an===pa||ge.convert(an)===xe.getParameter(35738)||an===Do&&(Ht.isWebGL2||Ut.has("OES_texture_float")||Ut.has("WEBGL_color_buffer_float"))||ln))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ee>=0&&ee<=R.width-se&&ue>=0&&ue<=R.height-we&&xe.readPixels(ee,ue,se,we,ge.convert(vn),ge.convert(an),bt)}finally{const Gt=null!==x?ve.get(x).__webglFramebuffer:null;He.bindFramebuffer(36160,Gt)}}},this.copyFramebufferToTexture=function(R,ee,ue=0){if(!0!==ee.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const se=Math.pow(2,-ue),we=Math.floor(ee.image.width*se),bt=Math.floor(ee.image.height*se);Se.setTexture2D(ee,0),xe.copyTexSubImage2D(3553,ue,0,0,R.x,R.y,we,bt),He.unbindTexture()},this.copyTextureToTexture=function(R,ee,ue,se=0){const we=ee.image.width,bt=ee.image.height,kt=ge.convert(ue.format),Yt=ge.convert(ue.type);Se.setTexture2D(ue,0),xe.pixelStorei(37440,ue.flipY),xe.pixelStorei(37441,ue.premultiplyAlpha),xe.pixelStorei(3317,ue.unpackAlignment),ee.isDataTexture?xe.texSubImage2D(3553,se,R.x,R.y,we,bt,kt,Yt,ee.image.data):ee.isCompressedTexture?xe.compressedTexSubImage2D(3553,se,R.x,R.y,ee.mipmaps[0].width,ee.mipmaps[0].height,kt,ee.mipmaps[0].data):xe.texSubImage2D(3553,se,R.x,R.y,kt,Yt,ee.image),0===se&&ue.generateMipmaps&&xe.generateMipmap(3553),He.unbindTexture()},this.copyTextureToTexture3D=function(R,ee,ue,se,we=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const bt=R.max.x-R.min.x+1,kt=R.max.y-R.min.y+1,Yt=R.max.z-R.min.z+1,Gt=ge.convert(se.format),vn=ge.convert(se.type);let an;if(se.isData3DTexture)Se.setTexture3D(se,0),an=32879;else{if(!se.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Se.setTexture2DArray(se,0),an=35866}xe.pixelStorei(37440,se.flipY),xe.pixelStorei(37441,se.premultiplyAlpha),xe.pixelStorei(3317,se.unpackAlignment);const ln=xe.getParameter(3314),jn=xe.getParameter(32878),ka=xe.getParameter(3316),Fc=xe.getParameter(3315),Nc=xe.getParameter(32877),Cs=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;xe.pixelStorei(3314,Cs.width),xe.pixelStorei(32878,Cs.height),xe.pixelStorei(3316,R.min.x),xe.pixelStorei(3315,R.min.y),xe.pixelStorei(32877,R.min.z),ue.isDataTexture||ue.isData3DTexture?xe.texSubImage3D(an,we,ee.x,ee.y,ee.z,bt,kt,Yt,Gt,vn,Cs.data):ue.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xe.compressedTexSubImage3D(an,we,ee.x,ee.y,ee.z,bt,kt,Yt,Gt,Cs.data)):xe.texSubImage3D(an,we,ee.x,ee.y,ee.z,bt,kt,Yt,Gt,vn,Cs),xe.pixelStorei(3314,ln),xe.pixelStorei(32878,jn),xe.pixelStorei(3316,ka),xe.pixelStorei(3315,Fc),xe.pixelStorei(32877,Nc),0===we&&se.generateMipmaps&&xe.generateMipmap(an),He.unbindTexture()},this.initTexture=function(R){Se.setTexture2D(R,0),He.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,He.reset(),Vt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}yn.prototype.isWebGLRenderer=!0,class S5 extends yn{}.prototype.isWebGL1Renderer=!0;class Xf{constructor(e,t=25e-5){this.name="",this.color=new qe(e),this.density=t}clone(){return new Xf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Xf.prototype.isFogExp2=!0;class Yf{constructor(e,t=1,r=1e3){this.name="",this.color=new qe(e),this.near=t,this.far=r}clone(){return new Yf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Yf.prototype.isFog=!0;class Zf extends hn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Zf.prototype.isScene=!0;class wc{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=qu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=fi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}wc.prototype.isInterleavedBuffer=!0;const Yr=new C;class Ra{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.applyMatrix4(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.applyNormalMatrix(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.transformDirection(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Sn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ra(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ra.prototype.isInterleavedBufferAttribute=!0;class t0 extends sr{constructor(e){super(),this.type="SpriteMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let bc;t0.prototype.isSpriteMaterial=!0;const id=new C,Mc=new C,Ec=new C,Sc=new Ce,sd=new Ce,WT=new rt,Jf=new C,od=new C,Qf=new C,jT=new Ce,n0=new Ce,$T=new Ce;function Kf(n,e,t,r,i,s){Sc.subVectors(n,t).addScalar(.5).multiply(r),void 0!==i?(sd.x=s*Sc.x-i*Sc.y,sd.y=i*Sc.x+s*Sc.y):sd.copy(Sc),n.copy(e),n.x+=sd.x,n.y+=sd.y,n.applyMatrix4(WT)}(class qT extends hn{constructor(e){if(super(),this.type="Sprite",void 0===bc){bc=new gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new wc(t,5);bc.setIndex([0,1,2,0,2,3]),bc.setAttribute("position",new Ra(r,3,0,!1)),bc.setAttribute("uv",new Ra(r,2,3,!1))}this.geometry=bc,this.material=void 0!==e?e:new t0,this.center=new Ce(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Mc.setFromMatrixScale(this.matrixWorld),WT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ec.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Mc.multiplyScalar(-Ec.z);const r=this.material.rotation;let i,s;0!==r&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Kf(Jf.set(-.5,-.5,0),Ec,o,Mc,i,s),Kf(od.set(.5,-.5,0),Ec,o,Mc,i,s),Kf(Qf.set(.5,.5,0),Ec,o,Mc,i,s),jT.set(0,0),n0.set(1,0),$T.set(1,1);let a=e.ray.intersectTriangle(Jf,od,Qf,!1,id);if(null===a&&(Kf(od.set(-.5,.5,0),Ec,o,Mc,i,s),n0.set(0,1),a=e.ray.intersectTriangle(Jf,Qf,od,!1,id),null===a))return;const l=e.ray.origin.distanceTo(id);l<e.near||l>e.far||t.push({distance:l,point:id.clone(),uv:ir.getUV(id,Jf,od,Qf,jT,n0,$T,new Ce),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const YT=new C,ZT=new gn,JT=new gn,T5=new C,QT=new rt;class r0 extends wr{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new rt,this.bindMatrixInverse=new rt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;ZT.fromBufferAttribute(i.attributes.skinIndex,e),JT.fromBufferAttribute(i.attributes.skinWeight,e),YT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=JT.getComponent(s);if(0!==o){const a=ZT.getComponent(s);QT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(T5.copy(YT).applyMatrix4(QT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}r0.prototype.isSkinnedMesh=!0;(class s0 extends hn{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class Cc extends ri{constructor(e=null,t=1,r=1,i,s,o,a,l,c=pr,u=pr,d,h){super(null,o,a,l,c,u,i,s,d,h),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Tc extends Sn{constructor(e,t,r,i=1){"number"==typeof r&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Tc.prototype.isInstancedBufferAttribute=!0;const e1=new rt,t1=new rt,tp=[],ad=new wr;(class n1 extends wr{constructor(e,t,r){super(e,t),this.instanceMatrix=new Tc(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(ad.geometry=this.geometry,ad.material=this.material,void 0!==ad.material)for(let s=0;s<i;s++){this.getMatrixAt(s,e1),t1.multiplyMatrices(r,e1),ad.matrixWorld=t1,ad.raycast(e,tp);for(let o=0,a=tp.length;o<a;o++){const l=tp[o];l.instanceId=s,l.object=this,t.push(l)}tp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Tc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Tr extends sr{constructor(e){super(),this.type="LineBasicMaterial",this.color=new qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Tr.prototype.isLineBasicMaterial=!0;const r1=new C,i1=new C,s1=new rt,a0=new Sa,np=new Ea;class Ia extends hn{constructor(e=new gt,t=new Tr){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)r1.fromBufferAttribute(t,i-1),i1.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=r1.distanceTo(i1);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),np.copy(r.boundingSphere),np.applyMatrix4(i),np.radius+=s,!1===e.ray.intersectsSphere(np))return;s1.copy(i).invert(),a0.copy(e.ray).applyMatrix4(s1);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new C,u=new C,d=new C,h=new C,f=this.isLineSegments?2:1;if(r.isBufferGeometry){const m=r.index,g=r.attributes.position;if(null!==m)for(let x=Math.max(0,o.start),_=Math.min(m.count,o.start+o.count)-1;x<_;x+=f){const w=m.getX(x),P=m.getX(x+1);if(c.fromBufferAttribute(g,w),u.fromBufferAttribute(g,P),a0.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(h);j<e.near||j>e.far||t.push({distance:j,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count)-1;x<_;x+=f){if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,x+1),a0.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(h);P<e.near||P>e.far||t.push({distance:P,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ia.prototype.isLine=!0;const o1=new C,a1=new C;class Dc extends Ia{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)o1.fromBufferAttribute(t,i),a1.fromBufferAttribute(t,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+o1.distanceTo(a1);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Dc.prototype.isLineSegments=!0;(class l1 extends Ia{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class rp extends sr{constructor(e){super(),this.type="PointsMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}rp.prototype.isPointsMaterial=!0;const c1=new rt,l0=new Sa,ip=new Ea,sp=new C;class c0 extends hn{constructor(e=new gt,t=new rp){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),ip.copy(r.boundingSphere),ip.applyMatrix4(i),ip.radius+=s,!1===e.ray.intersectsSphere(ip))return;c1.copy(i).invert(),l0.copy(e.ray).applyMatrix4(c1);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(r.isBufferGeometry){const c=r.index,d=r.attributes.position;if(null!==c)for(let m=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);m<p;m++){const g=c.getX(m);sp.fromBufferAttribute(d,g),u1(sp,g,l,i,e,t,this)}else for(let m=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);m<p;m++)sp.fromBufferAttribute(d,m),u1(sp,m,l,i,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function u1(n,e,t,r,i,s,o){const a=l0.distanceSqToPoint(n);if(a<t){const l=new C;l0.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}c0.prototype.isPoints=!0,class A5 extends ri{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.minFilter=void 0!==o?o:rr,this.magFilter=void 0!==s?s:rr,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class R5 extends ri{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=pr,this.minFilter=pr,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class d1 extends ri{constructor(e,t,r,i,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,i,s,d,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class I5 extends ri{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Pi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;o=t||e*r[s-1];let c,a=0,l=s-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else{if(!(c>0)){l=i;break}l=i-1}if(i=l,r[i]===o)return i/(s-1);const u=r[i];return(i+(o-u)/(r[i+1]-u))/(s-1)}getTangent(e,t){const r=1e-4;let i=e-r,s=e+r;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ce:new C);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new C,i=[],s=[],o=[],a=new C,l=new rt;for(let f=0;f<=e;f++)i[f]=this.getTangentAt(f/e,new C);s[0]=new C,o[0]=new C;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Yn(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(i[f],s[f])}if(!0===t){let f=Math.acos(Yn(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(i[m],f*m)),o[m].crossVectors(i[m],s[m])}return{tangents:i,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class op extends Pi{constructor(e=0,t=0,r=1,i=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Ce,i=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(s=o?0:i),!0===this.aClockwise&&!o&&(s===i?s=-i:s-=i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}op.prototype.isEllipseCurve=!0;class h1 extends op{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.type="ArcCurve"}}function u0(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,i(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+r*(o*s)}}}h1.prototype.isArcCurve=!0;const ap=new C,d0=new u0,h0=new u0,f0=new u0;class f1 extends Pi{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new C){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=i[(a-1)%s]:(ap.subVectors(i[0],i[1]).add(i[0]),c=ap);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(ap.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=ap),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),p=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(u),f);p<1e-4&&(p=1),m<1e-4&&(m=p),g<1e-4&&(g=p),d0.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,p,g),h0.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,p,g),f0.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,p,g)}else"catmullrom"===this.curveType&&(d0.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),h0.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),f0.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(d0.calc(l),h0.calc(l),f0.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new C).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function p1(n,e,t,r,i){const s=.5*(r-e),o=.5*(i-t),a=n*n;return(2*t-2*r+s+o)*(n*a)+(-3*t+3*r-2*s-o)*a+s*n+t}function ld(n,e,t,r){return function P5(n,e){const t=1-n;return t*t*e}(n,e)+function L5(n,e){return 2*(1-n)*n*e}(n,t)+function O5(n,e){return n*n*e}(n,r)}function cd(n,e,t,r,i){return function F5(n,e){const t=1-n;return t*t*t*e}(n,e)+function N5(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function k5(n,e){return 3*(1-n)*n*n*e}(n,r)+function B5(n,e){return n*n*n*e}(n,i)}f1.prototype.isCatmullRomCurve3=!0;class p0 extends Pi{constructor(e=new Ce,t=new Ce,r=new Ce,i=new Ce){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ce){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(cd(e,i.x,s.x,o.x,a.x),cd(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}p0.prototype.isCubicBezierCurve=!0;class m1 extends Pi{constructor(e=new C,t=new C,r=new C,i=new C){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new C){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(cd(e,i.x,s.x,o.x,a.x),cd(e,i.y,s.y,o.y,a.y),cd(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}m1.prototype.isCubicBezierCurve3=!0;class lp extends Pi{constructor(e=new Ce,t=new Ce){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Ce;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}lp.prototype.isLineCurve=!0;class m0 extends Pi{constructor(e=new Ce,t=new Ce,r=new Ce){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ce){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ld(e,i.x,s.x,o.x),ld(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}m0.prototype.isQuadraticBezierCurve=!0;class g0 extends Pi{constructor(e=new C,t=new C,r=new C){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new C){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ld(e,i.x,s.x,o.x),ld(e,i.y,s.y,o.y),ld(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}g0.prototype.isQuadraticBezierCurve3=!0;class y0 extends Pi{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[0===o?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(p1(a,l.x,c.x,u.x,d.x),p1(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new Ce).fromArray(i))}return this}}y0.prototype.isSplineCurve=!0;var v0=Object.freeze({__proto__:null,ArcCurve:h1,CatmullRomCurve3:f1,CubicBezierCurve:p0,CubicBezierCurve3:m1,EllipseCurve:op,LineCurve:lp,LineCurve3:class U5 extends Pi{constructor(e=new C,t=new C){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new C){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:m0,QuadraticBezierCurve3:g0,SplineCurve:y0});class H5 extends Pi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new lp(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push((new v0[i.type]).fromJSON(i))}return this}}class ud extends H5{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new lp(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new m0(this.currentPoint.clone(),new Ce(e,t),new Ce(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new p0(this.currentPoint.clone(),new Ce(e,t),new Ce(r,i),new Ce(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new y0(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new op(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}new C,new C,new C,new ir;class Ks extends ud{constructor(e){super(e),this.uuid=fi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push((new ud).fromJSON(i))}return this}}function y1(n,e,t,r,i){let s,o;if(i===function r8(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}(n,e,t,r)>0)for(s=e;s<t;s+=r)o=x1(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=x1(s,n[s],n[s+1],o);return o&&gp(o,o.next)&&(pd(o),o=o.next),o}function Uo(n,e){if(!n)return n;e||(e=n);let r,t=n;do{if(r=!1,t.steiner||!gp(t,t.next)&&0!==Un(t.prev,t,t.next))t=t.next;else{if(pd(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function hd(n,e,t,r,i,s,o){if(!n)return;!o&&s&&function J5(n,e,t,r){let i=n;do{null===i.z&&(i.z=x0(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,function Q5(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,r);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1)}(i)}(n,r,i,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?G5(n,r,i,s):z5(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),pd(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?hd(n=W5(Uo(n),e,t),e,t,r,i,s,2):2===o&&j5(n,e,t,r,i,s):hd(Uo(n),e,t,r,i,s,1);break}}function z5(n){const e=n.prev,t=n,r=n.next;if(Un(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(Rc(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Un(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function G5(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Un(i,s,o)>=0)return!1;const c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,d=x0(i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,e,t,r),h=x0(c,u,e,t,r);let f=n.prevZ,m=n.nextZ;for(;f&&f.z>=d&&m&&m.z<=h;){if(f!==n.prev&&f!==n.next&&Rc(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Un(f.prev,f,f.next)>=0||(f=f.prevZ,m!==n.prev&&m!==n.next&&Rc(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Un(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&Rc(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Un(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==n.prev&&m!==n.next&&Rc(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Un(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function W5(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!gp(i,s)&&v1(i,r,r.next,s)&&fd(i,s)&&fd(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),pd(r),pd(r.next),r=n=s),r=r.next}while(r!==n);return Uo(r)}function j5(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&e8(o,a)){let l=_1(o,a);return o=Uo(o,o.next),l=Uo(l,l.next),hd(o,e,t,r,i,s),void hd(l,e,t,r,i,s)}a=a.next}o=o.next}while(o!==n)}function q5(n,e){return n.x-e.x}function X5(n,e){if(e=function Y5(n,e){let t=e;const r=n.x,i=n.y;let o,s=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s){if(s=h,h===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{r>=t.x&&t.x>=l&&r!==t.x&&Rc(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),fd(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&Z5(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(n,e),e){const t=_1(e,n);Uo(e,e.next),Uo(t,t.next)}}function Z5(n,e){return Un(n.prev,n,e.prev)<0&&Un(e.next,n,n.next)<0}function x0(n,e,t,r,i){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*i)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function K5(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Rc(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function e8(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function t8(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&v1(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(fd(n,e)&&fd(e,n)&&function n8(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}(n,e)&&(Un(n.prev,n,e.prev)||Un(n,e.prev,e))||gp(n,e)&&Un(n.prev,n,n.next)>0&&Un(e.prev,e,e.next)>0)}function Un(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function gp(n,e){return n.x===e.x&&n.y===e.y}function v1(n,e,t,r){const i=vp(Un(n,e,t)),s=vp(Un(n,e,r)),o=vp(Un(t,r,n)),a=vp(Un(t,r,e));return!!(i!==s&&o!==a||0===i&&yp(n,t,e)||0===s&&yp(n,r,e)||0===o&&yp(t,n,r)||0===a&&yp(t,e,r))}function yp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function vp(n){return n>0?1:n<0?-1:0}function fd(n,e){return Un(n.prev,n,n.next)<0?Un(n,e,n.next)>=0&&Un(n,n.prev,e)>=0:Un(n,e,n.prev)<0||Un(n,n.next,e)<0}function _1(n,e){const t=new w0(n.i,n.x,n.y),r=new w0(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function x1(n,e,t,r){const i=new w0(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function pd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function w0(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class eo{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return.5*r}static isClockWise(e){return eo.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];w1(e),b1(r,e);let o=e.length;t.forEach(w1);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,b1(r,t[l]);const a=function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=y1(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(r&&(s=function $5(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=y1(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(K5(c));for(i.sort(q5),s=0;s<i.length;s++)X5(i[s],t),t=Uo(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<i;m+=t)d=n[m],h=n[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return hd(s,o,t,a,l,f),o}(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function w1(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function b1(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ho extends gt{constructor(e=new Ks([new Ce(.5,.5),new Ce(-.5,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,g=void 0!==t.bevelSegments?t.bevelSegments:3;const v=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:i8;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let x,w,P,U,j,_=!1;v&&(x=v.getSpacedPoints(u),_=!0,h=!1,w=v.computeFrenetFrames(u,!1),P=new C,U=new C,j=new C),h||(g=0,f=0,m=0,p=0);const ce=a.extractPoints(c);let q=ce.shape;const M=ce.holes;if(!eo.isClockWise(q)){q=q.reverse();for(let ve=0,Se=M.length;ve<Se;ve++){const Fe=M[ve];eo.isClockWise(Fe)&&(M[ve]=Fe.reverse())}}const Ae=eo.triangulateShape(q,M),Y=q;for(let ve=0,Se=M.length;ve<Se;ve++)q=q.concat(M[ve]);function oe(ve,Se,Fe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Se.clone().multiplyScalar(Fe).add(ve)}const ne=q.length,pe=Ae.length;function Z(ve,Se,Fe){let it,Ye,Nt;const vt=ve.x-Se.x,ht=ve.y-Se.y,Hn=Fe.x-ve.x,Cn=Fe.y-ve.y,I=vt*vt+ht*ht;if(Math.abs(vt*Cn-ht*Hn)>Number.EPSILON){const fe=Math.sqrt(I),Le=Math.sqrt(Hn*Hn+Cn*Cn),Xe=Se.x-ht/fe,Je=Se.y+vt/fe,Vt=((Fe.x-Cn/Le-Xe)*Cn-(Fe.y+Hn/Le-Je)*Hn)/(vt*Cn-ht*Hn);it=Xe+vt*Vt-ve.x,Ye=Je+ht*Vt-ve.y;const Xt=it*it+Ye*Ye;if(Xt<=2)return new Ce(it,Ye);Nt=Math.sqrt(Xt/2)}else{let fe=!1;vt>Number.EPSILON?Hn>Number.EPSILON&&(fe=!0):vt<-Number.EPSILON?Hn<-Number.EPSILON&&(fe=!0):Math.sign(ht)===Math.sign(Cn)&&(fe=!0),fe?(it=-ht,Ye=vt,Nt=Math.sqrt(I)):(it=vt,Ye=ht,Nt=Math.sqrt(I/2))}return new Ce(it/Nt,Ye/Nt)}const Ee=[];for(let ve=0,Se=Y.length,Fe=Se-1,it=ve+1;ve<Se;ve++,Fe++,it++)Fe===Se&&(Fe=0),it===Se&&(it=0),Ee[ve]=Z(Y[ve],Y[Fe],Y[it]);const Re=[];let Ne,Pe=Ee.concat();for(let ve=0,Se=M.length;ve<Se;ve++){const Fe=M[ve];Ne=[];for(let it=0,Ye=Fe.length,Nt=Ye-1,vt=it+1;it<Ye;it++,Nt++,vt++)Nt===Ye&&(Nt=0),vt===Ye&&(vt=0),Ne[it]=Z(Fe[it],Fe[Nt],Fe[vt]);Re.push(Ne),Pe=Pe.concat(Ne)}for(let ve=0;ve<g;ve++){const Se=ve/g,Fe=f*Math.cos(Se*Math.PI/2),it=m*Math.sin(Se*Math.PI/2)+p;for(let Ye=0,Nt=Y.length;Ye<Nt;Ye++){const vt=oe(Y[Ye],Ee[Ye],it);fn(vt.x,vt.y,-Fe)}for(let Ye=0,Nt=M.length;Ye<Nt;Ye++){const vt=M[Ye];Ne=Re[Ye];for(let ht=0,Hn=vt.length;ht<Hn;ht++){const Cn=oe(vt[ht],Ne[ht],it);fn(Cn.x,Cn.y,-Fe)}}}const ut=m+p;for(let ve=0;ve<ne;ve++){const Se=h?oe(q[ve],Pe[ve],ut):q[ve];_?(U.copy(w.normals[0]).multiplyScalar(Se.x),P.copy(w.binormals[0]).multiplyScalar(Se.y),j.copy(x[0]).add(U).add(P),fn(j.x,j.y,j.z)):fn(Se.x,Se.y,0)}for(let ve=1;ve<=u;ve++)for(let Se=0;Se<ne;Se++){const Fe=h?oe(q[Se],Pe[Se],ut):q[Se];_?(U.copy(w.normals[ve]).multiplyScalar(Fe.x),P.copy(w.binormals[ve]).multiplyScalar(Fe.y),j.copy(x[ve]).add(U).add(P),fn(j.x,j.y,j.z)):fn(Fe.x,Fe.y,d/u*ve)}for(let ve=g-1;ve>=0;ve--){const Se=ve/g,Fe=f*Math.cos(Se*Math.PI/2),it=m*Math.sin(Se*Math.PI/2)+p;for(let Ye=0,Nt=Y.length;Ye<Nt;Ye++){const vt=oe(Y[Ye],Ee[Ye],it);fn(vt.x,vt.y,d+Fe)}for(let Ye=0,Nt=M.length;Ye<Nt;Ye++){const vt=M[Ye];Ne=Re[Ye];for(let ht=0,Hn=vt.length;ht<Hn;ht++){const Cn=oe(vt[ht],Ne[ht],it);_?fn(Cn.x,Cn.y+x[u-1].y,x[u-1].x+Fe):fn(Cn.x,Cn.y,d+Fe)}}}function xe(ve,Se){let Fe=ve.length;for(;--Fe>=0;){const it=Fe;let Ye=Fe-1;Ye<0&&(Ye=ve.length-1);for(let Nt=0,vt=u+2*g;Nt<vt;Nt++){const ht=ne*Nt,Hn=ne*(Nt+1);Ht(Se+it+ht,Se+Ye+ht,Se+Ye+Hn,Se+it+Hn)}}}function fn(ve,Se,Fe){l.push(ve),l.push(Se),l.push(Fe)}function Ut(ve,Se,Fe){He(ve),He(Se),He(Fe);const it=i.length/3,Ye=y.generateTopUV(r,i,it-3,it-2,it-1);Kt(Ye[0]),Kt(Ye[1]),Kt(Ye[2])}function Ht(ve,Se,Fe,it){He(ve),He(Se),He(it),He(Se),He(Fe),He(it);const Ye=i.length/3,Nt=y.generateSideWallUV(r,i,Ye-6,Ye-3,Ye-2,Ye-1);Kt(Nt[0]),Kt(Nt[1]),Kt(Nt[3]),Kt(Nt[1]),Kt(Nt[2]),Kt(Nt[3])}function He(ve){i.push(l[3*ve+0]),i.push(l[3*ve+1]),i.push(l[3*ve+2])}function Kt(ve){s.push(ve.x),s.push(ve.y)}(function qt(){const ve=i.length/3;if(h){let Se=0,Fe=ne*Se;for(let it=0;it<pe;it++){const Ye=Ae[it];Ut(Ye[2]+Fe,Ye[1]+Fe,Ye[0]+Fe)}Se=u+2*g,Fe=ne*Se;for(let it=0;it<pe;it++){const Ye=Ae[it];Ut(Ye[0]+Fe,Ye[1]+Fe,Ye[2]+Fe)}}else{for(let Se=0;Se<pe;Se++){const Fe=Ae[Se];Ut(Fe[2],Fe[1],Fe[0])}for(let Se=0;Se<pe;Se++){const Fe=Ae[Se];Ut(Fe[0]+ne*u,Fe[1]+ne*u,Fe[2]+ne*u)}}r.addGroup(ve,i.length/3-ve,0)})(),function Ct(){const ve=i.length/3;let Se=0;xe(Y,Se),Se+=Y.length;for(let Fe=0,it=M.length;Fe<it;Fe++){const Ye=M[Fe];xe(Ye,Se),Se+=Ye.length}r.addGroup(ve,i.length/3-ve,1)}()}this.setAttribute("position",new tt(i,3)),this.setAttribute("uv",new tt(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function s8(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++)t.shapes.push(n[r].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++)r.push(t[e.shapes[s]]);const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new v0[i.type]).fromJSON(i)),new Ho(r,e.options)}}const i8={generateTopUV:function(n,e,t,r,i){const a=e[3*r],l=e[3*r+1],c=e[3*i],u=e[3*i+1];return[new Ce(e[3*t],e[3*t+1]),new Ce(a,l),new Ce(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*r],u=e[3*r+1],d=e[3*r+2],h=e[3*i],f=e[3*i+1],m=e[3*i+2],p=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ce(o,1-l),new Ce(c,1-d),new Ce(h,1-m),new Ce(p,1-v)]:[new Ce(a,1-l),new Ce(u,1-d),new Ce(f,1-m),new Ce(g,1-v)]}};class gd extends gt{constructor(e=new Ks([new Ce(0,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=i.length/3,h=u.extractPoints(t);let f=h.shape;const m=h.holes;!1===eo.isClockWise(f)&&(f=f.reverse());for(let g=0,v=m.length;g<v;g++){const y=m[g];!0===eo.isClockWise(y)&&(m[g]=y.reverse())}const p=eo.triangulateShape(f,m);for(let g=0,v=m.length;g<v;g++)f=f.concat(m[g]);for(let g=0,v=f.length;g<v;g++){const y=f[g];i.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let g=0,v=p.length;g<v;g++){const y=p[g];r.push(y[0]+d,y[1]+d,y[2]+d),l+=3}}this.setIndex(r),this.setAttribute("position",new tt(i,3)),this.setAttribute("normal",new tt(s,3)),this.setAttribute("uv",new tt(o,2))}toJSON(){const e=super.toJSON();return function o8(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++)r.push(t[e.shapes[i]]);return new gd(r,e.curveSegments)}}class C1 extends sr{constructor(e){super(),this.type="ShadowMaterial",this.color=new qe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}C1.prototype.isShadowMaterial=!0;class T1 extends ts{constructor(e){super(e),this.type="RawShaderMaterial"}}T1.prototype.isRawShaderMaterial=!0;class b0 extends sr{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}b0.prototype.isMeshStandardMaterial=!0;class D1 extends b0{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}D1.prototype.isMeshPhysicalMaterial=!0;class A1 extends sr{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new qe(16777215),this.specular=new qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}A1.prototype.isMeshPhongMaterial=!0;class R1 extends sr{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}R1.prototype.isMeshToonMaterial=!0;class I1 extends sr{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}I1.prototype.isMeshNormalMaterial=!0;class P1 extends sr{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}P1.prototype.isMeshLambertMaterial=!0;class L1 extends sr{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}L1.prototype.isMeshMatcapMaterial=!0;class O1 extends Tr{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}O1.prototype.isLineDashedMaterial=!0;const a8={ShadowMaterial:C1,SpriteMaterial:t0,RawShaderMaterial:T1,ShaderMaterial:ts,PointsMaterial:rp,MeshPhysicalMaterial:D1,MeshStandardMaterial:b0,MeshPhongMaterial:A1,MeshToonMaterial:R1,MeshNormalMaterial:I1,MeshLambertMaterial:P1,MeshDepthMaterial:Qv,MeshDistanceMaterial:Kv,MeshBasicMaterial:Lo,MeshMatcapMaterial:L1,LineDashedMaterial:O1,LineBasicMaterial:Tr,Material:sr};sr.fromType=function(n){return new a8[n]};const Fn={arraySlice:function(n,e,t){return Fn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(function e(i,s){return n[i]-n[s]}),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;void 0!==s&&void 0===s[r];)s=n[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(e.push(s.time),t.push(o)),s=n[i++]}while(void 0!==s)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*i;if(!(m<t||m>=r)){d.push(c.times[f]);for(let p=0;p<u;++p)h.push(c.values[f*u+p])}}0!==d.length&&(c.times=Fn.convertArray(d,c.times.constructor),c.values=Fn.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let p;if(s<=a.times[0])p=Fn.arraySlice(a.values,u,d-u);else if(s>=a.times[m]){const v=m*d+u;p=Fn.arraySlice(a.values,v,v+d-u)}else{const v=a.createInterpolant(),y=u,x=d-u;v.evaluate(s),p=Fn.arraySlice(v.resultBuffer,y,x)}"quaternion"===l&&(new Or).fromArray(p).normalize().conjugate().toArray(p);const g=c.times.length;for(let v=0;v<g;++v){const y=v*f+h;if("quaternion"===l)Or.multiplyQuaternionsFlat(c.values,y,p,0,c.values,y);else{const x=f-2*h;for(let _=0;_<x;++_)c.values[y+_]-=p[_]}}}return n.blendMode=2501,n}};class Vo{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,s)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0}}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,s,e)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Vo.prototype.beforeStart_=Vo.prototype.copySampleValue_,Vo.prototype.afterEnd_=Vo.prototype.copySampleValue_;class l8 extends Vo{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ql,endingEnd:Ql}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Kl:s=e,a=2*t-r;break;case 2402:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(void 0===l)switch(this.getSettings_().endingEnd){case Kl:o=e,l=2*r-t;break;case 2402:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=.5*(r-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(r-t)/(i-t),p=m*m,g=p*m,v=-h*g+2*h*p-h*m,y=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*m+1,x=(-1-f)*g+(1.5+f)*p+.5*m,_=f*g-f*p;for(let w=0;w!==a;++w)s[w]=v*o[u+w]+y*o[c+w]+x*o[l+w]+_*o[d+w];return s}}class F1 extends Vo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class c8 extends Vo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class bs{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fn.convertArray(t,this.TimeBufferType),this.values=Fn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Fn.convertArray(e.times,Array),values:Fn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new c8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new F1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new l8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==s||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Fn.arraySlice(r,s,o),this.values=Fn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==i&&Fn.isTypedArray(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Fn.arraySlice(this.times),t=Fn.arraySlice(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,f=d+r;for(let m=0;m!==r;++m){const p=t[d+m];if(p!==t[h+m]||p!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Fn.arraySlice(e,0,o),this.values=Fn.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Fn.arraySlice(this.times,0),t=Fn.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}bs.prototype.TimeBufferType=Float32Array,bs.prototype.ValueBufferType=Float32Array,bs.prototype.DefaultInterpolation=2301;class Ic extends bs{}Ic.prototype.ValueTypeName="bool",Ic.prototype.ValueBufferType=Array,Ic.prototype.DefaultInterpolation=2300,Ic.prototype.InterpolantFactoryMethodLinear=void 0,Ic.prototype.InterpolantFactoryMethodSmooth=void 0;class N1 extends bs{}N1.prototype.ValueTypeName="color";class Sp extends bs{}Sp.prototype.ValueTypeName="number";class u8 extends Vo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Or.slerpFlat(s,0,o,c-a,o,c,l);return s}}class vd extends bs{InterpolantFactoryMethodLinear(e){return new u8(this.times,this.values,this.getValueSize(),e)}}vd.prototype.ValueTypeName="quaternion",vd.prototype.DefaultInterpolation=2301,vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Pc extends bs{}Pc.prototype.ValueTypeName="string",Pc.prototype.ValueBufferType=Array,Pc.prototype.DefaultInterpolation=2300,Pc.prototype.InterpolantFactoryMethodLinear=void 0,Pc.prototype.InterpolantFactoryMethodSmooth=void 0;class Cp extends bs{}Cp.prototype.ValueTypeName="vector";class Tp{constructor(e,t=-1,r,i=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=fi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(h8(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(bs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Fn.getKeyframeOrder(l);l=Fn.sortedArray(l,1,u),c=Fn.sortedArray(c,1,u),!i&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new Sp(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,m,p){if(0!==f.length){const g=[],v=[];Fn.flattenJSON(f,g,v,m),0!==g.length&&p.push(new d(h,g,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let p=0;p<h[m].morphTargets.length;p++)f[h[m].morphTargets[p]]=-1;for(const p in f){const g=[],v=[];for(let y=0;y!==h[m].morphTargets.length;++y){const x=h[m];g.push(x.time),v.push(x.morphTarget===p?1:0)}i.push(new Sp(".morphTargetInfluence["+p+"]",g,v))}l=f.length*o}else{const f=".bones["+t[d].name+"]";r(Cp,f+".position",h,"pos",i),r(vd,f+".quaternion",h,"rot",i),r(Cp,f+".scale",h,"scl",i)}}return 0===i.length?null:new this(s,l,i,a)}resetDuration(){let t=0;for(let r=0,i=this.tracks.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function h8(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function d8(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sp;case"vector":case"vector2":case"vector3":case"vector4":return Cp;case"color":return N1;case"quaternion":return vd;case"bool":case"boolean":return Ic;case"string":return Pc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],r=[];Fn.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Lc={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const f8=new class k1{constructor(e,t,r){const i=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,!1===s&&void 0!==i.onStart&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==i.onProgress&&i.onProgress(u,o,a),o===a&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(u){void 0!==i.onError&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}};class zo{constructor(e){this.manager=void 0!==e?e:f8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const to={};class Go extends zo{constructor(e){super(e)}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Lc.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==to[e])return void to[e].push({onLoad:t,onProgress:r,onError:i});to[e]=[],to[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=to[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,m=0!==f;let p=0;const g=new ReadableStream({start(v){!function y(){d.read().then(({done:x,value:_})=>{if(x)v.close();else{p+=_.byteLength;const w=new ProgressEvent("progress",{lengthComputable:m,loaded:p,total:f});for(let P=0,U=u.length;P<U;P++){const j=u[P];j.onProgress&&j.onProgress(w)}v.enqueue(_),y()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Lc.add(e,c);const u=to[e];delete to[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=to[e];if(void 0===u)throw this.manager.itemError(e),c;delete to[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dp extends zo{constructor(e){super(e)}load(e,t,r,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Lc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ju("img");function l(){u(),Lc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class p8 extends zo{constructor(e){super(e)}load(e,t,r,i){const s=new td,o=new Dp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class B1 extends zo{constructor(e){super(e)}load(e,t,r,i){const s=new ri,o=new Dp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},r,i),s}}class Ms extends hn{constructor(e,t=1){super(),this.type="Light",this.color=new qe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ms.prototype.isLight=!0;(class U1 extends Ms{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(hn.DefaultUp),this.updateMatrix(),this.groundColor=new qe(t)}copy(e){return Ms.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const H1=new rt,V1=new C,z1=new C;class M0{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wf,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;V1.setFromMatrixPosition(e.matrixWorld),t.position.copy(V1),z1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(z1),t.updateMatrixWorld(),H1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(H1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class G1 extends M0{constructor(){super(new br(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*Yu*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}G1.prototype.isSpotLightShadow=!0;(class W1 extends Ms{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(hn.DefaultUp),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new G1}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const j1=new rt,_d=new C,E0=new C;class $1 extends M0{constructor(){super(new br(90,1,.5,500)),this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new gn(2,1,1,1),new gn(0,1,1,1),new gn(3,1,1,1),new gn(1,1,1,1),new gn(3,0,1,1),new gn(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),_d.setFromMatrixPosition(e.matrixWorld),r.position.copy(_d),E0.copy(r.position),E0.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(E0),r.updateMatrixWorld(),i.makeTranslation(-_d.x,-_d.y,-_d.z),j1.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(j1)}}$1.prototype.isPointLightShadow=!0;(class q1 extends Ms{constructor(e,t,r=0,i=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new $1}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class X1 extends M0{constructor(){super(new jf(-5,5,5,-5,.5,500))}}X1.prototype.isDirectionalLightShadow=!0;class S0 extends Ms{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(hn.DefaultUp),this.updateMatrix(),this.target=new hn,this.shadow=new X1}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}S0.prototype.isDirectionalLight=!0;(class Y1 extends Ms{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class Z1 extends Ms{constructor(e,t,r=10,i=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class J1{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new C)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],r*i*1.092548),t.addScaledVector(o[5],i*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],r*s*1.092548),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*r),t.addScaledVector(o[4],.858086*r*i),t.addScaledVector(o[5],.858086*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}J1.prototype.isSphericalHarmonics3=!0;class Ap extends Ms{constructor(e=new J1,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Ap.prototype.isLightProbe=!0;let Rp;(class Q1 extends gt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class v8 extends zo{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Lc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Lc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class _8 extends zo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Go(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===Rp&&(Rp=new(window.AudioContext||window.webkitAudioContext)),Rp).decodeAudioData(l,function(u){t(u)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}(class x8 extends Ap{constructor(e,t,r=1){super(void 0,r);const i=(new qe).set(e),s=(new qe).set(t),o=new C(i.r,i.g,i.b),a=new C(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class w8 extends Ap{constructor(e,t=1){super(void 0,t);const r=(new qe).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class T8{constructor(e,t,r){let i,s,o;switch(this.binding=e,this.valueSize=r,t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else o+=t,this._mixBufferRegion(r,s,0,t/o,i);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(r,i,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,i=r*this._origIndex;this.binding.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Or.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Or.multiplyQuaternionsFlat(e,o,e,t,e,r),Or.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const T0="\\[\\]\\.:\\/",D8=new RegExp("["+T0+"]","g"),D0="[^"+T0+"]",A8="[^"+T0.replace("\\.","")+"]",R8=/((?:WC+[\/:])*)/.source.replace("WC",D0),I8=/(WCOD+)?/.source.replace("WCOD",A8),P8=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",D0),L8=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",D0),O8=new RegExp("^"+R8+I8+P8+L8+"$"),F8=["material","materials","bones"];class N8{constructor(e,t,r){const i=r||Rn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let Rn=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(D8,"")}static parseTrackName(t){const r=O8.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=i.nodeName.substring(s+1);-1!==F8.indexOf(o)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===r||l.uuid===r)return l;const c=i(l.children);if(c)return c}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,s=r.propertyName;let o=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=N8,n})();Rn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Rn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Rn.prototype.GetterByBindingType=[Rn.prototype._getValue_direct,Rn.prototype._getValue_array,Rn.prototype._getValue_arrayElement,Rn.prototype._getValue_toArray],Rn.prototype.SetterByBindingTypeAndVersioning=[[Rn.prototype._setValue_direct,Rn.prototype._setValue_direct_setNeedsUpdate,Rn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_array,Rn.prototype._setValue_array_setNeedsUpdate,Rn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_arrayElement,Rn.prototype._setValue_arrayElement_setNeedsUpdate,Rn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_fromArray,Rn.prototype._setValue_fromArray_setNeedsUpdate,Rn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class B8{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ql,endingEnd:Ql};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,a=i/s;e.warp(1,s/i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*r;if(l<0||0===r)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=2202===r;if(0===e)return-1===s?i:o&&1==(1&s)?t-i:i;if(2200===r){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&1==(1&s))return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Kl,i.endingEnd=Kl):(i.endingStart=e?this.zeroSlopeAtStart?Kl:Ql:2402,i.endingEnd=t?this.zeroSlopeAtEnd?Kl:Ql:2402)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}(class U8 extends ya{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],f=h.name;let m=u[f];if(void 0!==m)++m.referenceCount,o[d]=m;else{if(m=o[d],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}m=new T8(Rn.create(r,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new F1(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o="string"==typeof e?Tp.findByName(i,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===r&&(r=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===r)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new B8(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s="string"==typeof e?Tp.findByName(r,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,i=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const l=r[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class A0{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new A0(void 0===this.value.clone?this.value:this.value.clone())}}(class H8 extends wc{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const lD=new Ce;class xd{constructor(e=new Ce(1/0,1/0),t=new Ce(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=lD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return lD.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}xd.prototype.isBox2=!0;const Wo=new C,Pp=new rt,I0=new rt;function dD(n){const e=[];!0===n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,dD(n.children[t]));return e}const yD=new ArrayBuffer(4),ns=(new Float32Array(yD),new Uint32Array(yD),new Uint32Array(512)),rs=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(ns[n]=0,ns[256|n]=32768,rs[n]=24,rs[256|n]=24):e<-14?(ns[n]=1024>>-e-14,ns[256|n]=1024>>-e-14|32768,rs[n]=-e-1,rs[256|n]=-e-1):e<=15?(ns[n]=e+15<<10,ns[256|n]=e+15<<10|32768,rs[n]=13,rs[256|n]=13):e<128?(ns[n]=31744,ns[256|n]=64512,rs[n]=24,rs[256|n]=24):(ns[n]=31744,ns[256|n]=64512,rs[n]=13,rs[256|n]=13)}const L0=new Uint32Array(2048),Oc=new Uint32Array(64),xD=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,L0[n]=e|t}for(let n=1024;n<2048;++n)L0[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Oc[n]=n<<23;Oc[31]=1199570944,Oc[32]=2147483648;for(let n=33;n<63;++n)Oc[n]=2147483648+(n-32<<23);Oc[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(xD[n]=1024);Pi.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Pi.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},ud.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class j8 extends Dc{constructor(e=10,t=10,r=4473924,i=8947848){r=new qe(r),i=new qe(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const p=h===s?r:i;p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3}const u=new gt;u.setAttribute("position",new tt(l,3)),u.setAttribute("color",new tt(c,3)),super(u,new Tr({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class G8 extends Dc{constructor(e){const t=dD(e),r=new gt,i=[],s=[],o=new qe(0,0,1),a=new qe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new tt(i,3)),r.setAttribute("color",new tt(s,3)),super(r,new Tr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");I0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Pp.multiplyMatrices(I0,a.matrixWorld),Wo.setFromMatrixPosition(Pp),i.setXYZ(o,Wo.x,Wo.y,Wo.z),Pp.multiplyMatrices(I0,a.parent.matrixWorld),Wo.setFromMatrixPosition(Pp),i.setXYZ(o+1,Wo.x,Wo.y,Wo.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},zo.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class C0{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},zo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},xd.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},xd.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},xd.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},xd.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},Ri.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Ri.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ri.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ri.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Ri.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},Ca.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},Ea.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Wf.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},_r.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},_r.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},_r.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},_r.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},_r.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},_r.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},rt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},rt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},rt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new C).setFromMatrixColumn(this,3)},rt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},rt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},rt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},rt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},rt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},rt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},rt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},rt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},rt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},rt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},rt.prototype.makeFrustum=function(n,e,t,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,s)},rt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Qs.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Or.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Or.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Sa.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Sa.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},Sa.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},ir.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ir.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},ir.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},ir.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},ir.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},ir.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ir.getBarycoord(n,e,t,r,i)},ir.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ir.getNormal(n,e,t,r)},Ks.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Ks.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ho(this,n)},Ks.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gd(this,n)},Ce.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Ce.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},Ce.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},C.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},C.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},C.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},C.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},C.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},C.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},C.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},gn.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},gn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},hn.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},hn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},hn.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},hn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},hn.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(hn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),wr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(wr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),r0.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},br.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(Ms.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Sn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Xu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Xu)}}}),Sn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Xu:qu),this},Sn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Sn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},gt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},gt.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Sn(arguments[1],arguments[2])))},gt.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},gt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},gt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},gt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},gt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(gt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),wc.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Xu:qu),this},wc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ho.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ho.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ho.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Zf.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},A0.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(sr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new qe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ts.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),yn.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)},yn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},yn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},yn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},yn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},yn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},yn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},yn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},yn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},yn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},yn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},yn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},yn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},yn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},yn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},yn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},yn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},yn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},yn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},yn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},yn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},yn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},yn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},yn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},yn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(yn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?On:js}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(VT.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(pi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class E8 extends hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new _8).load(n,function(r){e.setBuffer(r)}),this},Wv.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},Wv.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)},xa.crossOrigin=void 0,xa.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new B1;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s},xa.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new p8;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s},xa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},xa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");const $8=["canvas"];let q8=(()=>{class n{constructor(){this.mouseX=0,this.mouseY=0}ngOnInit(){}ngAfterViewInit(){this.initBackground()}initBackground(){this.renderer=new yn({canvas:this.canvas.nativeElement}),this.renderer.setClearColor(new qe("#000")),this.camera=new br(75,2,.1,500),this.camera.position.z=2,this.scene=new Zf;const c=new S0("#ff0000",1);c.position.set(-1,2,4),this.scene.add(c);const u=new gt;u.setAttribute("position",new Sn(this.getRandomParticelPos(1500),3)),new B1;const f=new rp({size:.02});this.cube=new c0(u,f),this.scene.add(this.cube),requestAnimationFrame(this.renderCanvas.bind(this))}renderCanvas(t){if(this.resizeRendererToDisplaySize(this.renderer)){const r=this.renderer.domElement;this.camera.aspect=r.clientWidth/r.clientHeight,this.camera.updateProjectionMatrix()}this.cube.rotation.x=.001*this.mouseY,this.cube.rotation.y=.001*this.mouseX,this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.renderCanvas.bind(this))}getRandomParticelPos(t){const r=new Float32Array(3*t);for(let i=0;i<t;i++)r[i]=10*(Math.random()-.5);return r}resizeRendererToDisplaySize(t){const r=t.domElement,i=r.clientWidth,s=r.clientHeight,o=r.width!==i||r.height!==s;return o&&t.setSize(i,s,!1),o}mouseMove(t){this.mouseX=t.clientX,this.mouseY=t.clientY}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["app-canvas"]],viewQuery:function(t,r){if(1&t&&Ch($8,5),2&t){let i;Pl(i=Ll())&&(r.canvas=i.first)}},hostBindings:function(t,r){1&t&&mu("mousemove",function(s){return r.mouseMove(s)},!1,sx)},decls:2,vars:0,consts:[["id","c"],["canvas",""]],template:function(t,r){1&t&&Wr(0,"canvas",0,1)},styles:["#c[_ngcontent-%COMP%]{z-index:-1;position:fixed;width:100%;height:100%}"]}),n})();const X8=["welcomeText"],Y8=["missionText"];function Z8(n,e){if(1&n&&(_o(0),Wr(1,"div",13),Wr(2,"img",14),xo()),2&n){const t=El();Kr(2),ks("src",t.imageUrl(t.author.image),ta)}}const J8=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:(()=>{class n{constructor(t){this.sanitySvc=t,this.isRequestInProcess=!0}ngAfterViewInit(){this.getAuthor()}typeText(t,r,i=1e3){let s,o={delay:100,cursor:"_",loop:!0,deleteSpeed:10};r.length>1&&(o.strings=r,o.autoStart=!0),s=new(nH())(t,o),r.length>1?s.pauseFor(i).start():s.typeString(r[0]).pauseFor(i).start()}imageUrl(t){return this.sanitySvc.urlFor(t)}getAuthor(){this.sanitySvc.getAuthor().then(t=>{this.author=t[0],this.typeText(this.welcomeText.nativeElement,["Hello World"],300),this.typeText(this.missionText.nativeElement,this.author.highlights),this.isRequestInProcess=!1})}}return n.\u0275fac=function(t){return new(t||n)(lt(hC))},n.\u0275cmp=ki({type:n,selectors:[["app-home"]],viewQuery:function(t,r){if(1&t&&(Ch(X8,5),Ch(Y8,5)),2&t){let i;Pl(i=Ll())&&(r.welcomeText=i.first),Pl(i=Ll())&&(r.missionText=i.first)}},decls:16,vars:1,consts:[[1,"container"],["id","hero",1,"d-flex","align-items-center"],["data-aos","fade-up",1,"container-fluid","aos-init","aos-animate"],[1,"row","justify-content-sm-around"],[1,"col-xl-5","col-lg-6","pt-3","pt-lg-0","order-2","order-lg-1","d-flex","flex-column","justify-content-center"],[1,"greet-section"],[1,"welcomeText"],["welcomeText",""],[1,"missionText"],["missionText",""],["href","#about",1,"btn-get-started","scrollto"],["data-aos","zoom-in","data-aos-delay","150",1,"col-xl-4","col-lg-6","order-1","order-lg-2","hero-img","aos-init","aos-animate"],[4,"ngIf"],[1,"spinning-border"],["alt","",1,"hero-animated-img","img-fluid","rounded-circle","animated",3,"src"]],template:function(t,r){1&t&&(Wr(0,"app-canvas"),Dt(1,"div",0),Dt(2,"section",1),Dt(3,"div",2),Dt(4,"div",3),Dt(5,"div",4),Dt(6,"div",5),Wr(7,"h1",6,7),Wr(9,"h2",8,9),At(),Dt(11,"div"),Dt(12,"a",10),er(13,"Get Started"),At(),At(),At(),Dt(14,"div",11),vo(15,Z8,3,1,"ng-container",12),At(),At(),At(),At(),At()),2&t&&(Kr(15),ks("ngIf",r.author))},directives:[q8,Cy],styles:['@charset "UTF-8";@import"https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&display=swap";body[_ngcontent-%COMP%]{font-family:Inconsolata,monospace;font-weight:400;background:#000;color:#fff}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-weight:600}.navbar[_ngcontent-%COMP%]{padding:30px;font-weight:600;font-size:x-large}a[_ngcontent-%COMP%]{color:#00ff62}a[_ngcontent-%COMP%]:hover{color:#fff}.nav-link[_ngcontent-%COMP%]{color:#00ff62;display:flex;align-items:center;justify-content:space-between;padding:0;white-space:nowrap;transition:.3s}.Typewriter__cursor[_ngcontent-%COMP%]{color:#00ff62}.nav-link[_ngcontent-%COMP%]:active, .nav-link[_ngcontent-%COMP%]:hover, .nav-link[_ngcontent-%COMP%]:focus{color:#fff}.navbar-toggler-icon[_ngcontent-%COMP%]{color:#fff;line-height:1.5}.footer-credits[_ngcontent-%COMP%]{position:fixed;right:0;left:0;bottom:0;padding:15px;text-align:center;font-size:13px;color:#fff;z-index:999999}#hero[_ngcontent-%COMP%]{background-attachment:fixed}#hero[_ngcontent-%COMP%]{width:100%;background-size:cover}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}section[_ngcontent-%COMP%]{padding:100px 0;overflow:hidden}.greetSection[_ngcontent-%COMP%]{width:600px}.greet-section[_ngcontent-%COMP%]{height:80px}.greet-text[_ngcontent-%COMP%]{color:green!important}#hero[_ngcontent-%COMP%]   .btn-get-started[_ngcontent-%COMP%]{font-weight:500;font-size:16px;letter-spacing:1px;display:inline-block;padding:10px 28px;border-radius:5px;transition:.5s;margin-top:110px;color:#fff;border:2px solid #fff}#hero[_ngcontent-%COMP%]   .btn-get-started[_ngcontent-%COMP%]:hover{color:#00ff62;border:2px solid #00ff62}.hero-animated-img[_ngcontent-%COMP%]{border:5px solid #00ff62}.gradient-box[_ngcontent-%COMP%]{display:flex;align-items:center;width:90%;margin:auto;max-width:22em;padding:0;position:relative;box-sizing:border-box;color:#fff;background:#000;background-clip:padding-box;border:solid 5px transparent;border-radius:50%}.gradient-box[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-1;margin:-5px;border-radius:inherit;background:linear-gradient(to right,#ff00fb,#00fff3)}@keyframes rotateThis{0%{transform:rotate(0) scale(1)}to{transform:rotate(360deg) scale(1)}}']}),n})()},{path:"experiments",component:eH},{path:"aboutme",component:zU},{path:"blogs",component:GU},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(t,r){1&t&&(Dt(0,"p"),er(1,"page-not-found works!"),At())},styles:[""]}),n})()}];let Q8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xo({type:n}),n.\u0275inj=ao({imports:[[lC.forRoot(J8)],lC]}),n})(),K8=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ki({type:n,selectors:[["app-footer"]],decls:7,vars:0,consts:[[1,"footer-credits","mt-auto"],["aria-hidden","true",1,"fa","fa-heart"],["href","https://github.com/aliabbas101"]],template:function(t,r){1&t&&(Dt(0,"footer",0),Dt(1,"p"),er(2,"Crafted with "),Wr(3,"i",1),er(4," by "),Dt(5,"a",2),er(6,"@aliabbas101"),At(),At(),At())},styles:[""]}),n})(),eW=(()=>{class n{constructor(t){this.titleSvc=t,this.pageTitle="Syed Ali Rizvi"}ngOnInit(){this.titleSvc.setTitle(this.pageTitle)}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(lt(nS))},n.\u0275cmp=ki({type:n,selectors:[["app-root"]],decls:23,vars:0,consts:[[1,"navbar","navbar-expand-lg"],[1,"container"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["aria-hidden","true",1,"fa","fa-bars"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","home","routerLinkActive","active",1,"nav-link"],["routerLink","experiments","routerLinkActive","active",1,"nav-link"],["routerLink","blogs","routerLin","","kActive","active",1,"nav-link"],["routerLink","aboutme","routerLinkActive","active",1,"nav-link"]],template:function(t,r){1&t&&(Dt(0,"nav",0),Dt(1,"div",1),Dt(2,"a",2),er(3,"Syed Ali Rizvi"),At(),Dt(4,"button",3),Dt(5,"span",4),Wr(6,"i",5),At(),At(),Dt(7,"div",6),Dt(8,"ul",7),Dt(9,"li",8),Dt(10,"a",9),er(11,"Home"),At(),At(),Dt(12,"li",8),Dt(13,"a",10),er(14,"Experiments"),At(),At(),Dt(15,"li",8),Dt(16,"a",11),er(17,"Activity"),At(),At(),Dt(18,"li",8),Dt(19,"a",12),er(20,"About Me"),At(),At(),At(),At(),At(),At(),Wr(21,"router-outlet"),Wr(22,"app-footer"))},directives:[df,rC,Qy,K8],styles:[""]}),n})(),tW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xo({type:n,bootstrap:[eW]}),n.\u0275inj=ao({providers:[],imports:[[ck,Q8]]}),n})();(function kF(){fE=!1})(),ak().bootstrapModule(tW).catch(n=>console.error(n))},6841:(le,$,A)=>{"use strict";function H(ie,Te){(null==Te||Te>ie.length)&&(Te=ie.length);for(var Oe=0,ae=new Array(Te);Oe<Te;Oe++)ae[Oe]=ie[Oe];return ae}var L=A(5943),T=A(4675),E=T.map,B=T.filter,Q=A(4776),X=A(8014);function _e(ie){this.client=ie}function be(ie,Te){return"undefined"!=typeof window&&Te instanceof window.File?L({filename:!1===ie.preserveFilename?void 0:Te.name,contentType:Te.type},ie):ie}L(_e.prototype,{upload:function(Te,Oe){var ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};X.validateAssetType(Te);var D=ae.extract||void 0;D&&!D.length&&(D=["none"]);var b=X.hasDataset(this.client.clientConfig),z="image"===Te?"images":"files",G=be(ae,Oe),me=G.tag,te=G.label,de=G.title,ye=G.description,Me=G.creditLine,Ie=G.filename,Ze=G.source,re={label:te,title:de,description:ye,filename:Ie,meta:D,creditLine:Me};Ze&&(re.sourceId=Ze.id,re.sourceName=Ze.name,re.sourceUrl=Ze.url);var zt=this.client._requestObservable({tag:me,method:"POST",timeout:G.timeout||0,uri:"/assets/".concat(z,"/").concat(b),headers:G.contentType?{"Content-Type":G.contentType}:{},query:re,body:Oe});return this.client.isPromiseAPI()?zt.pipe(B(function(K){return"response"===K.type}),E(function(K){return K.body.document})).toPromise():zt},delete:function(Te,Oe){console.warn("client.assets.delete() is deprecated, please use client.delete(<document-id>)");var ae=Oe||"";return/^(image|file)-/.test(ae)?Te._id&&(ae=Te._id):ae="".concat(Te,"-").concat(ae),X.hasDataset(this.client.clientConfig),this.client.delete(ae)},getImageUrl:function(Te,Oe){var ae=Te._ref||Te;if("string"!=typeof ae)throw new Error("getImageUrl() needs either an object with a _ref, or a string with an asset document ID");if(!/^image-[A-Za-z0-9_]+-\d+x\d+-[a-z]{1,5}$/.test(ae))throw new Error('Unsupported asset ID "'.concat(ae,'". URL generation only works for auto-generated IDs.'));var b=function F(ie,Te){return function N(ie){if(Array.isArray(ie))return ie}(ie)||function V(ie,Te){var Oe=null==ie?null:"undefined"!=typeof Symbol&&ie[Symbol.iterator]||ie["@@iterator"];if(null!=Oe){var z,G,ae=[],D=!0,b=!1;try{for(Oe=Oe.call(ie);!(D=(z=Oe.next()).done)&&(ae.push(z.value),!Te||ae.length!==Te);D=!0);}catch(me){b=!0,G=me}finally{try{!D&&null!=Oe.return&&Oe.return()}finally{if(b)throw G}}return ae}}(ie,Te)||function O(ie,Te){if(ie){if("string"==typeof ie)return H(ie,Te);var Oe=Object.prototype.toString.call(ie).slice(8,-1);if("Object"===Oe&&ie.constructor&&(Oe=ie.constructor.name),"Map"===Oe||"Set"===Oe)return Array.from(ie);if("Arguments"===Oe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return H(ie,Te)}}(ie,Te)||function J(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ae.split("-"),4),z=b[1],G=b[2],me=b[3];X.hasDataset(this.client.clientConfig);var te=this.client.clientConfig,de=te.projectId,ye=te.dataset,Me=Oe?Q(Oe):"";return"https://cdn.sanity.io/images/".concat(de,"/").concat(ye,"/").concat(z,"-").concat(G,".").concat(me).concat(Me)}}),le.exports=_e},2677:(le,$,A)=>{"use strict";function J(O){this.client=O}A(5943)(J.prototype,{getLoginProviders:function(){return this.client.request({uri:"/auth/providers"})},logout:function(){return this.client.request({uri:"/auth/logout",method:"POST"})}}),le.exports=J},4226:(le,$,A)=>{"use strict";var F=A(1705).generateHelpUrl,J=A(5943),O=A(8014),H=A(2196),N={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,isPromiseAPI:!0},L=["localhost","127.0.0.1","0.0.0.0"];$.defaultConfig=N,$.initConfig=function(E,B){var Q=J({},B,E);Q.apiVersion||H.printNoApiVersionSpecifiedWarning();var X=J({},N,Q),_e=X.useProjectHostname;if("undefined"==typeof Promise){var be=F("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(be))}if(_e&&!X.projectId)throw new Error("Configuration must contain `projectId`");var ie="undefined"!=typeof window&&window.location&&window.location.hostname,Te=ie&&function(B){return-1!==L.indexOf(B)}(window.location.hostname);ie&&Te&&X.token&&!0!==X.ignoreBrowserTokenWarning?H.printBrowserTokenWarning():void 0===X.useCdn&&H.printCdnWarning(),_e&&O.projectId(X.projectId),X.dataset&&O.dataset(X.dataset),"requestTagPrefix"in X&&(X.requestTagPrefix=X.requestTagPrefix?O.requestTag(X.requestTagPrefix).replace(/\.+$/,""):void 0),X.apiVersion="".concat(X.apiVersion).replace(/^v/,""),X.isDefaultApi=X.apiHost===N.apiHost,X.useCdn=Boolean(X.useCdn)&&!X.withCredentials,$.validateApiVersion(X.apiVersion);var Oe=X.apiHost.split("://",2),ae=Oe[0],D=Oe[1],b=X.isDefaultApi?"apicdn.sanity.io":D;return X.useProjectHostname?(X.url="".concat(ae,"://").concat(X.projectId,".").concat(D,"/v").concat(X.apiVersion),X.cdnUrl="".concat(ae,"://").concat(X.projectId,".").concat(b,"/v").concat(X.apiVersion)):(X.url="".concat(X.apiHost,"/v").concat(X.apiVersion),X.cdnUrl=X.url),X},$.validateApiVersion=function(B){if("1"!==B&&"X"!==B){var Q=new Date(B);if(!(/^\d{4}-\d{2}-\d{2}$/.test(B)&&Q instanceof Date&&Q.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}}},9445:(le,$,A)=>{"use strict";function F(D,b,z){return b in D?Object.defineProperty(D,b,{value:z,enumerable:!0,configurable:!0,writable:!0}):D[b]=z,D}var J=A(5943),O=A(4675),H=O.map,V=O.filter,N=A(8014),L=A(7625),T=A(3400),E=A(1111),B=A(5873),Q=A(5818),X=function(b,z){return!1===b?void 0:void 0===b?z:b},_e=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dryRun:b.dryRun,returnIds:!0,returnDocuments:X(b.returnDocuments,!0),visibility:b.visibility||"sync",autoGenerateArrayKeys:b.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:b.skipCrossDatasetReferenceValidation}},be=function(b){return"response"===b.type},ie=function(b){return b.body},Te=function(b,z){return b.reduce(function(G,me){return G[z(me)]=me,G},Object.create(null))},Oe=function(b){return b.toPromise()};le.exports={listen:Q,getDataUrl:function(b,z){var me=N.hasDataset(this.clientConfig),te="/".concat(b,"/").concat(me),de=z?"".concat(te,"/").concat(z):te;return"/data".concat(de).replace(/\/($|\?)/,"$1")},fetch:function(b,z){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},me=!1===G.filterResponse?function(de){return de}:function(de){return de.result},te=this._dataRequest("query",{query:b,params:z},G).pipe(H(me));return this.isPromiseAPI()?Oe(te):te},getDocument:function(b){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},G={uri:this.getDataUrl("doc",b),json:!0,tag:z.tag},me=this._requestObservable(G).pipe(V(be),H(function(te){return te.body.documents&&te.body.documents[0]}));return this.isPromiseAPI()?Oe(me):me},getDocuments:function(b){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},G={uri:this.getDataUrl("doc",b.join(",")),json:!0,tag:z.tag},me=this._requestObservable(G).pipe(V(be),H(function(te){var de=Te(te.body.documents||[],function(ye){return ye._id});return b.map(function(ye){return de[ye]||null})}));return this.isPromiseAPI()?Oe(me):me},create:function(b,z){return this._create(b,"create",z)},createIfNotExists:function(b,z){return N.requireDocumentId("createIfNotExists",b),this._create(b,"createIfNotExists",z)},createOrReplace:function(b,z){return N.requireDocumentId("createOrReplace",b),this._create(b,"createOrReplace",z)},patch:function(b,z){return new B(b,z,this)},delete:function(b,z){return this.dataRequest("mutate",{mutations:[{delete:L(b)}]},z)},mutate:function(b,z){var G=b instanceof B||b instanceof E?b.serialize():b,me=Array.isArray(G)?G:[G];return this.dataRequest("mutate",{mutations:me,transactionId:z&&z.transactionId},z)},transaction:function(b){return new E(b,this)},dataRequest:function(b,z){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},me=this._dataRequest(b,z,G);return this.isPromiseAPI()?Oe(me):me},_dataRequest:function(b,z){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},me="mutate"===b,te="query"===b,de=!me&&T(z),ye=!me&&de.length<11264,Me=ye?de:"",Ie=G.returnFirst,Ze=G.timeout,re=G.token,zt=G.tag,K=G.headers,wn=this.getDataUrl(b,Me),ke={method:ye?"GET":"POST",uri:wn,json:!0,body:ye?void 0:z,query:me&&_e(G),timeout:Ze,headers:K,token:re,tag:zt,canUseCdn:te};return this._requestObservable(ke).pipe(V(be),H(ie),H(function(nt){if(!me)return nt;var ot=nt.results||[];if(G.returnDocuments)return Ie?ot[0]&&ot[0].document:ot.map(function(It){return It.document});var mt=Ie?"documentId":"documentIds",et=Ie?ot[0]&&ot[0].id:ot.map(function(It){return It.id});return F({transactionId:nt.transactionId,results:ot},mt,et)}))},_create:function(b,z){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},me=F({},z,b),te=J({returnFirst:!0,returnDocuments:!0},G);return this.dataRequest("mutate",{mutations:[me]},te)}}},3400:le=>{"use strict";var $=["tag"];var J=encodeURIComponent;le.exports=function(O){var H=O.query,V=O.params,N=void 0===V?{}:V,L=O.options,T=void 0===L?{}:L,E=T.tag,B=function A(O,H){if(null==O)return{};var N,L,V=function F(O,H){if(null==O)return{};var L,T,V={},N=Object.keys(O);for(T=0;T<N.length;T++)!(H.indexOf(L=N[T])>=0)&&(V[L]=O[L]);return V}(O,H);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(O);for(L=0;L<T.length;L++)!(H.indexOf(N=T[L])>=0)&&(!Object.prototype.propertyIsEnumerable.call(O,N)||(V[N]=O[N]))}return V}(T,$),Q="query=".concat(J(H)),X=E?"?tag=".concat(J(E),"&").concat(Q):"?".concat(Q),_e=Object.keys(N).reduce(function(be,ie){return"".concat(be,"&").concat(J("$".concat(ie)),"=").concat(J(JSON.stringify(N[ie])))},X);return Object.keys(B).reduce(function(be,ie){return T[ie]?"".concat(be,"&").concat(J(ie),"=").concat(J(T[ie])):be},_e)}},5818:(le,$,A)=>{"use strict";function F(ae,D){var b=Object.keys(ae);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(ae);D&&(z=z.filter(function(G){return Object.getOwnPropertyDescriptor(ae,G).enumerable})),b.push.apply(b,z)}return b}function J(ae){for(var D=1;D<arguments.length;D++){var b=null!=arguments[D]?arguments[D]:{};D%2?F(Object(b),!0).forEach(function(z){O(ae,z,b[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(b)):F(Object(b)).forEach(function(z){Object.defineProperty(ae,z,Object.getOwnPropertyDescriptor(b,z))})}return ae}function O(ae,D,b){return D in ae?Object.defineProperty(ae,D,{value:b,enumerable:!0,configurable:!0,writable:!0}):ae[D]=b,ae}var H=A(5943),N=A(4675).Observable,L=A(1789),T=A(9091),E=A(5325),B=A(3400),X=L,_e=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],be={includeResult:!0};function ie(ae){try{var D=ae.data&&JSON.parse(ae.data)||{};return H({type:ae.type},D)}catch(b){return b}}function Te(ae){if(ae instanceof Error)return ae;var D=ie(ae);return D instanceof Error?D:new Error(function Oe(ae){return ae.error?ae.error.description?ae.error.description:"string"==typeof ae.error?ae.error:JSON.stringify(ae.error,null,2):ae.message||"Unknown listener error"}(D))}le.exports=function(D,b){var z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},G=this.clientConfig,me=G.url,te=G.token,de=G.withCredentials,ye=G.requestTagPrefix,Me=z.tag&&ye?[ye,z.tag].join("."):z.tag,Ie=J(J({},E(z,be)),{},{tag:Me}),Ze=T(Ie,_e),re=B({query:D,params:b,options:Ze,tag:Me}),zt="".concat(me).concat(this.getDataUrl("listen",re));if(zt.length>14800)return new N(function(nt){return nt.error(new Error("Query too large for listener"))});var K=Ie.events?Ie.events:["mutation"],wn=-1!==K.indexOf("reconnect"),ke={};return(te||de)&&(ke.withCredentials=!0),te&&(ke.headers={Authorization:"Bearer ".concat(te)}),new N(function(nt){var mt,ot=Ds(),et=!1;function It(){et||(function ss(){wn&&nt.next({type:"reconnect"})}(),!et&&ot.readyState===X.CLOSED&&(Li(),clearTimeout(mt),mt=setTimeout(As,100)))}function Wt(_n){nt.error(Te(_n))}function yi(_n){var Fi=ie(_n);return Fi instanceof Error?nt.error(Fi):nt.next(Fi)}function no(_n){et=!0,Li(),nt.complete()}function Li(){ot.removeEventListener("error",It,!1),ot.removeEventListener("channelError",Wt,!1),ot.removeEventListener("disconnect",no,!1),K.forEach(function(_n){return ot.removeEventListener(_n,yi,!1)}),ot.close()}function Ds(){var _n=new X(zt,ke);return _n.addEventListener("error",It,!1),_n.addEventListener("channelError",Wt,!1),_n.addEventListener("disconnect",no,!1),K.forEach(function(Fi){return _n.addEventListener(Fi,yi,!1)}),_n}function As(){ot=Ds()}return function Oi(){et=!0,Li()}})}},5873:(le,$,A)=>{"use strict";function F(T,E,B){return E in T?Object.defineProperty(T,E,{value:B,enumerable:!0,configurable:!0,writable:!0}):T[E]=B,T}var J=A(5943),O=A(7625),H=A(8014),V=H.validateObject,N=H.validateInsert;function L(T){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.selection=T,this.operations=J({},E),this.client=B}J(L.prototype,{clone:function(){return new L(this.selection,J({},this.operations),this.client)},set:function(E){return this._assign("set",E)},diffMatchPatch:function(E){return V("diffMatchPatch",E),this._assign("diffMatchPatch",E)},unset:function(E){if(!Array.isArray(E))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=J({},this.operations,{unset:E}),this},setIfMissing:function(E){return this._assign("setIfMissing",E)},replace:function(E){return V("replace",E),this._set("set",{$:E})},inc:function(E){return this._assign("inc",E)},dec:function(E){return this._assign("dec",E)},insert:function(E,B,Q){var X;return N(E,B,Q),this._assign("insert",(F(X={},E,B),F(X,"items",Q),X))},append:function(E,B){return this.insert("after","".concat(E,"[-1]"),B)},prepend:function(E,B){return this.insert("before","".concat(E,"[0]"),B)},splice:function(E,B,Q,X){var be=B<0?B-1:B,ie=void 0===Q||-1===Q?-1:Math.max(0,B+Q),Te=be<0&&ie>=0?"":ie,Oe="".concat(E,"[").concat(be,":").concat(Te,"]");return this.insert("replace",Oe,X||[])},ifRevisionId:function(E){return this.operations.ifRevisionID=E,this},serialize:function(){return J(O(this.selection),this.operations)},toJSON:function(){return this.serialize()},commit:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");var B="string"==typeof this.selection,Q=J({returnFirst:B,returnDocuments:!0},E);return this.client.mutate({patch:this.serialize()},Q)},reset:function(){return this.operations={},this},_set:function(E,B){return this._assign(E,B,!1)},_assign:function(E,B){var Q=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return V(E,B),this.operations=J({},this.operations,F({},E,J({},Q&&this.operations[E]||{},B))),this}}),le.exports=L},1111:(le,$,A)=>{"use strict";function F(L,T,E){return T in L?Object.defineProperty(L,T,{value:E,enumerable:!0,configurable:!0,writable:!0}):L[T]=E,L}var J=A(5943),O=A(8014),H=A(5873),V={returnDocuments:!1};function N(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;this.trxId=E,this.operations=L,this.client=T}J(N.prototype,{clone:function(){return new N(this.operations.slice(0),this.client,this.trxId)},create:function(T){return O.validateObject("create",T),this._add({create:T})},createIfNotExists:function(T){var E="createIfNotExists";return O.validateObject(E,T),O.requireDocumentId(E,T),this._add(F({},E,T))},createOrReplace:function(T){var E="createOrReplace";return O.validateObject(E,T),O.requireDocumentId(E,T),this._add(F({},E,T))},delete:function(T){return O.validateDocumentId("delete",T),this._add({delete:{id:T}})},patch:function(T,E){var B="function"==typeof E;if(T instanceof H)return this._add({patch:T.serialize()});if(B){var X=E(new H(T,{},this.client));if(!(X instanceof H))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:X.serialize()})}return this._add({patch:J({id:T},E)})},transactionId:function(T){return T?(this.trxId=T,this):this.trxId},serialize:function(){return this.operations.slice()},toJSON:function(){return this.serialize()},commit:function(T){if(!this.client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.client.mutate(this.serialize(),J({transactionId:this.trxId},V,T||{}))},reset:function(){return this.operations=[],this},_add:function(T){return this.operations.push(T),this}}),le.exports=N},8502:(le,$,A)=>{"use strict";var F=A(5943),J=A(8014);function O(H){this.request=H.request.bind(H)}F(O.prototype,{create:function(V,N){return this._modify("PUT",V,N)},edit:function(V,N){return this._modify("PATCH",V,N)},delete:function(V){return this._modify("DELETE",V)},list:function(){return this.request({uri:"/datasets"})},_modify:function(V,N,L){return J.dataset(N),this.request({method:V,uri:"/datasets/".concat(N),body:L})}}),le.exports=O},2295:le=>{"use strict";le.exports=[]},9402:(le,$,A)=>{"use strict";var F=A(548),J=A(5943);function O(T){var E=V(T);O.super.call(this,E.message),J(this,E)}function H(T){var E=V(T);H.super.call(this,E.message),J(this,E)}function V(T){var E=T.body,B={response:T,statusCode:T.statusCode,responseBody:L(E,T)};return E.error&&E.message?(B.message="".concat(E.error," - ").concat(E.message),B):E.error&&E.error.description?(B.message=E.error.description,B.details=E.error,B):(B.message=E.error||E.message||function N(T){var E=T.statusMessage?" ".concat(T.statusMessage):"";return"".concat(T.method,"-request to ").concat(T.url," resulted in HTTP ").concat(T.statusCode).concat(E)}(T),B)}function L(T,E){return-1!==(E.headers["content-type"]||"").toLowerCase().indexOf("application/json")?JSON.stringify(T,null,2):T}F(O),F(H),$.ClientError=O,$.ServerError=H},4776:le=>{"use strict";le.exports=function($){var A=[];for(var F in $)$.hasOwnProperty(F)&&A.push("".concat(encodeURIComponent(F),"=").concat(encodeURIComponent($[F])));return A.length>0?"?".concat(A.join("&")):""}},1715:(le,$,A)=>{"use strict";var F=A(6246),J=A(5943),O=A(3825),H=A(7413),V=A(8795),N=A(9452),T=A(4675).Observable,E=A(9402),B=E.ClientError,Q=E.ServerError,X={onResponse:function(D){if(D.statusCode>=500)throw new Q(D);if(D.statusCode>=400)throw new B(D);return D}},_e={onResponse:function(D){var b=D.headers["x-sanity-warning"];return(Array.isArray(b)?b:[b]).filter(Boolean).forEach(function(G){return console.warn(G)}),D}},Te=F(A(2295).concat([_e,H(),V(),N(),X,O({implementation:T})]));function Oe(ae){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te;return D(J({maxRedirects:0},ae))}Oe.defaultRequester=Te,Oe.ClientError=B,Oe.ServerError=Q,le.exports=Oe},8125:(le,$,A)=>{"use strict";var F=A(5943),J="X-Sanity-Project-ID";le.exports=function(O){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},V={},N=H.token||O.token;N&&(V.Authorization="Bearer ".concat(N)),!H.useGlobalApi&&!O.useProjectHostname&&O.projectId&&(V[J]=O.projectId);var L=Boolean(void 0===H.withCredentials?O.token||O.withCredentials:H.withCredentials),T=void 0===H.timeout?O.timeout:H.timeout;return F({},H,{headers:F({},V,H.headers||{}),timeout:void 0===T?3e5:T,proxy:H.proxy||O.proxy,json:!0,withCredentials:L})}},4091:(le,$,A)=>{"use strict";function J(O){this.client=O}A(5943)(J.prototype,{list:function(){return this.client.request({uri:"/projects"})},getById:function(H){return this.client.request({uri:"/projects/".concat(H)})}}),le.exports=J},8304:(le,$,A)=>{"use strict";function F(de,ye){var Me=Object.keys(de);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(de);ye&&(Ie=Ie.filter(function(Ze){return Object.getOwnPropertyDescriptor(de,Ze).enumerable})),Me.push.apply(Me,Ie)}return Me}function O(de,ye,Me){return ye in de?Object.defineProperty(de,ye,{value:Me,enumerable:!0,configurable:!0,writable:!0}):de[ye]=Me,de}var H=A(5943),V=A(4675),N=V.Observable,L=V.map,T=V.filter,E=A(5873),B=A(1111),Q=A(9445),X=A(8502),_e=A(4091),be=A(6841),ie=A(9991),Te=A(2677),Oe=A(1715),ae=A(8125),D=A(4226),b=D.defaultConfig,z=D.initConfig,G=A(8014);function te(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;if(!(this instanceof te))return new te(de);if(this.config(de),this.assets=new be(this),this.datasets=new X(this),this.projects=new _e(this),this.users=new ie(this),this.auth=new Te(this),this.clientConfig.isPromiseAPI){var ye=H({},this.clientConfig,{isPromiseAPI:!1});this.observable=new te(ye)}}H(te.prototype,Q),H(te.prototype,{clone:function(){return new te(this.config())},config:function(ye){if(void 0===ye)return H({},this.clientConfig);if(this.observable){var Me=H({},ye,{isPromiseAPI:!1});this.observable.config(Me)}return this.clientConfig=z(ye,this.clientConfig||{}),this},withConfig:function(ye){return this.clone().config(ye)},getUrl:function(ye){var Me=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Ie=Me?this.clientConfig.cdnUrl:this.clientConfig.url;return"".concat(Ie,"/").concat(ye.replace(/^\//,""))},isPromiseAPI:function(){return this.clientConfig.isPromiseAPI},_requestObservable:function(ye){var Me=this,Ie=ye.url||ye.uri,Ze=void 0===ye.canUseCdn?["GET","HEAD"].indexOf(ye.method||"GET")>=0&&0===Ie.indexOf("/data/"):ye.canUseCdn,re=this.clientConfig.useCdn&&Ze,zt=ye.tag&&this.clientConfig.requestTagPrefix?[this.clientConfig.requestTagPrefix,ye.tag].join("."):ye.tag||this.clientConfig.requestTagPrefix;zt&&(ye.query=function J(de){for(var ye=1;ye<arguments.length;ye++){var Me=null!=arguments[ye]?arguments[ye]:{};ye%2?F(Object(Me),!0).forEach(function(Ie){O(de,Ie,Me[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Me)):F(Object(Me)).forEach(function(Ie){Object.defineProperty(de,Ie,Object.getOwnPropertyDescriptor(Me,Ie))})}return de}({tag:G.requestTag(zt)},ye.query));var K=ae(this.clientConfig,H({},ye,{url:this.getUrl(Ie,re)}));return new N(function(wn){return Oe(K,Me.clientConfig.requester).subscribe(wn)})},request:function(ye){var Me=this._requestObservable(ye).pipe(T(function(Ie){return"response"===Ie.type}),L(function(Ie){return Ie.body}));return this.isPromiseAPI()?function(ye){return ye.toPromise()}(Me):Me}}),te.Patch=E,te.Transaction=B,te.ClientError=Oe.ClientError,te.ServerError=Oe.ServerError,te.requester=Oe.defaultRequester,le.exports=te},9991:(le,$,A)=>{"use strict";function J(O){this.client=O}A(5943)(J.prototype,{getById:function(H){return this.client.request({uri:"/users/".concat(H)})}}),le.exports=J},5325:le=>{"use strict";le.exports=function($,A){return Object.keys(A).concat(Object.keys($)).reduce(function(F,J){return F[J]=void 0===$[J]?A[J]:$[J],F},{})}},7625:le=>{"use strict";le.exports=function(A){if("string"==typeof A||Array.isArray(A))return{id:A};if(A&&A.query)return"params"in A?{query:A.query,params:A.params}:{query:A.query};var F=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join("\n");throw new Error("Unknown selection - must be one of:\n\n".concat(F))}},4675:(le,$,A)=>{"use strict";var J=A(9592).Observable,H=A(248).filter,V=A(3430);le.exports={Observable:J,filter:H,map:V.map}},5883:le=>{"use strict";le.exports=function($){var F,A=!1;return function(){return A||(F=$.apply(void 0,arguments),A=!0),F}}},9091:le=>{"use strict";le.exports=function($,A){return A.reduce(function(F,J){return void 0===$[J]||(F[J]=$[J]),F},{})}},8014:(le,$)=>{"use strict";function A(O){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(O)}var F=["image","file"],J=["before","after","replace"];$.dataset=function(O){if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(O))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},$.projectId=function(O){if(!/^[-a-z0-9]+$/i.test(O))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},$.validateAssetType=function(O){if(-1===F.indexOf(O))throw new Error("Invalid asset type: ".concat(O,". Must be one of ").concat(F.join(", ")))},$.validateObject=function(O,H){if(null===H||"object"!==A(H)||Array.isArray(H))throw new Error("".concat(O,"() takes an object of properties"))},$.requireDocumentId=function(O,H){if(!H._id)throw new Error("".concat(O,'() requires that the document contains an ID ("_id" property)'));$.validateDocumentId(O,H._id)},$.validateDocumentId=function(O,H){if("string"!=typeof H||!/^[a-z0-9_.-]+$/i.test(H))throw new Error("".concat(O,'(): "').concat(H,'" is not a valid document ID'))},$.validateInsert=function(O,H,V){var N="insert(at, selector, items)";if(-1===J.indexOf(O)){var L=J.map(function(T){return'"'.concat(T,'"')}).join(", ");throw new Error("".concat(N,' takes an "at"-argument which is one of: ').concat(L))}if("string"!=typeof H)throw new Error("".concat(N,' takes a "selector"-argument which must be a string'));if(!Array.isArray(V))throw new Error("".concat(N,' takes an "items"-argument which must be an array'))},$.hasDataset=function(O){if(!O.dataset)throw new Error("`dataset` must be provided to perform queries");return O.dataset||""},$.requestTag=function(O){if("string"!=typeof O||!/^[a-z0-9._-]{1,75}$/i.test(O))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return O}},2196:(le,$,A)=>{"use strict";var F=A(1705).generateHelpUrl,J=A(5883),O=function(V){return J(function(){for(var N,L=arguments.length,T=new Array(L),E=0;E<L;E++)T[E]=arguments[E];return(N=console).warn.apply(N,[V.join(" ")].concat(T))})};$.printCdnWarning=O(["You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and","cheaper. Think about it! For more info, see ".concat(F("js-client-cdn-configuration"),"."),"To hide this warning, please set the `useCdn` option to either `true` or `false` when creating","the client."]),$.printBrowserTokenWarning=O(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(F("js-client-browser-token")," for more information and how to hide this warning.")]),$.printNoApiVersionSpecifiedWarning=O(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(F("js-client-api-version"))])},9592:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(8083),J=A(1798),O=A(9538),H=A(6478),V=A(9002),N=function(){function T(E){this._isScalar=!1,E&&(this._subscribe=E)}return T.prototype.lift=function(E){var B=new T;return B.source=this,B.operator=E,B},T.prototype.subscribe=function(E,B,Q){var X=this.operator,_e=J.toSubscriber(E,B,Q);if(_e.add(X?X.call(_e,this.source):this.source||V.config.useDeprecatedSynchronousErrorHandling&&!_e.syncErrorThrowable?this._subscribe(_e):this._trySubscribe(_e)),V.config.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable&&(_e.syncErrorThrowable=!1,_e.syncErrorThrown))throw _e.syncErrorValue;return _e},T.prototype._trySubscribe=function(E){try{return this._subscribe(E)}catch(B){V.config.useDeprecatedSynchronousErrorHandling&&(E.syncErrorThrown=!0,E.syncErrorValue=B),F.canReportError(E)?E.error(B):console.warn(B)}},T.prototype.forEach=function(E,B){var Q=this;return new(B=L(B))(function(X,_e){var be;be=Q.subscribe(function(ie){try{E(ie)}catch(Te){_e(Te),be&&be.unsubscribe()}},_e,X)})},T.prototype._subscribe=function(E){var B=this.source;return B&&B.subscribe(E)},T.prototype[O.observable]=function(){return this},T.prototype.pipe=function(){for(var E=[],B=0;B<arguments.length;B++)E[B]=arguments[B];return 0===E.length?this:H.pipeFromArray(E)(this)},T.prototype.toPromise=function(E){var B=this;return new(E=L(E))(function(Q,X){var _e;B.subscribe(function(be){return _e=be},function(be){return X(be)},function(){return Q(_e)})})},T.create=function(E){return new T(E)},T}();function L(T){if(T||(T=V.config.Promise||Promise),!T)throw new Error("no Promise impl found");return T}$.Observable=N},5787:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(9002),J=A(8331);$.empty={closed:!0,next:function(O){},error:function(O){if(F.config.useDeprecatedSynchronousErrorHandling)throw O;J.hostReportError(O)},complete:function(){}}},3650:function(le,$,A){"use strict";var B,F=this&&this.__extends||(B=function(Q,X){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,be){_e.__proto__=be}||function(_e,be){for(var ie in be)be.hasOwnProperty(ie)&&(_e[ie]=be[ie])})(Q,X)},function(Q,X){function _e(){this.constructor=Q}B(Q,X),Q.prototype=null===X?Object.create(X):(_e.prototype=X.prototype,new _e)});Object.defineProperty($,"__esModule",{value:!0});var J=A(1303),O=A(5787),H=A(9239),V=A(5268),N=A(9002),L=A(8331),T=function(B){function Q(X,_e,be){var ie=B.call(this)||this;switch(ie.syncErrorValue=null,ie.syncErrorThrown=!1,ie.syncErrorThrowable=!1,ie.isStopped=!1,arguments.length){case 0:ie.destination=O.empty;break;case 1:if(!X){ie.destination=O.empty;break}if("object"==typeof X){X instanceof Q?(ie.syncErrorThrowable=X.syncErrorThrowable,ie.destination=X,X.add(ie)):(ie.syncErrorThrowable=!0,ie.destination=new E(ie,X));break}default:ie.syncErrorThrowable=!0,ie.destination=new E(ie,X,_e,be)}return ie}return F(Q,B),Q.prototype[V.rxSubscriber]=function(){return this},Q.create=function(X,_e,be){var ie=new Q(X,_e,be);return ie.syncErrorThrowable=!1,ie},Q.prototype.next=function(X){this.isStopped||this._next(X)},Q.prototype.error=function(X){this.isStopped||(this.isStopped=!0,this._error(X))},Q.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Q.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,B.prototype.unsubscribe.call(this))},Q.prototype._next=function(X){this.destination.next(X)},Q.prototype._error=function(X){this.destination.error(X),this.unsubscribe()},Q.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Q.prototype._unsubscribeAndRecycle=function(){var X=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=X,this},Q}(H.Subscription);$.Subscriber=T;var E=function(B){function Q(X,_e,be,ie){var Te=B.call(this)||this;Te._parentSubscriber=X;var Oe,ae=Te;return J.isFunction(_e)?Oe=_e:_e&&(Oe=_e.next,be=_e.error,ie=_e.complete,_e!==O.empty&&(ae=Object.create(_e),J.isFunction(ae.unsubscribe)&&Te.add(ae.unsubscribe.bind(ae)),ae.unsubscribe=Te.unsubscribe.bind(Te))),Te._context=ae,Te._next=Oe,Te._error=be,Te._complete=ie,Te}return F(Q,B),Q.prototype.next=function(X){if(!this.isStopped&&this._next){var _e=this._parentSubscriber;N.config.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable?this.__tryOrSetError(_e,this._next,X)&&this.unsubscribe():this.__tryOrUnsub(this._next,X)}},Q.prototype.error=function(X){if(!this.isStopped){var _e=this._parentSubscriber,be=N.config.useDeprecatedSynchronousErrorHandling;if(this._error)be&&_e.syncErrorThrowable?(this.__tryOrSetError(_e,this._error,X),this.unsubscribe()):(this.__tryOrUnsub(this._error,X),this.unsubscribe());else if(_e.syncErrorThrowable)be?(_e.syncErrorValue=X,_e.syncErrorThrown=!0):L.hostReportError(X),this.unsubscribe();else{if(this.unsubscribe(),be)throw X;L.hostReportError(X)}}},Q.prototype.complete=function(){var X=this;if(!this.isStopped){var _e=this._parentSubscriber;if(this._complete){var be=function(){return X._complete.call(X._context)};N.config.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable?(this.__tryOrSetError(_e,be),this.unsubscribe()):(this.__tryOrUnsub(be),this.unsubscribe())}else this.unsubscribe()}},Q.prototype.__tryOrUnsub=function(X,_e){try{X.call(this._context,_e)}catch(be){if(this.unsubscribe(),N.config.useDeprecatedSynchronousErrorHandling)throw be;L.hostReportError(be)}},Q.prototype.__tryOrSetError=function(X,_e,be){if(!N.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{_e.call(this._context,be)}catch(ie){return N.config.useDeprecatedSynchronousErrorHandling?(X.syncErrorValue=ie,X.syncErrorThrown=!0,!0):(L.hostReportError(ie),!0)}return!1},Q.prototype._unsubscribe=function(){var X=this._parentSubscriber;this._context=null,this._parentSubscriber=null,X.unsubscribe()},Q}(T);$.SafeSubscriber=E},9239:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(8713),J=A(6250),O=A(1303),H=A(9484),V=function(){function L(T){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,T&&(this._ctorUnsubscribe=!0,this._unsubscribe=T)}return L.prototype.unsubscribe=function(){var T;if(!this.closed){var E=this,B=E._parentOrParents,Q=E._ctorUnsubscribe,X=E._unsubscribe,_e=E._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,B instanceof L)B.remove(this);else if(null!==B)for(var be=0;be<B.length;++be)B[be].remove(this);if(O.isFunction(X)){Q&&(this._unsubscribe=void 0);try{X.call(this)}catch(ae){T=ae instanceof H.UnsubscriptionError?N(ae.errors):[ae]}}if(F.isArray(_e)){be=-1;for(var Te=_e.length;++be<Te;){var Oe=_e[be];if(J.isObject(Oe))try{Oe.unsubscribe()}catch(D){T=T||[],D instanceof H.UnsubscriptionError?T=T.concat(N(D.errors)):T.push(D)}}}if(T)throw new H.UnsubscriptionError(T)}},L.prototype.add=function(T){var E=T;if(!T)return L.EMPTY;switch(typeof T){case"function":E=new L(T);case"object":if(E===this||E.closed||"function"!=typeof E.unsubscribe)return E;if(this.closed)return E.unsubscribe(),E;if(!(E instanceof L)){var B=E;(E=new L)._subscriptions=[B]}break;default:throw new Error("unrecognized teardown "+T+" added to Subscription.")}var Q=E._parentOrParents;if(null===Q)E._parentOrParents=this;else if(Q instanceof L){if(Q===this)return E;E._parentOrParents=[Q,this]}else{if(-1!==Q.indexOf(this))return E;Q.push(this)}var X=this._subscriptions;return null===X?this._subscriptions=[E]:X.push(E),E},L.prototype.remove=function(T){var E=this._subscriptions;if(E){var B=E.indexOf(T);-1!==B&&E.splice(B,1)}},L.EMPTY=((T=new L).closed=!0,T),L;var T}();function N(L){return L.reduce(function(T,E){return T.concat(E instanceof H.UnsubscriptionError?E.errors:E)},[])}$.Subscription=V},9002:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var A=!1;$.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){var J=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+J.stack)}else A&&console.log("RxJS: Back to a better error behavior. Thank you. <3");A=F},get useDeprecatedSynchronousErrorHandling(){return A}}},248:function(le,$,A){"use strict";var N,F=this&&this.__extends||(N=function(L,T){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,B){E.__proto__=B}||function(E,B){for(var Q in B)B.hasOwnProperty(Q)&&(E[Q]=B[Q])})(L,T)},function(L,T){function E(){this.constructor=L}N(L,T),L.prototype=null===T?Object.create(T):(E.prototype=T.prototype,new E)});Object.defineProperty($,"__esModule",{value:!0});var J=A(3650);$.filter=function O(N,L){return function(E){return E.lift(new H(N,L))}};var H=function(){function N(L,T){this.predicate=L,this.thisArg=T}return N.prototype.call=function(L,T){return T.subscribe(new V(L,this.predicate,this.thisArg))},N}(),V=function(N){function L(T,E,B){var Q=N.call(this,T)||this;return Q.predicate=E,Q.thisArg=B,Q.count=0,Q}return F(L,N),L.prototype._next=function(T){var E;try{E=this.predicate.call(this.thisArg,T,this.count++)}catch(B){return void this.destination.error(B)}E&&this.destination.next(T)},L}(J.Subscriber)},3430:function(le,$,A){"use strict";var N,F=this&&this.__extends||(N=function(L,T){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,B){E.__proto__=B}||function(E,B){for(var Q in B)B.hasOwnProperty(Q)&&(E[Q]=B[Q])})(L,T)},function(L,T){function E(){this.constructor=L}N(L,T),L.prototype=null===T?Object.create(T):(E.prototype=T.prototype,new E)});Object.defineProperty($,"__esModule",{value:!0});var J=A(3650);$.map=function O(N,L){return function(E){if("function"!=typeof N)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return E.lift(new H(N,L))}};var H=function(){function N(L,T){this.project=L,this.thisArg=T}return N.prototype.call=function(L,T){return T.subscribe(new V(L,this.project,this.thisArg))},N}();$.MapOperator=H;var V=function(N){function L(T,E,B){var Q=N.call(this,T)||this;return Q.project=E,Q.count=0,Q.thisArg=B||Q,Q}return F(L,N),L.prototype._next=function(T){var E;try{E=this.project.call(this.thisArg,T,this.count++)}catch(B){return void this.destination.error(B)}this.destination.next(E)},L}(J.Subscriber)},9538:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},5268:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),$.$$rxSubscriber=$.rxSubscriber},9484:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var A=function(){function F(J){return Error.call(this),this.message=J?J.length+" errors occurred during unsubscription:\n"+J.map(function(O,H){return H+1+") "+O.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=J,this}return F.prototype=Object.create(Error.prototype),F}();$.UnsubscriptionError=A},8083:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(3650);$.canReportError=function J(O){for(;O;){var N=O.destination;if(O.closed||O.isStopped)return!1;O=N&&N instanceof F.Subscriber?N:null}return!0}},8331:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.hostReportError=function A(F){setTimeout(function(){throw F},0)}},6113:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.identity=function A(F){return F}},8713:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.isArray=Array.isArray||function(A){return A&&"number"==typeof A.length}},1303:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.isFunction=function A(F){return"function"==typeof F}},6250:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.isObject=function A(F){return null!==F&&"object"==typeof F}},6478:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(6113);function O(H){return 0===H.length?F.identity:1===H.length?H[0]:function(N){return H.reduce(function(L,T){return T(L)},N)}}$.pipe=function J(){for(var H=[],V=0;V<arguments.length;V++)H[V]=arguments[V];return O(H)},$.pipeFromArray=O},1798:(le,$,A)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var F=A(3650),J=A(5268),O=A(5787);$.toSubscriber=function H(V,N,L){if(V){if(V instanceof F.Subscriber)return V;if(V[J.rxSubscriber])return V[J.rxSubscriber]()}return V||N||L?new F.Subscriber(V,N,L):new F.Subscriber(O.empty)}},1789:(le,$,A)=>{var F=A(9104);le.exports=F.EventSourcePolyfill},1705:(le,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$[Symbol.toStringTag]="Module",$.generateHelpUrl=function F(J){return"https://docs.sanity.io/help/"+J}},7803:function(le){le.exports=function(){var $="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function H(D){if(!D)return null;var b;if("string"==typeof D&&function V(D){return/^https?:\/\//.test(""+D)}(D))b={asset:{_ref:N(D)}};else if("string"==typeof D)b={asset:{_ref:D}};else if(function(D){return!!D&&"string"==typeof D._ref}(D))b={asset:D};else if(function(D){return!!D&&"string"==typeof D._id}(D))b={asset:{_ref:D._id||""}};else if(function(D){return!(!D||!D.asset)&&"string"==typeof D.asset.url}(D))b={asset:{_ref:N(D.asset.url)}};else{if("object"!=typeof D.asset)return null;b=D}var z=D;return z.crop&&(b.crop=z.crop),z.hotspot&&(b.hotspot=z.hotspot),function L(D){if(D.crop&&D.hotspot)return D;var b=Object.assign({},D);return b.crop||(b.crop={left:0,top:0,bottom:0,right:0}),b.hotspot||(b.hotspot={x:.5,y:.5,height:1,width:1}),b}(b)}function N(D){return("image-"+D.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}var T=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"]];function E(D){var b=Object.assign({},D||{}),z=b.source;delete b.source;var G=H(z);if(!G)throw new Error("Unable to resolve image URL from source ("+JSON.stringify(z)+")");var te=function A(D){var b=D.split("-"),z=b[1],G=b[2],me=b[3];if(!z||!G||!me)throw new Error("Malformed asset _ref '"+D+"'. Expected an id like \""+$+'".');var te=G.split("x"),Me=+te[0],Ie=+te[1];if(!isFinite(Me)||!isFinite(Ie))throw new Error("Malformed asset _ref '"+D+"'. Expected an id like \""+$+'".');return{id:z,width:Me,height:Ie,format:me}}(G.asset._ref||G.asset._id||""),de=Math.round(G.crop.left*te.width),ye=Math.round(G.crop.top*te.height),Me={left:de,top:ye,width:Math.round(te.width-G.crop.right*te.width-de),height:Math.round(te.height-G.crop.bottom*te.height-ye)},Ie=G.hotspot.height*te.height/2,Ze=G.hotspot.width*te.width/2,re=G.hotspot.x*te.width,zt=G.hotspot.y*te.height;return b.rect||b.focalPoint||b.ignoreImageParams||b.crop||(b=Object.assign({},b,function Q(D,b){var z,G=b.width,me=b.height;if(!G||!me)return{width:G,height:me,rect:D.crop};var te=D.crop,de=D.hotspot,ye=G/me;if(te.width/te.height>ye){var Ie=Math.round(te.height),Ze=Math.round(Ie*ye),re=Math.max(0,Math.round(te.top)),zt=Math.round((de.right-de.left)/2+de.left),K=Math.max(0,Math.round(zt-Ze/2));K<te.left?K=te.left:K+Ze>te.left+te.width&&(K=te.left+te.width-Ze),z={left:K,top:re,width:Ze,height:Ie}}else{var wn=te.width,ke=Math.round(wn/ye),nt=Math.max(0,Math.round(te.left)),ot=Math.round((de.bottom-de.top)/2+de.top),mt=Math.max(0,Math.round(ot-ke/2));mt<te.top?mt=te.top:mt+ke>te.top+te.height&&(mt=te.top+te.height-ke),z={left:nt,top:mt,width:wn,height:ke}}return{width:G,height:me,rect:z}}({crop:Me,hotspot:{left:re-Ze,top:zt-Ie,right:re+Ze,bottom:zt+Ie}},b))),function B(D){var G=(D.baseUrl||"https://cdn.sanity.io")+"/images/"+D.projectId+"/"+D.dataset+"/"+D.asset.id+"-"+D.asset.width+"x"+D.asset.height+"."+D.asset.format,me=[];if(D.rect){var te=D.rect,de=te.left,ye=te.top,Me=te.width,Ie=te.height;(0!==de||0!==ye||Ie!==D.asset.height||Me!==D.asset.width)&&me.push("rect="+de+","+ye+","+Me+","+Ie)}D.bg&&me.push("bg="+D.bg),D.focalPoint&&(me.push("fp-x="+D.focalPoint.x),me.push("fp-y="+D.focalPoint.y));var re=[D.flipHorizontal&&"h",D.flipVertical&&"v"].filter(Boolean).join("");return re&&me.push("flip="+re),T.forEach(function(zt){var K=zt[0],wn=zt[1];void 0!==D[K]?me.push(wn+"="+encodeURIComponent(D[K])):void 0!==D[wn]&&me.push(wn+"="+encodeURIComponent(D[wn]))}),0===me.length?G:G+"?"+me.join("&")}(Object.assign({},b,{asset:te}))}var X=["clip","crop","fill","fillmax","max","scale","min"],_e=["top","bottom","left","right","center","focalpoint","entropy"],be=["format"];function Te(D){for(var z=0,G=T;z<G.length;z+=1){var me=G[z],te=me[0];if(D===te||D===me[1])return te}return D}var ae=function(b,z){this.options=b?Object.assign({},b.options||{},z||{}):Object.assign({},z||{})};return ae.prototype.withOptions=function(b){var z=b.baseUrl||this.options.baseUrl,G={baseUrl:z};for(var me in b)b.hasOwnProperty(me)&&(G[Te(me)]=b[me]);return new ae(this,Object.assign({},{baseUrl:z},G))},ae.prototype.image=function(b){return this.withOptions({source:b})},ae.prototype.dataset=function(b){return this.withOptions({dataset:b})},ae.prototype.projectId=function(b){return this.withOptions({projectId:b})},ae.prototype.bg=function(b){return this.withOptions({bg:b})},ae.prototype.dpr=function(b){return this.withOptions(b&&1!==b?{dpr:b}:{})},ae.prototype.width=function(b){return this.withOptions({width:b})},ae.prototype.height=function(b){return this.withOptions({height:b})},ae.prototype.focalPoint=function(b,z){return this.withOptions({focalPoint:{x:b,y:z}})},ae.prototype.maxWidth=function(b){return this.withOptions({maxWidth:b})},ae.prototype.minWidth=function(b){return this.withOptions({minWidth:b})},ae.prototype.maxHeight=function(b){return this.withOptions({maxHeight:b})},ae.prototype.minHeight=function(b){return this.withOptions({minHeight:b})},ae.prototype.size=function(b,z){return this.withOptions({width:b,height:z})},ae.prototype.blur=function(b){return this.withOptions({blur:b})},ae.prototype.sharpen=function(b){return this.withOptions({sharpen:b})},ae.prototype.rect=function(b,z,G,me){return this.withOptions({rect:{left:b,top:z,width:G,height:me}})},ae.prototype.format=function(b){return this.withOptions({format:b})},ae.prototype.invert=function(b){return this.withOptions({invert:b})},ae.prototype.orientation=function(b){return this.withOptions({orientation:b})},ae.prototype.quality=function(b){return this.withOptions({quality:b})},ae.prototype.forceDownload=function(b){return this.withOptions({download:b})},ae.prototype.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},ae.prototype.flipVertical=function(){return this.withOptions({flipVertical:!0})},ae.prototype.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},ae.prototype.fit=function(b){if(-1===X.indexOf(b))throw new Error('Invalid fit mode "'+b+'"');return this.withOptions({fit:b})},ae.prototype.crop=function(b){if(-1===_e.indexOf(b))throw new Error('Invalid crop mode "'+b+'"');return this.withOptions({crop:b})},ae.prototype.saturation=function(b){return this.withOptions({saturation:b})},ae.prototype.auto=function(b){if(-1===be.indexOf(b))throw new Error('Invalid auto mode "'+b+'"');return this.withOptions({auto:b})},ae.prototype.pad=function(b){return this.withOptions({pad:b})},ae.prototype.url=function(){return E(this.options)},ae.prototype.toString=function(){return this.url()},function Oe(D){var b=D;if(function ie(D){return!!D&&"object"==typeof D.clientConfig}(b)){var z=b.clientConfig,me=z.projectId,te=z.dataset;return new ae(null,{baseUrl:(z.apiHost||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:me,dataset:te})}return new ae(null,D)}}()},9104:function(le,$){var A,F,J;!function(O){"use strict";var H=O.setTimeout,V=O.clearTimeout,N=O.XMLHttpRequest,L=O.XDomainRequest,T=O.ActiveXObject,E=O.EventSource,B=O.document,Q=O.Promise,X=O.fetch,_e=O.Response,be=O.TextDecoder,ie=O.TextEncoder,Te=O.AbortController;if("undefined"!=typeof window&&void 0!==B&&!("readyState"in B)&&null==B.body&&(B.readyState="loading",window.addEventListener("load",function(he){B.readyState="complete"},!1)),null==N&&null!=T&&(N=function(){return new T("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(he){function Be(){}return Be.prototype=he,new Be}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==Te){var Oe=X;X=function(he,Be){var Qe=Be.signal;return Oe(he,{headers:Be.headers,credentials:Be.credentials,cache:Be.cache}).then(function(Ue){var ct=Ue.body.getReader();return Qe._reader=ct,Qe._aborted&&Qe._reader.cancel(),{status:Ue.status,statusText:Ue.statusText,headers:Ue.headers,body:{getReader:function(){return ct}}}})},Te=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function ae(){this.bitsNeeded=0,this.codePoint=0}ae.prototype.decode=function(he){function Be(cn,bn,Mt){if(1===Mt)return cn>=128>>bn&&cn<<bn<=2047;if(2===Mt)return cn>=2048>>bn&&cn<<bn<=55295||cn>=57344>>bn&&cn<<bn<=65535;if(3===Mt)return cn>=65536>>bn&&cn<<bn<=1114111;throw new Error}function Qe(cn,bn){if(6===cn)return bn>>6>15?3:bn>31?2:1;if(12===cn)return bn>15?3:2;if(18===cn)return 3;throw new Error}for(var ct="",at=this.bitsNeeded,Bt=this.codePoint,dn=0;dn<he.length;dn+=1){var Zt=he[dn];0!==at&&(Zt<128||Zt>191||!Be(Bt<<6|63&Zt,at-6,Qe(at,Bt)))&&(at=0,Bt=65533,ct+=String.fromCharCode(Bt)),0===at?(Zt>=0&&Zt<=127?(at=0,Bt=Zt):Zt>=192&&Zt<=223?(at=6,Bt=31&Zt):Zt>=224&&Zt<=239?(at=12,Bt=15&Zt):Zt>=240&&Zt<=247?(at=18,Bt=7&Zt):(at=0,Bt=65533),0!==at&&!Be(Bt,at,Qe(at,Bt))&&(at=0,Bt=65533)):(at-=6,Bt=Bt<<6|63&Zt),0===at&&(Bt<=65535?ct+=String.fromCharCode(Bt):(ct+=String.fromCharCode(55296+(Bt-65535-1>>10)),ct+=String.fromCharCode(56320+(Bt-65535-1&1023))))}return this.bitsNeeded=at,this.codePoint=Bt,ct},(null==be||null==ie||!function(){try{return"test"===(new be).decode((new ie).encode("test"),{stream:!0})}catch(he){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+he)}return!1}())&&(be=ae);var b=function(){};function z(he){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=b,this.onload=b,this.onerror=b,this.onreadystatechange=b,this._contentType="",this._xhr=he,this._sendTimeout=0,this._abort=b}function G(he){return he.replace(/[A-Z]/g,function(Be){return String.fromCharCode(Be.charCodeAt(0)+32)})}function me(he){for(var Be=Object.create(null),Qe=he.split("\r\n"),Ue=0;Ue<Qe.length;Ue+=1){var at=Qe[Ue].split(": "),Bt=at.shift(),dn=at.join(": ");Be[G(Bt)]=dn}this._map=Be}function te(){}function de(he){this._headers=he}function ye(){}function Me(){this._listeners=Object.create(null)}function Ie(he){H(function(){throw he},0)}function Ze(he){this.type=he,this.target=void 0}function re(he,Be){Ze.call(this,he),this.data=Be.data,this.lastEventId=Be.lastEventId}function zt(he,Be){Ze.call(this,he),this.status=Be.status,this.statusText=Be.statusText,this.headers=Be.headers}function K(he,Be){Ze.call(this,he),this.error=Be.error}z.prototype.open=function(he,Be){this._abort(!0);var Qe=this,Ue=this._xhr,ct=1,at=0;this._abort=function(Mt){0!==Qe._sendTimeout&&(V(Qe._sendTimeout),Qe._sendTimeout=0),(1===ct||2===ct||3===ct)&&(ct=4,Ue.onload=b,Ue.onerror=b,Ue.onabort=b,Ue.onprogress=b,Ue.onreadystatechange=b,Ue.abort(),0!==at&&(V(at),at=0),Mt||(Qe.readyState=4,Qe.onabort(null),Qe.onreadystatechange())),ct=0};var Bt=function(){if(1===ct){var Mt=0,Pn="",os=void 0;if("contentType"in Ue)Mt=200,Pn="OK",os=Ue.contentType;else try{Mt=Ue.status,Pn=Ue.statusText,os=Ue.getResponseHeader("Content-Type")}catch(io){Mt=0,Pn="",os=void 0}0!==Mt&&(ct=2,Qe.readyState=2,Qe.status=Mt,Qe.statusText=Pn,Qe._contentType=os,Qe.onreadystatechange())}},dn=function(){if(Bt(),2===ct||3===ct){ct=3;var Mt="";try{Mt=Ue.responseText}catch(Pn){}Qe.readyState=3,Qe.responseText=Mt,Qe.onprogress()}},Zt=function(Mt,Pn){if((null==Pn||null==Pn.preventDefault)&&(Pn={preventDefault:b}),dn(),1===ct||2===ct||3===ct){if(ct=4,0!==at&&(V(at),at=0),Qe.readyState=4,"load"===Mt)Qe.onload(Pn);else if("error"===Mt)Qe.onerror(Pn);else{if("abort"!==Mt)throw new TypeError;Qe.onabort(Pn)}Qe.onreadystatechange()}},bn=function(){at=H(function(){bn()},500),3===Ue.readyState&&dn()};"onload"in Ue&&(Ue.onload=function(Mt){Zt("load",Mt)}),"onerror"in Ue&&(Ue.onerror=function(Mt){Zt("error",Mt)}),"onabort"in Ue&&(Ue.onabort=function(Mt){Zt("abort",Mt)}),"onprogress"in Ue&&(Ue.onprogress=dn),"onreadystatechange"in Ue&&(Ue.onreadystatechange=function(Mt){!function(Mt){null!=Ue&&(4===Ue.readyState?(!("onload"in Ue)||!("onerror"in Ue)||!("onabort"in Ue))&&Zt(""===Ue.responseText?"error":"load",Mt):3===Ue.readyState?"onprogress"in Ue||dn():2===Ue.readyState&&Bt())}(Mt)}),("contentType"in Ue||!("ontimeout"in N.prototype))&&(Be+=(-1===Be.indexOf("?")?"?":"&")+"padding=true"),Ue.open(he,Be,!0),"readyState"in Ue&&(at=H(function(){bn()},0))},z.prototype.abort=function(){this._abort(!1)},z.prototype.getResponseHeader=function(he){return this._contentType},z.prototype.setRequestHeader=function(he,Be){var Qe=this._xhr;"setRequestHeader"in Qe&&Qe.setRequestHeader(he,Be)},z.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},z.prototype.send=function(){if("ontimeout"in N.prototype&&("sendAsBinary"in N.prototype||"mozAnon"in N.prototype)||null==B||null==B.readyState||"complete"===B.readyState){var Be=this._xhr;"withCredentials"in Be&&(Be.withCredentials=this.withCredentials);try{Be.send(void 0)}catch(Qe){throw Qe}}else{var he=this;he._sendTimeout=H(function(){he._sendTimeout=0,he.send()},4)}},me.prototype.get=function(he){return this._map[G(he)]},null!=N&&null==N.HEADERS_RECEIVED&&(N.HEADERS_RECEIVED=2),te.prototype.open=function(he,Be,Qe,Ue,ct,at,Bt){he.open("GET",ct);var dn=0;for(var Zt in he.onprogress=function(){var bn=he.responseText.slice(dn);dn+=bn.length,Qe(bn)},he.onerror=function(cn){cn.preventDefault(),Ue(new Error("NetworkError"))},he.onload=function(){Ue(null)},he.onabort=function(){Ue(null)},he.onreadystatechange=function(){if(he.readyState===N.HEADERS_RECEIVED){var cn=he.status,bn=he.statusText,Mt=he.getResponseHeader("Content-Type"),Pn=he.getAllResponseHeaders();Be(cn,bn,Mt,new me(Pn))}},he.withCredentials=at,Bt)Object.prototype.hasOwnProperty.call(Bt,Zt)&&he.setRequestHeader(Zt,Bt[Zt]);return he.send(),he},de.prototype.get=function(he){return this._headers.get(he)},ye.prototype.open=function(he,Be,Qe,Ue,ct,at,Bt){var dn=null,Zt=new Te,cn=Zt.signal,bn=new be;return X(ct,{headers:Bt,credentials:at?"include":"same-origin",signal:cn,cache:"no-store"}).then(function(Mt){return dn=Mt.body.getReader(),Be(Mt.status,Mt.statusText,Mt.headers.get("Content-Type"),new de(Mt.headers)),new Q(function(Pn,os){var io=function(){dn.read().then(function(Dr){if(Dr.done)Pn(void 0);else{var gr=bn.decode(Dr.value,{stream:!0});Qe(gr),io()}}).catch(function(Dr){os(Dr)})};io()})}).catch(function(Mt){if("AbortError"!==Mt.name)return Mt}).then(function(Mt){Ue(Mt)}),{abort:function(){null!=dn&&dn.cancel(),Zt.abort()}}},Me.prototype.dispatchEvent=function(he){he.target=this;var Be=this._listeners[he.type];if(null!=Be)for(var Qe=Be.length,Ue=0;Ue<Qe;Ue+=1){var ct=Be[Ue];try{"function"==typeof ct.handleEvent?ct.handleEvent(he):ct.call(this,he)}catch(at){Ie(at)}}},Me.prototype.addEventListener=function(he,Be){he=String(he);var Qe=this._listeners,Ue=Qe[he];null==Ue&&(Qe[he]=Ue=[]);for(var ct=!1,at=0;at<Ue.length;at+=1)Ue[at]===Be&&(ct=!0);ct||Ue.push(Be)},Me.prototype.removeEventListener=function(he,Be){he=String(he);var Qe=this._listeners,Ue=Qe[he];if(null!=Ue){for(var ct=[],at=0;at<Ue.length;at+=1)Ue[at]!==Be&&ct.push(Ue[at]);0===ct.length?delete Qe[he]:Qe[he]=ct}},re.prototype=Object.create(Ze.prototype),zt.prototype=Object.create(Ze.prototype),K.prototype=Object.create(Ze.prototype);var no=/^text\/event\-stream(;.*)?$/i,Ds=function(he,Be){var Qe=null==he?Be:parseInt(he,10);return Qe!=Qe&&(Qe=Be),As(Qe)},As=function(he){return Math.min(Math.max(he,1e3),18e6)},Oi=function(he,Be,Qe){try{"function"==typeof Be&&Be.call(he,Qe)}catch(Ue){Ie(Ue)}};function _n(he,Be){Me.call(this),Be=Be||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function Ba(he,Be,Qe){Be=String(Be);var Ue=Boolean(Qe.withCredentials),ct=Qe.lastEventIdQueryParameterName||"lastEventId",at=As(1e3),Bt=Ds(Qe.heartbeatTimeout,45e3),dn="",Zt=at,cn=!1,bn=0,Mt=Qe.headers||{},Pn=Qe.Transport,os=ro&&null==Pn?void 0:new z(null!=Pn?new Pn:function Fi(){return null!=N&&"withCredentials"in N.prototype||null==L?new N:new L}()),io=null!=Pn&&"string"!=typeof Pn?new Pn:null==os?new ye:new te,Dr=void 0,gr=0,Zr=-1,Rs="",Ua="",vi="",qo="",yr=0,Ha=0,Mr=0,Bp=function(Jn,$n,Nn,Br){if(0===Zr)if(200===Jn&&null!=Nn&&no.test(Nn)){Zr=1,cn=Date.now(),Zt=at,he.readyState=1;var nn=new zt("open",{status:Jn,statusText:$n,headers:Br});he.dispatchEvent(nn),Oi(he,he.onopen,nn)}else{var kn="";200!==Jn?($n&&($n=$n.replace(/\s+/g," ")),kn="EventSource's response has a status "+Jn+" "+$n+" that is not 200. Aborting the connection."):kn="EventSource's response has a Content-Type specifying an unsupported type: "+(null==Nn?"-":Nn.replace(/\s+/g," "))+". Aborting the connection.",Bc(),nn=new zt("error",{status:Jn,statusText:$n,headers:Br}),he.dispatchEvent(nn),Oi(he,he.onerror,nn),console.error(kn)}},Up=function(Jn){if(1===Zr){for(var $n=-1,Nn=0;Nn<Jn.length;Nn+=1)((Br=Jn.charCodeAt(Nn))==="\n".charCodeAt(0)||Br==="\r".charCodeAt(0))&&($n=Nn);var nn=(-1!==$n?qo:"")+Jn.slice(0,$n+1);qo=(-1===$n?qo:"")+Jn.slice($n+1),""!==Jn&&(cn=Date.now(),bn+=Jn.length);for(var kn=0;kn<nn.length;kn+=1){var Br=nn.charCodeAt(kn);if(-1===yr&&Br==="\n".charCodeAt(0))yr=0;else if(-1===yr&&(yr=0),Br==="\r".charCodeAt(0)||Br==="\n".charCodeAt(0)){if(0!==yr){1===yr&&(Mr=kn+1);var lr=nn.slice(Ha,Mr-1),as=nn.slice(Mr+(Mr<kn&&nn.charCodeAt(Mr)===" ".charCodeAt(0)?1:0),kn);"data"===lr?(Rs+="\n",Rs+=as):"id"===lr?Ua=as:"event"===lr?vi=as:"retry"===lr?(at=Ds(as,at),Zt=at):"heartbeatTimeout"===lr&&(Bt=Ds(as,Bt),0!==gr&&(V(gr),gr=H(function(){so()},Bt)))}if(0===yr){if(""!==Rs){dn=Ua,""===vi&&(vi="message");var oo=new re(vi,{data:Rs.slice(1),lastEventId:Ua});if(he.dispatchEvent(oo),"open"===vi?Oi(he,he.onopen,oo):"message"===vi?Oi(he,he.onmessage,oo):"error"===vi&&Oi(he,he.onerror,oo),2===Zr)return}Rs="",vi=""}yr=Br==="\r".charCodeAt(0)?-1:0}else 0===yr&&(Ha=kn,yr=1),1===yr?Br===":".charCodeAt(0)&&(Mr=kn+1,yr=2):2===yr&&(yr=3)}}},Md=function(Jn){if(1===Zr||0===Zr){Zr=-1,0!==gr&&(V(gr),gr=0),gr=H(function(){so()},Zt),Zt=As(Math.min(16*at,2*Zt)),he.readyState=0;var $n=new K("error",{error:Jn});he.dispatchEvent($n),Oi(he,he.onerror,$n),null!=Jn&&console.error(Jn)}},Bc=function(){Zr=2,null!=Dr&&(Dr.abort(),Dr=void 0),0!==gr&&(V(gr),gr=0),he.readyState=2},so=function(){if(gr=0,-1===Zr){cn=!1,bn=0,gr=H(function(){so()},Bt),Zr=0,Rs="",vi="",Ua=dn,qo="",Ha=0,Mr=0,yr=0;var $n=Be;if("data:"!==Be.slice(0,5)&&"blob:"!==Be.slice(0,5)&&""!==dn){var Nn=Be.indexOf("?");$n=-1===Nn?Be:Be.slice(0,Nn+1)+Be.slice(Nn+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(as,oo){return oo===ct?"":as}),$n+=(-1===Be.indexOf("?")?"?":"&")+ct+"="+encodeURIComponent(dn)}var Br=he.withCredentials,nn={Accept:"text/event-stream"},kn=he.headers;if(null!=kn)for(var lr in kn)Object.prototype.hasOwnProperty.call(kn,lr)&&(nn[lr]=kn[lr]);try{Dr=io.open(os,Bp,Up,Md,$n,Br,nn)}catch(as){throw Bc(),as}}else if(cn||null==Dr){var Jn=Math.max((cn||Date.now())+Bt-Date.now(),1);cn=!1,gr=H(function(){so()},Jn)}else Md(new Error("No activity within "+Bt+" milliseconds. "+(0===Zr?"No response received.":bn+" chars received.")+" Reconnecting.")),null!=Dr&&(Dr.abort(),Dr=void 0)};he.url=Be,he.readyState=0,he.withCredentials=Ue,he.headers=Mt,he._close=Bc,so()}(this,he,Be)}var ro=null!=X&&null!=_e&&"body"in _e.prototype;(_n.prototype=Object.create(Me.prototype)).CONNECTING=0,_n.prototype.OPEN=1,_n.prototype.CLOSED=2,_n.prototype.close=function(){this._close()},_n.CONNECTING=0,_n.OPEN=1,_n.CLOSED=2,_n.prototype.withCredentials=void 0;var $o=E;null!=N&&(null==E||!("withCredentials"in E.prototype))&&($o=_n),function(he){if("object"==typeof le.exports){var Be=he($);void 0!==Be&&(le.exports=Be)}else F=[$],void 0!==(J="function"==typeof(A=he)?A.apply($,F):A)&&(le.exports=J)}(function(he){he.EventSourcePolyfill=_n,he.NativeEventSource=E,he.EventSource=$o})}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:this:globalThis)},6246:(le,$,A)=>{le.exports=A(9934)},9934:(le,$,A)=>{"use strict";var F=A(8387),J=A(9241),O=A(3003),H=A(631),V=A(5482),N=["request","response","progress","error","abort"],L=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];le.exports=function T(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,Q=[],X=L.reduce(function(be,ie){return be[ie]=be[ie]||[],be},{processOptions:[O],validateOptions:[H]});function _e(be){var ie=N.reduce(function(me,te){return me[te]=F(),me},{}),Te=J(X),Oe=Te("processOptions",be);Te("validateOptions",Oe);var ae={options:Oe,channels:ie,applyMiddleware:Te},D=null,b=ie.request.subscribe(function(me){D=B(me,function(te,de){return function G(me,te,de){var ye=me,Me=te;if(!ye)try{Me=Te("onResponse",te,de)}catch(Ie){Me=null,ye=Ie}(ye=ye&&Te("onError",ye,de))?ie.error.publish(ye):Me&&ie.response.publish(Me)}(te,de,me)})});ie.abort.subscribe(function(){b(),D&&D.abort()});var z=Te("onReturn",ie,ae);return z===ie&&ie.request.publish(ae),z}return _e.use=function(ie){if(!ie)throw new Error("Tried to add middleware that resolved to falsey value");if("function"==typeof ie)throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(ie.onReturn&&X.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return L.forEach(function(Te){ie[Te]&&X[Te].push(ie[Te])}),Q.push(ie),_e},_e.clone=function(){return T(Q)},E.forEach(_e.use),_e}},3003:(le,$,A)=>{"use strict";var F=A(5943),J=A(7629),O="undefined"!=typeof navigator&&"ReactNative"===navigator.product,H=Object.prototype.hasOwnProperty,V={timeout:O?6e4:12e4};function N(E){var B=[];for(var Q in E)H.call(E,Q)&&X(Q,E[Q]);return B.length?B.join("&"):"";function X(_e,be){Array.isArray(be)?be.forEach(function(ie){return X(_e,ie)}):B.push([_e,be].map(encodeURIComponent).join("="))}}function L(E){if(!1===E||0===E)return!1;if(E.connect||E.socket)return E;var B=Number(E);return isNaN(B)?L(V.timeout):{connect:B,socket:B}}le.exports=function(E){var B="string"==typeof E?F({url:E},V):F({},V,E),Q=J(B.url,{},!0);return B.timeout=L(B.timeout),B.query&&(Q.query=F({},Q.query,function T(E){var B={};for(var Q in E)void 0!==E[Q]&&(B[Q]=E[Q]);return B}(B.query))),B.method=B.body&&!B.method?"POST":(B.method||"GET").toUpperCase(),B.url=Q.toString(N),B}},631:le=>{"use strict";var $=/^https?:\/\//i;le.exports=function(A){if(!$.test(A.url))throw new Error('"'.concat(A.url,'" is not a valid URL'))}},7413:(le,$,A)=>{"use strict";function F(N){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(N)}var J=A(5943),O=A(717),H=["boolean","string","number"];le.exports=function(){return{processOptions:function(L){var T=L.body;if(!T)return L;var B=!("function"==typeof T.pipe)&&!function(L){return!!L.constructor&&"function"==typeof L.constructor.isBuffer&&L.constructor.isBuffer(L)}(T)&&(-1!==H.indexOf(F(T))||Array.isArray(T)||O(T));return B?J({},L,{body:JSON.stringify(L.body),headers:J({},L.headers,{"Content-Type":"application/json"})}):L}}}},8795:(le,$,A)=>{"use strict";var F=A(5943);function J(O){try{return JSON.parse(O)}catch(H){throw H.message="Failed to parsed response body as JSON: ".concat(H.message),H}}le.exports=function(O){return{onResponse:function(V){var N=V.headers["content-type"]||"",L=O&&O.force||-1!==N.indexOf("application/json");return V.body&&N&&L?F({},V,{body:J(V.body)}):V},processOptions:function(V){return F({},V,{headers:F({Accept:"application/json"},V.headers)})}}}},3825:(le,$,A)=>{"use strict";var F=A(9229),J=A(5943);le.exports=function(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=O.implementation||F.Observable;if(!H)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:function(N,L){return new H(function(T){return N.error.subscribe(function(E){return T.error(E)}),N.progress.subscribe(function(E){return T.next(J({type:"progress"},E))}),N.response.subscribe(function(E){T.next(J({type:"response"},E)),T.complete()}),N.request.publish(L),function(){return N.abort.publish()}})}}}},1814:le=>{"use strict";le.exports=function(){return{onRequest:function(A){if("xhr"===A.adapter){var F=A.request,J=A.context;"upload"in F&&"onprogress"in F.upload&&(F.upload.onprogress=O("upload")),"onprogress"in F&&(F.onprogress=O("download"))}function O(H){return function(V){J.channels.progress.publish({stage:H,percent:V.lengthComputable?V.loaded/V.total*100:-1,total:V.total,loaded:V.loaded,lengthComputable:V.lengthComputable})}}}}}},9452:(le,$,A)=>{"use strict";le.exports=A(1814)},2090:(le,$,A)=>{"use strict";var F=A(4939),J=A(7689),O=A(1793),V="undefined"==typeof window?void 0:window,N=V?"xhr":"fetch",L="function"==typeof XMLHttpRequest?XMLHttpRequest:function(){},T="withCredentials"in new L,E="undefined"==typeof XDomainRequest?void 0:XDomainRequest,B=T?L:E;V||(L=O,B=O),le.exports=function(Q,X){var be=Q.applyMiddleware("finalizeOptions",Q.options),ie={},Te=V&&V.location&&!F(V.location.href,be.url),Oe=Q.applyMiddleware("interceptRequest",void 0,{adapter:N,context:Q});if(Oe){var ae=setTimeout(X,0,null,Oe);return{abort:function(){return clearTimeout(ae)}}}var b=Te?new B:new L,z=V&&V.XDomainRequest&&b instanceof V.XDomainRequest,G=be.headers,me=be.timeout,te=!1,de=!1,ye=!1;if(b.onerror=wn,b.ontimeout=wn,b.onabort=function(){K(!0),te=!0},b.onprogress=function(){},b[z?"onload":"onreadystatechange"]=function(){(function zt(){!me||(K(),ie.socket=setTimeout(function(){return re("ESOCKETTIMEDOUT")},me.socket))})(),!te&&(4===b.readyState||z)&&0!==b.status&&function nt(){if(!(te||de||ye)){if(0===b.status)return void wn(new Error("Unknown XHR error"));K(),de=!0,X(null,function ke(){var ot=b.status,mt=b.statusText;if(z&&void 0===ot)ot=200;else{if(ot>12e3&&ot<12156)return wn();ot=1223===b.status?204:b.status,mt=1223===b.status?"No Content":mt}return{body:b.response||b.responseText,url:be.url,method:be.method,headers:z?{}:J(b.getAllResponseHeaders()),statusCode:ot,statusMessage:mt}}())}}()},b.open(be.method,be.url,!0),b.withCredentials=!!be.withCredentials,G&&b.setRequestHeader)for(var Ie in G)G.hasOwnProperty(Ie)&&b.setRequestHeader(Ie,G[Ie]);else if(G&&z)throw new Error("Headers cannot be set on an XDomainRequest object");return be.rawBody&&(b.responseType="arraybuffer"),Q.applyMiddleware("onRequest",{options:be,adapter:N,request:b,context:Q}),b.send(be.body||null),me&&(ie.connect=setTimeout(function(){return re("ETIMEDOUT")},me.connect)),{abort:function Ze(){te=!0,b&&b.abort()}};function re(ot){ye=!0,b.abort();var mt=new Error("ESOCKETTIMEDOUT"===ot?"Socket timed out on request to ".concat(be.url):"Connection timed out on request to ".concat(be.url));mt.code=ot,Q.channels.error.publish(mt)}function K(ot){(ot||te||b.readyState>=2&&ie.connect)&&clearTimeout(ie.connect),ie.socket&&clearTimeout(ie.socket)}function wn(ot){if(!de){K(!0),de=!0,b=null;var mt=ot||new Error("Network error while attempting to reach ".concat(be.url));mt.isNetworkError=!0,mt.request=be,X(mt)}}}},1793:le=>{"use strict";function $(){this.readyState=0}$.prototype.open=function(A,F){this._method=A,this._url=F,this._resHeaders="",this.readyState=1,this.onreadystatechange()},$.prototype.abort=function(){this._controller&&this._controller.abort()},$.prototype.getAllResponseHeaders=function(){return this._resHeaders},$.prototype.setRequestHeader=function(A,F){this._headers=this._headers||{},this._headers[A]=F},$.prototype.send=function(A){var F=this,J=this._controller="function"==typeof AbortController&&new AbortController,O="arraybuffer"!==this.responseType,H={method:this._method,headers:this._headers,signal:J&&J.signal,body:A};"undefined"!=typeof window&&(H.credentials=this.withCredentials?"include":"omit"),fetch(this._url,H).then(function(V){return V.headers.forEach(function(N,L){F._resHeaders+="".concat(L,": ").concat(N,"\r\n")}),F.status=V.status,F.statusText=V.statusText,F.readyState=3,O?V.text():V.arrayBuffer()}).then(function(V){O?F.responseText=V:F.response=V,F.readyState=4,F.onreadystatechange()}).catch(function(V){"AbortError"!==V.name?F.onerror(V):F.onabort()})},le.exports=$},5482:(le,$,A)=>{"use strict";le.exports=A(2090)},9229:le=>{"use strict";le.exports="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}},9241:le=>{"use strict";le.exports=function($){return function(J,O){for(var H="onError"===J,V=O,N=arguments.length,L=new Array(N>2?N-2:0),T=2;T<N;T++)L[T-2]=arguments[T];for(var E=0;E<$[J].length;E++){var B=$[J][E];if(V=B.apply(void 0,[V].concat(L)),H&&!V)break}return V}}},717:(le,$,A)=>{"use strict";var F=A(623);function J(O){return!0===F(O)&&"[object Object]"===Object.prototype.toString.call(O)}le.exports=function(H){var V,N;return!(!1===J(H)||(V=H.constructor,"function"!=typeof V)||(N=V.prototype,!1===J(N))||!1===N.hasOwnProperty("isPrototypeOf"))}},623:le=>{"use strict";le.exports=function(A){return null!=A&&"object"==typeof A&&!1===Array.isArray(A)}},548:(le,$)=>{"use strict";var A="undefined"!=typeof Reflect?Reflect.construct:void 0,F=Object.defineProperty,J=Error.captureStackTrace;function O(N){void 0!==N&&F(this,"message",{configurable:!0,value:N,writable:!0});var L=this.constructor.name;void 0!==L&&L!==this.name&&F(this,"name",{configurable:!0,value:L,writable:!0}),J(this,this.constructor)}void 0===J&&(J=function(L){var T=new Error;F(L,"stack",{configurable:!0,get:function(){var B=T.stack;return F(this,"stack",{configurable:!0,value:B,writable:!0}),B},set:function(B){F(L,"stack",{configurable:!0,value:B,writable:!0})}})}),O.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:O,writable:!0}});var H=function(){function N(T,E){return F(T,"name",{configurable:!0,value:E})}try{var L=function(){};if(N(L,"foo"),"foo"===L.name)return N}catch(T){}}();(le.exports=function V(N,L){if(null==L||L===Error)L=O;else if("function"!=typeof L)throw new TypeError("super_ should be a function");var T;if("string"==typeof N)T=N,N=void 0!==A?function(){return A(L,arguments,this.constructor)}:function(){L.apply(this,arguments)},void 0!==H&&(H(N,T),T=void 0);else if("function"!=typeof N)throw new TypeError("constructor should be either a string or a function");N.super_=N.super=L;var E={constructor:{configurable:!0,value:N,writable:!0}};return void 0!==T&&(E.name={configurable:!0,value:T,writable:!0}),N.prototype=Object.create(L.prototype,E),N}).BaseError=O},8387:le=>{le.exports=function(){var A=[];return{subscribe:function F(O){return A.push(O),function(){var V=A.indexOf(O);V>-1&&A.splice(V,1)}},publish:function J(){for(var O=0;O<A.length;O++)A[O].apply(null,arguments)}}}},5943:le=>{"use strict";var $=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;function J(H){if(null==H)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(H)}le.exports=function O(){try{if(!Object.assign)return!1;var H=new String("abc");if(H[5]="de","5"===Object.getOwnPropertyNames(H)[0])return!1;for(var V={},N=0;N<10;N++)V["_"+String.fromCharCode(N)]=N;if("0123456789"!==Object.getOwnPropertyNames(V).map(function(E){return V[E]}).join(""))return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(E){T[E]=E}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},T)).join("")}catch(E){return!1}}()?Object.assign:function(H,V){for(var N,T,L=J(H),E=1;E<arguments.length;E++){for(var B in N=Object(arguments[E]))A.call(N,B)&&(L[B]=N[B]);if($){T=$(N);for(var Q=0;Q<T.length;Q++)F.call(N,T[Q])&&(L[T[Q]]=N[T[Q]])}}return L}},7689:le=>{var $=function(F){return F.replace(/^\s+|\s+$/g,"")},A=function(F){return"[object Array]"===Object.prototype.toString.call(F)};le.exports=function(F){if(!F)return{};for(var J={},O=$(F).split("\n"),H=0;H<O.length;H++){var V=O[H],N=V.indexOf(":"),L=$(V.slice(0,N)).toLowerCase(),T=$(V.slice(N+1));void 0===J[L]?J[L]=T:A(J[L])?J[L].push(T):J[L]=[J[L],T]}return J}},2858:(le,$)=>{"use strict";var A=Object.prototype.hasOwnProperty;function J(N){try{return decodeURIComponent(N.replace(/\+/g," "))}catch(L){return null}}function O(N){try{return encodeURIComponent(N)}catch(L){return null}}$.stringify=function V(N,L){L=L||"";var E,B,T=[];for(B in"string"!=typeof L&&(L="?"),N)if(A.call(N,B)){if(!(E=N[B])&&(null==E||isNaN(E))&&(E=""),B=O(B),E=O(E),null===B||null===E)continue;T.push(B+"="+E)}return T.length?L+T.join("&"):""},$.parse=function H(N){for(var E,L=/([^=?#&]+)=?([^&]*)/g,T={};E=L.exec(N);){var B=J(E[1]),Q=J(E[2]);null===B||null===Q||B in T||(T[B]=Q)}return T}},8237:le=>{"use strict";le.exports=function(A,F){if(F=F.split(":")[0],!(A=+A))return!1;switch(F){case"http":case"ws":return 80!==A;case"https":case"wss":return 443!==A;case"ftp":return 21!==A;case"gopher":return 70!==A;case"file":return!1}return 0!==A}},4939:(le,$,A)=>{"use strict";var F=A(2968);le.exports=function(J,O,H){if(J===O)return!0;var V=F.parse(J,!1,!0),N=F.parse(O,!1,!0),E={proto:V.protocol===N.protocol,hostname:V.hostname===N.hostname,port:(0|V.port||("https"===V.protocol?443:80))===(0|N.port||("https"===N.protocol?443:80))};return E.proto&&E.hostname&&(E.port||H)}},2968:le=>{"use strict";var $=/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?:\:(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/;le.exports={regex:$,parse:function(A){var F=$.exec(A);return F?{protocol:(F[1]||"").toLowerCase()||void 0,hostname:(F[5]||"").toLowerCase()||void 0,port:F[6]||void 0}:{}}}},946:function(le){"undefined"!=typeof self&&self,le.exports=(()=>{var $={75:function(O){(function(){var H,V,N,L,T,E;"undefined"!=typeof performance&&null!==performance&&performance.now?O.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(O.exports=function(){return(H()-T)/1e6},V=process.hrtime,L=(H=function(){var B;return 1e9*(B=V())[0]+B[1]})(),E=1e9*process.uptime(),T=L-E):Date.now?(O.exports=function(){return Date.now()-N},N=Date.now()):(O.exports=function(){return(new Date).getTime()-N},N=(new Date).getTime())}).call(this)},4087:(O,H,V)=>{for(var N=V(75),L="undefined"==typeof window?V.g:window,T=["moz","webkit"],E="AnimationFrame",B=L["request"+E],Q=L["cancel"+E]||L["cancelRequest"+E],X=0;!B&&X<T.length;X++)B=L[T[X]+"Request"+E],Q=L[T[X]+"Cancel"+E]||L[T[X]+"CancelRequest"+E];if(!B||!Q){var _e=0,be=0,ie=[];B=function(Te){if(0===ie.length){var Oe=N(),ae=Math.max(0,16.666666666666668-(Oe-_e));_e=ae+Oe,setTimeout(function(){var D=ie.slice(0);ie.length=0;for(var b=0;b<D.length;b++)if(!D[b].cancelled)try{D[b].callback(_e)}catch(z){setTimeout(function(){throw z},0)}},Math.round(ae))}return ie.push({handle:++be,callback:Te,cancelled:!1}),be},Q=function(Te){for(var Oe=0;Oe<ie.length;Oe++)ie[Oe].handle===Te&&(ie[Oe].cancelled=!0)}}O.exports=function(Te){return B.call(L,Te)},O.exports.cancel=function(){Q.apply(L,arguments)},O.exports.polyfill=function(Te){Te||(Te=L),Te.requestAnimationFrame=B,Te.cancelAnimationFrame=Q}}},A={};function F(O){var H=A[O];if(void 0!==H)return H.exports;var V=A[O]={exports:{}};return $[O].call(V.exports,V,V.exports,F),V.exports}F.n=O=>{var H=O&&O.__esModule?()=>O.default:()=>O;return F.d(H,{a:H}),H},F.d=(O,H)=>{for(var V in H)F.o(H,V)&&!F.o(O,V)&&Object.defineProperty(O,V,{enumerable:!0,get:H[V]})},F.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(O){if("object"==typeof window)return window}}(),F.o=(O,H)=>Object.prototype.hasOwnProperty.call(O,H);var J={};return(()=>{"use strict";F.d(J,{default:()=>ye});var O=F(4087),H=F.n(O);const V=function(Me){return new RegExp(/<[a-z][\s\S]*>/i).test(Me)},N=function(Me){var Ie=document.createElement("div");return Ie.innerHTML=Me,Ie.childNodes},L=function(Me,Ie){return Math.floor(Math.random()*(Ie-Me+1))+Me};var T="TYPE_CHARACTER",E="REMOVE_CHARACTER",B="REMOVE_ALL",Q="REMOVE_LAST_VISIBLE_NODE",X="PAUSE_FOR",_e="CALL_FUNCTION",be="ADD_HTML_TAG_ELEMENT",ie="CHANGE_DELETE_SPEED",Te="CHANGE_DELAY",Oe="CHANGE_CURSOR",ae="PASTE_STRING",D="HTML_TAG";function b(Me,Ie){var Ze=Object.keys(Me);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(Me);Ie&&(re=re.filter(function(zt){return Object.getOwnPropertyDescriptor(Me,zt).enumerable})),Ze.push.apply(Ze,re)}return Ze}function z(Me){for(var Ie=1;Ie<arguments.length;Ie++){var Ze=null!=arguments[Ie]?arguments[Ie]:{};Ie%2?b(Object(Ze),!0).forEach(function(re){de(Me,re,Ze[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(Ze)):b(Object(Ze)).forEach(function(re){Object.defineProperty(Me,re,Object.getOwnPropertyDescriptor(Ze,re))})}return Me}function G(Me){return function(Ie){if(Array.isArray(Ie))return me(Ie)}(Me)||function(Ie){if("undefined"!=typeof Symbol&&null!=Ie[Symbol.iterator]||null!=Ie["@@iterator"])return Array.from(Ie)}(Me)||function(Ie,Ze){if(Ie){if("string"==typeof Ie)return me(Ie,undefined);var re=Object.prototype.toString.call(Ie).slice(8,-1);return"Object"===re&&Ie.constructor&&(re=Ie.constructor.name),"Map"===re||"Set"===re?Array.from(Ie):"Arguments"===re||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re)?me(Ie,undefined):void 0}}(Me)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(Me,Ie){(null==Ie||Ie>Me.length)&&(Ie=Me.length);for(var Ze=0,re=new Array(Ie);Ze<Ie;Ze++)re[Ze]=Me[Ze];return re}function de(Me,Ie,Ze){return Ie in Me?Object.defineProperty(Me,Ie,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Me[Ie]=Ze,Me}const ye=function(){function Me(re,zt){var K=this;if(function(ke,nt){if(!(ke instanceof nt))throw new TypeError("Cannot call a class as a function")}(this,Me),de(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),de(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),de(this,"setupWrapperElement",function(){K.state.elements.container&&(K.state.elements.wrapper.className=K.options.wrapperClassName,K.state.elements.cursor.className=K.options.cursorClassName,K.state.elements.cursor.innerHTML=K.options.cursor,K.state.elements.container.innerHTML="",K.state.elements.container.appendChild(K.state.elements.wrapper),K.state.elements.container.appendChild(K.state.elements.cursor))}),de(this,"start",function(){return K.state.eventLoopPaused=!1,K.runEventLoop(),K}),de(this,"pause",function(){return K.state.eventLoopPaused=!0,K}),de(this,"stop",function(){return K.state.eventLoop&&((0,O.cancel)(K.state.eventLoop),K.state.eventLoop=null),K}),de(this,"pauseFor",function(ke){return K.addEventToQueue(X,{ms:ke}),K}),de(this,"typeOutAllStrings",function(){return"string"==typeof K.options.strings?(K.typeString(K.options.strings).pauseFor(K.options.pauseFor),K):(K.options.strings.forEach(function(ke){K.typeString(ke).pauseFor(K.options.pauseFor).deleteAll(K.options.deleteSpeed)}),K)}),de(this,"typeString",function(ke){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(V(ke))return K.typeOutHTMLString(ke,nt);if(ke){var mt=(K.options||{}).stringSplitter,et="function"==typeof mt?mt(ke):ke.split("");K.typeCharacters(et,nt)}return K}),de(this,"pasteString",function(ke){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(ke)?K.typeOutHTMLString(ke,nt,!0):(ke&&K.addEventToQueue(ae,{character:ke,node:nt}),K)}),de(this,"typeOutHTMLString",function(ke){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ot=arguments.length>2?arguments[2]:void 0,mt=N(ke);if(mt.length>0)for(var et=0;et<mt.length;et++){var It=mt[et],Wt=It.innerHTML;It&&3!==It.nodeType?(It.innerHTML="",K.addEventToQueue(be,{node:It,parentNode:nt}),ot?K.pasteString(Wt,It):K.typeString(Wt,It)):It.textContent&&(ot?K.pasteString(It.textContent,nt):K.typeString(It.textContent,nt))}return K}),de(this,"deleteAll",function(){return K.addEventToQueue(B,{speed:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"natural"}),K}),de(this,"changeDeleteSpeed",function(ke){if(!ke)throw new Error("Must provide new delete speed");return K.addEventToQueue(ie,{speed:ke}),K}),de(this,"changeDelay",function(ke){if(!ke)throw new Error("Must provide new delay");return K.addEventToQueue(Te,{delay:ke}),K}),de(this,"changeCursor",function(ke){if(!ke)throw new Error("Must provide new cursor");return K.addEventToQueue(Oe,{cursor:ke}),K}),de(this,"deleteChars",function(ke){if(!ke)throw new Error("Must provide amount of characters to delete");for(var nt=0;nt<ke;nt++)K.addEventToQueue(E);return K}),de(this,"callFunction",function(ke,nt){if(!ke||"function"!=typeof ke)throw new Error("Callbak must be a function");return K.addEventToQueue(_e,{cb:ke,thisArg:nt}),K}),de(this,"typeCharacters",function(ke){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ke||!Array.isArray(ke))throw new Error("Characters must be an array");return ke.forEach(function(ot){K.addEventToQueue(T,{character:ot,node:nt})}),K}),de(this,"removeCharacters",function(ke){if(!ke||!Array.isArray(ke))throw new Error("Characters must be an array");return ke.forEach(function(){K.addEventToQueue(E)}),K}),de(this,"addEventToQueue",function(ke,nt){return K.addEventToStateProperty(ke,nt,arguments.length>2&&void 0!==arguments[2]&&arguments[2],"eventQueue")}),de(this,"addReverseCalledEvent",function(ke,nt){return K.options.loop?K.addEventToStateProperty(ke,nt,arguments.length>2&&void 0!==arguments[2]&&arguments[2],"reverseCalledEvents"):K}),de(this,"addEventToStateProperty",function(ke,nt){var mt=arguments.length>3?arguments[3]:void 0,et={eventName:ke,eventArgs:nt||{}};return K.state[mt]=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[et].concat(G(K.state[mt])):[].concat(G(K.state[mt]),[et]),K}),de(this,"runEventLoop",function(){K.state.lastFrameTime||(K.state.lastFrameTime=Date.now());var ke=Date.now(),nt=ke-K.state.lastFrameTime;if(!K.state.eventQueue.length){if(!K.options.loop)return;K.state.eventQueue=G(K.state.calledEvents),K.state.calledEvents=[],K.options=z({},K.state.initialOptions)}if(K.state.eventLoop=H()(K.runEventLoop),!K.state.eventLoopPaused){if(K.state.pauseUntil){if(ke<K.state.pauseUntil)return;K.state.pauseUntil=null}var ot,mt=G(K.state.eventQueue),et=mt.shift();if(!(nt<=(ot=et.eventName===Q||et.eventName===E?"natural"===K.options.deleteSpeed?L(40,80):K.options.deleteSpeed:"natural"===K.options.delay?L(120,160):K.options.delay))){var It=et.eventName,Wt=et.eventArgs;switch(K.logInDevMode({currentEvent:et,state:K.state,delay:ot}),It){case ae:case T:var yi=Wt.character,no=Wt.node,Li=document.createTextNode(yi),ss=Li;K.options.onCreateTextNode&&"function"==typeof K.options.onCreateTextNode&&(ss=K.options.onCreateTextNode(yi,Li)),ss&&(no?no.appendChild(ss):K.state.elements.wrapper.appendChild(ss)),K.state.visibleNodes=[].concat(G(K.state.visibleNodes),[{type:"TEXT_NODE",character:yi,node:ss}]);break;case E:mt.unshift({eventName:Q,eventArgs:{removingCharacterNode:!0}});break;case X:var Ds=et.eventArgs.ms;K.state.pauseUntil=Date.now()+parseInt(Ds);break;case _e:var As=et.eventArgs;As.cb.call(As.thisArg,{elements:K.state.elements});break;case be:var Fi=et.eventArgs,ro=Fi.node,Ba=Fi.parentNode;Ba?Ba.appendChild(ro):K.state.elements.wrapper.appendChild(ro),K.state.visibleNodes=[].concat(G(K.state.visibleNodes),[{type:D,node:ro,parentNode:Ba||K.state.elements.wrapper}]);break;case B:var $o=K.state.visibleNodes,he=Wt.speed,Be=[];he&&Be.push({eventName:ie,eventArgs:{speed:he,temp:!0}});for(var Qe=0,Ue=$o.length;Qe<Ue;Qe++)Be.push({eventName:Q,eventArgs:{removingCharacterNode:!1}});he&&Be.push({eventName:ie,eventArgs:{speed:K.options.deleteSpeed,temp:!0}}),mt.unshift.apply(mt,Be);break;case Q:var ct=et.eventArgs.removingCharacterNode;if(K.state.visibleNodes.length){var at=K.state.visibleNodes.pop(),Bt=at.type,dn=at.node;K.options.onRemoveNode&&"function"==typeof K.options.onRemoveNode&&K.options.onRemoveNode({node:dn,character:at.character}),dn&&dn.parentNode.removeChild(dn),Bt===D&&ct&&mt.unshift({eventName:Q,eventArgs:{}})}break;case ie:K.options.deleteSpeed=et.eventArgs.speed;break;case Te:K.options.delay=et.eventArgs.delay;break;case Oe:K.options.cursor=et.eventArgs.cursor,K.state.elements.cursor.innerHTML=et.eventArgs.cursor}K.options.loop&&(et.eventName===Q||et.eventArgs&&et.eventArgs.temp||(K.state.calledEvents=[].concat(G(K.state.calledEvents),[et]))),K.state.eventQueue=mt,K.state.lastFrameTime=ke}}}),re)if("string"==typeof re){var wn=document.querySelector(re);if(!wn)throw new Error("Could not find container element");this.state.elements.container=wn}else this.state.elements.container=re;zt&&(this.options=z(z({},this.options),zt)),this.state.initialOptions=z({},this.options),this.init()}var Ze;return(Ze=[{key:"init",value:function(){var zt;this.setupWrapperElement(),this.addEventToQueue(Oe,{cursor:this.options.cursor},!0),this.addEventToQueue(B,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(zt=document.createElement("style")).appendChild(document.createTextNode(".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}")),document.head.appendChild(zt),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),!0===this.options.autoStart&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(re){this.options.devMode&&console.log(re)}}])&&function te(Me,Ie){for(var Ze=0;Ze<Ie.length;Ze++){var re=Ie[Ze];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Me,re.key,re)}}(Me.prototype,Ze),Me}()})(),J.default})()},7629:(le,$,A)=>{"use strict";var F=A(8237),J=A(2858),O=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,H=/[\n\r\t]/g,V=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,N=/:\d+$/,L=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,T=/^[a-zA-Z]:/;function E(D){return(D||"").toString().replace(O,"")}var B=[["#","hash"],["?","query"],function(b,z){return _e(z.protocol)?b.replace(/\\/g,"/"):b},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Q={hash:1,query:1};function X(D){var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var te,G={},me=typeof(D=D||b.location||{});if("blob:"===D.protocol)G=new Te(unescape(D.pathname),{});else if("string"===me)for(te in G=new Te(D,{}),Q)delete G[te];else if("object"===me){for(te in D)te in Q||(G[te]=D[te]);void 0===G.slashes&&(G.slashes=V.test(D.href))}return G}function _e(D){return"file:"===D||"ftp:"===D||"http:"===D||"https:"===D||"ws:"===D||"wss:"===D}function be(D,b){D=(D=E(D)).replace(H,""),b=b||{};var ye,z=L.exec(D),G=z[1]?z[1].toLowerCase():"",me=!!z[2],te=!!z[3],de=0;return me?te?(ye=z[2]+z[3]+z[4],de=z[2].length+z[3].length):(ye=z[2]+z[4],de=z[2].length):te?(ye=z[3]+z[4],de=z[3].length):ye=z[4],"file:"===G?de>=2&&(ye=ye.slice(2)):_e(G)?ye=z[4]:G?me&&(ye=ye.slice(2)):de>=2&&_e(b.protocol)&&(ye=z[4]),{protocol:G,slashes:me||_e(G),slashesCount:de,rest:ye}}function Te(D,b,z){if(D=(D=E(D)).replace(H,""),!(this instanceof Te))return new Te(D,b,z);var G,me,te,de,ye,Me,Ie=B.slice(),Ze=typeof b,re=this,zt=0;for("object"!==Ze&&"string"!==Ze&&(z=b,b=null),z&&"function"!=typeof z&&(z=J.parse),G=!(me=be(D||"",b=X(b))).protocol&&!me.slashes,re.slashes=me.slashes||G&&b.slashes,re.protocol=me.protocol||b.protocol||"",D=me.rest,("file:"===me.protocol&&(2!==me.slashesCount||T.test(D))||!me.slashes&&(me.protocol||me.slashesCount<2||!_e(re.protocol)))&&(Ie[3]=[/(.*)/,"pathname"]);zt<Ie.length;zt++)"function"!=typeof(de=Ie[zt])?(Me=de[1],(te=de[0])!=te?re[Me]=D:"string"==typeof te?~(ye="@"===te?D.lastIndexOf(te):D.indexOf(te))&&("number"==typeof de[2]?(re[Me]=D.slice(0,ye),D=D.slice(ye+de[2])):(re[Me]=D.slice(ye),D=D.slice(0,ye))):(ye=te.exec(D))&&(re[Me]=ye[1],D=D.slice(0,ye.index)),re[Me]=re[Me]||G&&de[3]&&b[Me]||"",de[4]&&(re[Me]=re[Me].toLowerCase())):D=de(D,re);z&&(re.query=z(re.query)),G&&b.slashes&&"/"!==re.pathname.charAt(0)&&(""!==re.pathname||""!==b.pathname)&&(re.pathname=function ie(D,b){if(""===D)return b;for(var z=(b||"/").split("/").slice(0,-1).concat(D.split("/")),G=z.length,me=z[G-1],te=!1,de=0;G--;)"."===z[G]?z.splice(G,1):".."===z[G]?(z.splice(G,1),de++):de&&(0===G&&(te=!0),z.splice(G,1),de--);return te&&z.unshift(""),("."===me||".."===me)&&z.push(""),z.join("/")}(re.pathname,b.pathname)),"/"!==re.pathname.charAt(0)&&_e(re.protocol)&&(re.pathname="/"+re.pathname),F(re.port,re.protocol)||(re.host=re.hostname,re.port=""),re.username=re.password="",re.auth&&(~(ye=re.auth.indexOf(":"))?(re.username=re.auth.slice(0,ye),re.username=encodeURIComponent(decodeURIComponent(re.username)),re.password=re.auth.slice(ye+1),re.password=encodeURIComponent(decodeURIComponent(re.password))):re.username=encodeURIComponent(decodeURIComponent(re.auth)),re.auth=re.password?re.username+":"+re.password:re.username),re.origin="file:"!==re.protocol&&_e(re.protocol)&&re.host?re.protocol+"//"+re.host:"null",re.href=re.toString()}Te.prototype={set:function Oe(D,b,z){var G=this;switch(D){case"query":"string"==typeof b&&b.length&&(b=(z||J.parse)(b)),G[D]=b;break;case"port":G[D]=b,F(b,G.protocol)?b&&(G.host=G.hostname+":"+b):(G.host=G.hostname,G[D]="");break;case"hostname":G[D]=b,G.port&&(b+=":"+G.port),G.host=b;break;case"host":G[D]=b,N.test(b)?(b=b.split(":"),G.port=b.pop(),G.hostname=b.join(":")):(G.hostname=b,G.port="");break;case"protocol":G.protocol=b.toLowerCase(),G.slashes=!z;break;case"pathname":case"hash":if(b){var me="pathname"===D?"/":"#";G[D]=b.charAt(0)!==me?me+b:b}else G[D]=b;break;case"username":case"password":G[D]=encodeURIComponent(b);break;case"auth":var te=b.indexOf(":");~te?(G.username=b.slice(0,te),G.username=encodeURIComponent(decodeURIComponent(G.username)),G.password=b.slice(te+1),G.password=encodeURIComponent(decodeURIComponent(G.password))):G.username=encodeURIComponent(decodeURIComponent(b))}for(var de=0;de<B.length;de++){var ye=B[de];ye[4]&&(G[ye[1]]=G[ye[1]].toLowerCase())}return G.auth=G.password?G.username+":"+G.password:G.username,G.origin="file:"!==G.protocol&&_e(G.protocol)&&G.host?G.protocol+"//"+G.host:"null",G.href=G.toString(),G},toString:function ae(D){(!D||"function"!=typeof D)&&(D=J.stringify);var b,z=this,G=z.host,me=z.protocol;me&&":"!==me.charAt(me.length-1)&&(me+=":");var te=me+(z.protocol&&z.slashes||_e(z.protocol)?"//":"");return z.username?(te+=z.username,z.password&&(te+=":"+z.password),te+="@"):z.password?(te+=":"+z.password,te+="@"):"file:"!==z.protocol&&_e(z.protocol)&&!G&&"/"!==z.pathname&&(te+="@"),(":"===G[G.length-1]||N.test(z.hostname)&&!z.port)&&(G+=":"),te+=G+z.pathname,(b="object"==typeof z.query?D(z.query):z.query)&&(te+="?"!==b.charAt(0)?"?"+b:b),z.hash&&(te+=z.hash),te}},Te.extractProtocol=be,Te.location=X,Te.trimLeft=E,Te.qs=J,le.exports=Te}},le=>{le(le.s=4524)}]);